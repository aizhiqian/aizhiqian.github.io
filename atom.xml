<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>向日葵🌻小站</title>
  
  <subtitle>今日事，今日毕</subtitle>
  <link href="https://aizhiqian.github.io/atom.xml" rel="self"/>
  
  <link href="https://aizhiqian.github.io/"/>
  <updated>2024-05-14T11:03:24.000Z</updated>
  <id>https://aizhiqian.github.io/</id>
  
  <author>
    <name>AiGuoHou</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【笔记】如何发布一个新的 NPM 包及其后续更新</title>
    <link href="https://aizhiqian.github.io/posts/82ca8098/"/>
    <id>https://aizhiqian.github.io/posts/82ca8098/</id>
    <published>2024-05-14T11:03:24.000Z</published>
    <updated>2024-05-14T11:03:24.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在 JavaScript 的世界里，npm 是最流行的包管理器之一，它允许开发者分享和使用其他开发者编写的代码。如果你有一个很棒的项目想要分享给全世界，那么发布一个 npm 包是一个不错的选择。本文将指导你如何发布一个新的 npm 包以及如何更新这个包。</p></blockquote><h1>1  发布新的 NPM 包</h1><h2 id="1-1-准备工作">1.1 准备工作</h2><p>在开始之前，你需要确保已经安装了 Node.js 和 npm。Node.js 的安装会自动包含 npm，所以你不需要单独安装  npm。你可以通过在命令行中运行以下命令来检查它们是否已经安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>如果这些命令返回了版本号，那么你就准备好了。如果没有，请前往 <a href="https://nodejs.org/">Node.js官网</a> 下载并安装。</p><h2 id="1-2-创建-NPM-账号">1.2 创建 NPM 账号</h2><p>在发布包之前，你需要一个 npm 账号。如果你还没有账号，可以通过 <a href="https://www.npmjs.com/signup">npm官网</a> 注册，或者通过命令行注册：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm adduser</span><br></pre></td></tr></table></figure><p>按照提示填写用户名、密码和邮箱即可。</p><h2 id="1-3-初始化项目">1.3 初始化项目</h2><p>如果你的项目还没有初始化，请在项目根目录下运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><p>这个命令会引导你填写一些基本信息，比如项目名称、版本、描述等，最终会生成一个 <code>package.json</code> 文件。请确保项目名称是唯一的，否则在发布时会遇到名称冲突。（可以在 npm 官网查询是否有你的项目名称，如果没有就可以用）</p><h2 id="1-4-创建-npmignore-文件（可选）">1.4 创建 .npmignore 文件（可选）</h2><p>创建 <code>.npmignore</code> 文件来指定在发布包时应该忽略的文件和目录。这可以帮助你减小包的大小，避免不必要的文件被上传。</p><h2 id="1-5-编写和测试代码">1.5 编写和测试代码</h2><p>在发布之前，请确保你的代码已经编写完成，并且通过了所有的测试。良好的单元测试可以大大提高你的包的质量。可以使用 <code>npm link</code> 来进行本地测试。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">link</span></span><br></pre></td></tr></table></figure><h2 id="1-6-登录到-NPM">1.6 登录到 NPM</h2><p>如果你尚未登录，使用 <code>npm login </code>命令登录到你的 npm 账户。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm login</span><br></pre></td></tr></table></figure><h2 id="1-7-发布包">1.7 发布包</h2><p>当一切准备就绪后，你可以通过以下命令来发布你的包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure><p>如果你的包是公开的，那么这个命令就足够了。如果你想发布一个私有包，请使用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish --access=restricted</span><br></pre></td></tr></table></figure><h2 id="1-8-验证发布">1.8 验证发布</h2><p>发布后，到 npm 网站上检查你的包，确保新版本被正确发布。</p><h1>2  更新 NPM 包</h1><h2 id="2-1-拉取最新代码">2.1 拉取最新代码</h2><p>在开始之前，确保你的本地项目是最新的。如果你与他人协作，在进行任何更改之前，先从远程仓库拉取最新的代码。</p><h2 id="2-2-应用更改">2.2 应用更改</h2><p>在你的本地代码库中进行必要的更改。这可能包括添加新特性、修复 bug 或更新文档等。确保你的更改清晰、高效，并且不会引入新的问题。</p><h2 id="2-3-更新版本号">2.3 更新版本号</h2><p>根据所做更改的性质，更新 <code>package.json</code> 文件中的版本号。遵循<a href="https://semver.org/">语义化版本控制（SemVer）</a>原则：</p><ul><li><strong>主版本（major）</strong>：不兼容的 API 修改；</li><li><strong>次版本（minor）</strong>：向下兼容的新功能；</li><li><strong>修订号（patch）</strong>：向下兼容的问题修正。</li></ul><p>使用 npm 的 <code>version</code> 命令自动更新版本号并为新版本创建一个 Git 标签：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm version patch <span class="comment"># 更新修订号</span></span><br><span class="line">npm version minor <span class="comment"># 更新次版本</span></span><br><span class="line">npm version major <span class="comment"># 更新主版本</span></span><br></pre></td></tr></table></figure><h2 id="2-4-运行测试">2.4 运行测试</h2><p>在发布之前，确保通过所有单元测试和集成测试。这一步至关重要，因为它可以帮助你确保你的更改不会引入任何新的 bug。</p><h2 id="2-5-登录到-NPM">2.5 登录到 NPM</h2><p>如果你尚未登录，使用 <code>npm login</code> 命令登录到你的 npm 账户。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm login</span><br></pre></td></tr></table></figure><h2 id="2-6-发布新版本">2.6 发布新版本</h2><p>使用 <code>npm publish</code> 命令将更新后的包发布到 npm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure><h2 id="2-7-更新文档">2.7 更新文档</h2><p>如果你的包有外部文档，确保更新文档以反映新版本的变更。</p><hr><p>发布和更新 npm 包是一个相对简单的过程，但是确保你的包质量是非常重要的。良好的文档、充分的测试以及遵循语义化版本规范都是必不可少的。希望这篇文章能帮助你成功发布和更新你的 npm 包。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;在 JavaScript 的世界里，npm 是最流行的包管理器之一，它允许开发者分享和使用其他开发者编写的代码。如果你有一个很棒的项目想要分享给全世界，那么发布一个 npm 包是一个不错的选择。本文将指导你如何发布一个新的 npm 包以及如何更新这</summary>
      
    
    
    
    <category term="玩机笔记" scheme="https://aizhiqian.github.io/categories/%E7%8E%A9%E6%9C%BA%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="npm" scheme="https://aizhiqian.github.io/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>【Windows】装机必备软件</title>
    <link href="https://aizhiqian.github.io/posts/e1d32862/"/>
    <id>https://aizhiqian.github.io/posts/e1d32862/</id>
    <published>2024-05-05T09:16:27.000Z</published>
    <updated>2024-05-06T05:59:20.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note green icon-padding flat"><i class="note-icon fa-brands fa-safari"></i><p><a class="btn-anzhiyu outline green larger" href="https://blog.csdn.net/y3332664073/article/details/138501105"   title="原文地址：【Windows】装机必备软件分享"><span>原文地址：【Windows】装机必备软件分享</span></a></p></div><h2 id="压缩">压缩</h2><ul><li><a href="https://www.7-zip.org/">7-Zip</a> - 用于处理压缩包的开源 Windows 实用程序。</li><li><a href="https://www.bandisoft.com/bandizip/">Bandizip</a> - 集轻量，快速与免费一体的 zip 压缩程序。</li></ul><h2 id="文档">文档</h2><ul><li><a href="http://www.office.com/">Microsoft Office</a> -  Microsoft 自己的生产力套件。</li><li><a href="https://www.wps.cn/">WPS Office</a> - 完美的免费办公软件。</li></ul><h2 id="游戏">游戏</h2><ul><li><a href="http://store.steampowered.com/">Steam</a> - 最大的视频游戏在线零售商。</li></ul><h2 id="图片">图片</h2><ul><li>1 1curl <a href="https://www.google.comtxt">https://www.google.comtxt</a></li><li><a href="https://github.com/Bridel-Igor/Wallomizer">Wallomizer</a> - 简化了 <a href="http://wallhaven.cc">wallhaven.cc</a> 的使用。它允许你从用户收藏、搜索队列或本地文件夹中设置背景幻灯片。</li><li><a href="https://molunerfinn.com/PicGo/">PicGo</a> - 一个用于快速上传图片并获取图片 URL 链接的工具。</li></ul><h2 id="网盘">网盘</h2><ul><li><a href="https://pan.baidu.com/download#win">百度网盘</a> - 为用户提供稳定、安全的个人云存储服务。</li><li><a href="https://www.alipan.com/">阿里云盘</a> - 一款速度快、不打扰、够安全、易于分享的网盘。</li></ul><h2 id="终端">终端</h2><ul><li><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html">Putty</a> - SSH 和 telnet 客户端。</li><li><a href="https://learn.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell-on-windows">PowerShell</a> - 一种跨平台的任务自动化解决方案，由命令行 shell、脚本语言和配置管理框架组成。</li><li><a href="https://ohmyposh.dev/">Oh My Posh</a> - 适用于任何 Shell 的美化主题。</li></ul><h2 id="语言">语言</h2><ul><li><a href="https://www.python.org/downloads/windows/">Python</a> - 一种编程语言，能让您快速工作，更有效地整合系统。</li><li><a href="https://git-scm.com/">Git</a> - 一个免费的开源分布式版本控制系统，旨在快速高效地处理从小到大的项目。</li><li><a href="https://nodejs.org/en">Node.js</a> - 一个免费、开源、跨平台的 JavaScript 运行时环境。</li><li><a href="https://developer.android.google.cn/studio/releases/platform-tools">ADB</a> - 与 Android 平台进行交互的工具。</li></ul><h2 id="视频">视频</h2><ul><li><a href="http://potplayer.daum.net/">PotPlayer</a> - 多媒体播放器，具有广泛的编解码器集合，它还为用户提供大量配置选项。</li><li><a href="https://v.qq.com/download.html">腾讯视频</a> - 中国领先的视频媒体平台，海量高清视频观看。</li></ul><h2 id="音乐">音乐</h2><ul><li><a href="https://www.spotify.com/sg-zh/download/windows/">Spotify</a> - 在你的设备上免费播放数百万首歌曲和播客。</li></ul><h2 id="安全">安全</h2><ul><li><p><a href="https://geekuninstaller.com/">Geek Uninstaller</a> - 软件卸载工具。</p></li><li><p><a href="https://www.iobit.com/en/iobit-unlocker.php">IObit Unlocker</a> - 再也不用担心电脑上出现“无法删除文件”的问题了。</p></li><li><p><a href="http://www.keepass.info/">KeePass</a> - 免费、开源、易用的密码管理软件。</p></li></ul><h2 id="电子书">电子书</h2><ul><li><a href="http://calibre-ebook.com/">Calibre</a> - 用于电子书管理和转换的强大软件。</li><li><a href="https://www.koodoreader.com/zh">koodo-reader</a> - 开源免费的电子书阅读器，支持多达15种主流电子书格式，内置笔记、高亮、翻译功能，助力高效书籍阅读和学习。</li><li><a href="https://www.4d4y.com/forum/viewthread.php?tid=645717">EasyPub</a> - 转换 txt 到 epub 和 mobi。</li></ul><h2 id="下载工具">下载工具</h2><ul><li><a href="https://www.internetdownloadmanager.com/">Internet Download Manager</a> - 一款可将下载速度提高多达 5 倍、恢复或安排下载以及下载流媒体视频的工具。（可在网上找破解版）</li><li><a href="https://www.freedownloadmanager.org/zh/">Free Download Manager</a> - 类似于 IDM，另外还支持磁力种子，完全免费。</li><li><a href="https://github.com/nilaoda/N_m3u8DL-CLI">N_m3u8DL-CLI</a> - 一个简单易用的 m3u8 下载器。</li><li><a href="https://github.com/c0re100/qBittorrent-Enhanced-Edition">qBittorrent-Enhanced-Edition</a> - [非官方] 基于 <a href="https://www.qbittorrent.org/">qBittorrent</a> 的 qBittorrent 增强版。</li><li><a href="https://github.com/KurtBestor/Hitomi-Downloader">Hitomi-Downloader</a> - 基于 yt-dlp 从各种网站下载图片/视频/音乐/文本等的桌面实用工具。</li></ul><h2 id="科学上网">科学上网</h2><ul><li><a href="https://github.com/clash-verge-rev/clash-verge-rev">Clash Verge</a> - 基于 Tauri 的 Clash Meta GUI。</li><li><a href="https://github.com/2dust/v2rayN">v2rayN</a> - 适用于 Windows 的 GUI 客户端，支持 Xray 核心和 v2fly 核心等。</li><li><a href="https://wwm.lanzout.com/i4mBZ1xjh37g">Clash for Windows</a> - 已停更。 【密码：8899】</li><li><a href="https://one.one.one.one/">Cloudflare WARP</a> - 使 Internet 更安全的免费应用。</li></ul><h2 id="聊天客户端">聊天客户端</h2><ul><li><p><a href="https://im.qq.com/index/">QQ</a> - 不仅是轻松聊天，更是兴趣社区的聚集地。</p></li><li><p><a href="https://weixin.qq.com/">微信</a> - 一款跨平台的通讯工具。支持单人、多人参与。通过手机网络发送语音、图片、视频和文字。</p></li><li><p><a href="https://desktop.telegram.org/">Telegram Desktop</a> - 一个专注于速度和安全性的消息应用程序，它速度极快，操作简单且免费。</p></li></ul><h2 id="文本编辑器">文本编辑器</h2><ul><li><a href="https://notepad-plus-plus.org/">Notepad++</a> - 一款支持多种编程语言的源码编辑器。</li><li><a href="https://code.visualstudio.com/Download">Visual Studio Code</a> - 用于构建和调试现代 Web 和云应用程序。</li><li><a href="https://www.typora.io/">Typora</a> - 极致简洁的 Markdown 编辑器，所见即所得。</li></ul><h2 id="开发者工具">开发者工具</h2><ul><li><a href="https://code.visualstudio.com/Download">Visual Studio Code</a> - 轻量级代码编辑器。</li><li><a href="https://winmerge.org/">WinMerge</a> - 可以比较文件夹和文件，以可视化文本格式显示差异。</li></ul><h2 id="生产力工具">生产力工具</h2><ul><li><a href="https://ditto-cp.sourceforge.io/">Ditto</a> - 剪贴板管理器。</li><li><a href="https://www.voidtools.com/zh-cn/">Everything</a> - 最快的文件/文件夹搜索工具， 通过名称搜索。</li><li><a href="https://portableapps.com/">PortableApps</a> - 适用于 USB、便携式和云驱动器的便携式软件。</li><li><a href="https://www.jam-software.com/treesize">TreeSize</a> - 可视化存储容量的使用情况。</li><li><a href="https://github.com/BluePointLilac/ContextMenuManager">ContextMenuManager</a> - 纯粹的 Windows 右键菜单管理程序。</li></ul><h2 id="网页浏览器">网页浏览器</h2><ul><li><a href="https://www.google.com/chrome/">Google Chrome</a> - 快速安全的网络浏览器，专为您而打造。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note green icon-padding flat&quot;&gt;&lt;i class=&quot;note-icon fa-brands fa-safari&quot;&gt;&lt;/i&gt;&lt;p&gt;&lt;a class=&quot;btn-anzhiyu outline green larger&quot; href=&quot;</summary>
      
    
    
    
    <category term="资源分享" scheme="https://aizhiqian.github.io/categories/%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="软件" scheme="https://aizhiqian.github.io/tags/%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>【教程】五分钟注册美区AppleID，手把手教，稳定且耐用！</title>
    <link href="https://aizhiqian.github.io/posts/cb3d58ea/"/>
    <id>https://aizhiqian.github.io/posts/cb3d58ea/</id>
    <published>2024-04-27T09:09:01.000Z</published>
    <updated>2024-04-27T09:09:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>这篇文章教大家注册一个非常稳定的美区 Apple ID。</p><p>我通过该方法注册过两个美区账号，还冲了钱，到目前已经使用两年了，没出现任何问题稳的很。</p><p>话不多说，教程开始，只要跟着我的步骤走，百分百能成功。</p><h2 id="1-准备工作">1  准备工作</h2><ol><li>一个能接收短信的国内手机号</li><li>一个全新邮箱（指从没注册过Apple ID的邮箱）</li><li>美国地址生成器（后面我会给大家提供）</li><li>无需任何代理工具</li></ol><p><strong>注意以下四点可以避免很多问题：</strong></p><ol><li><p>出生日期：一定要设置成大于 18 周岁的日期，否则会导致部分应用由于年龄限制无法使用。</p></li><li><p>电子邮件：建议新注册一个全新的从未注册过 Apple ID 的邮箱，比如 163 邮箱。</p></li><li><p>手机号码：亲测，注册过中国区 Apple ID 的手机号码可以用来注册美区账号，不会产生冲突。</p></li><li><p>密码：设置密码时，密码中不要包含有名字、生日、邮箱中的信息，否则会卡在验证码那一步。</p></li></ol><h2 id="2-注册教程">2  注册教程</h2><p>为了方便大家注册，该方法全程都在手机中操作，不用借助电脑。</p><p>首先进入美国 Apple ID 注册页面，复制下方网址至 Safari 浏览器中打开即可进入。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://appleid.apple.com/account</span><br></pre></td></tr></table></figure><p>具体注册方法如下长图，跟着我的步骤走就行了，一定要严格按照我写的要求操作。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271650618.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/eff83756306995981c2bfc1f0fce19cc275892.jpg) --><p>接着需要对<strong>电子邮件/手机号码</strong>进行验证。把收到的验证码输入进去，依次点击<strong>下一步</strong>就行了。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271656636.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/b11c9a69fae5d039253488aa7173c1f757191.jpg) --><p>注册成功后，账号会自动登录，如果没登录的话重新登录一遍刚注册的账号即可。</p><p>接着点击退出登录左边的“箭头”然后点击<strong>付款方式</strong>，接着再点击<strong>添加付款方式</strong>。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271657810.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/82facd1d2825441c3909b73b83c4963262499.jpg) --><p>下一步是填写付款方式&amp;账单地址，这步很关键，需要借助<a href="https://www.meiguodizhi.com/">美国地址生成器</a>，它会自动帮你生成街道地址、城市、邮编、电话号码等信息。</p><p>生成地址前，建议选以下<strong>五个免税州</strong>：</p><ul><li><p>阿拉斯加州（Alaska）</p></li><li><p>特拉华州（Delaware）</p></li><li><p>蒙大拿州（Montana）</p></li><li><p>新罕布什尔州（New Hampshire）</p></li><li><p>俄勒冈州（Oregon）</p></li></ul><p><strong>美国地址生成器</strong><a href="https://www.meiguodizhi.com/">（点这里获取）</a></p><p>下图中标注的<strong>由美国地址生成器生成</strong>的内容，直接复制美国地址生成器中生成的内容即可。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271659120.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/9f3370e79e50e73acfe2f64836b9792e105600.jpg) --><p>接着勾选<strong>拷贝账单寄送地址</strong>，最后点击<strong>更新</strong>就行了。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271700207.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/70a03427b90ce73645f2d8a2c7f8fa7147434.jpg) --><p>到这里我们的美区 Apple ID 就注册完成了！下面教大家如何登录。</p><h2 id="3-登录美区ID">3  登录美区ID</h2><p>打开 App Store，首先退出当前账号。点击右上角的头像，然后拉到末尾，点击<strong>退出登录</strong>即可。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271701687.webp" alt="img"></p><!-- ![img](https://p1.meituan.net/csc/91ccefb66ce01d2cc21653078c13ffed66058.jpg) --><p>接着再次点击 App Store 中右上角的头像，输入前面注册的美区账号&amp;密码，点击<strong>登录</strong>即可。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271701933.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/68cabdc68bd931d4868ce30d3955a3e471298.jpg) --><p>然后会跳出一个弹窗，选择<strong>检查</strong>即可，接着打开<strong>同意条款与条件</strong>，选择<strong>下一页</strong>。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271701278.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/55dc50a6416976dc4af1399ac72c946c74300.jpg) --><p>不要修改任何内容，直接点击<strong>下一页</strong>，然后点击<strong>继续</strong>。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271701747.webp" alt="img"></p><!-- ![img](https://p1.meituan.net/csc/94d03b6c7c28db63f2494dba399c94c859158.jpg) --><p>点击<strong>Continue</strong>，到这里我们的美区 Apple ID 就已经成功登录了。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271701970.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/9227478840b8ec3690063ed3da99918438553.jpg) --><p>注册登录成功后，我们就能下载美区中的各种 App 了。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271701003.webp" alt="img"></p><!-- ![img](https://p1.meituan.net/csc/f8080606175a85f6bc20673474d8b4bb58516.jpg) --><h2 id="4-一些需要注意的地方">4  一些需要注意的地方</h2><p>1.设置密码时，密码中不要包含前面填写的名字、生日、邮箱中的任何信息，否则可能会卡在验证码那一步，总之就是密码尽量原创一个。</p><p>2.不要在「设置」中登录美区Apple ID，以免造成不必要的麻烦。下载美区 App 只需在 App Store 中登录即可，下载完后再换回国区账号即可，对 iCloud 等不会有任何影响。</p><p>3.如果你有在用Apple Music，切换成美区后会导致已下载的歌曲全被清空。</p><p>4.建议不要把美区 Apple ID 当成主力账号，需要下美区应用时登录就行了，以免出现啥问题。</p><h2 id="5-常见问题汇总">5  常见问题汇总</h2><p>➊ 手机号码提示错误怎么解决？</p><p>答：看看复制的号码是不是开头有数字&quot;1&quot;或者&quot;+1&quot;，有的话去掉即可。</p><p>➋ 更新 App 的时候显示账号被锁定，但可以下载未下载过的 App 是什么原因？</p><p>答：因为你更新的这个 App 之前是用其他 Apple ID 下载的，所以这个 App 是和你之前下载时的那个 Apple ID 绑定在一起的，所以出现被锁定的提示是原先账号出了问题，和当前账号没关系。解决方法很简单，把 App 卸载重新安装即可。</p><p>➌ 邮编错误怎么办？</p><p>答：估计是地址生成器网站数据库中的部分邮编有误，多生成几份地址试试即可。</p><p>➍ Your request could not be completed at this time 怎么办？</p><p>答：应该是地址生成器生成的号码有问题，电话是 xxx-xxx-xxx 的正常，而 +1xxx-xxx-xxx 就不行。解决方法就是去掉号码开头的&quot;1&quot;或者&quot;+1&quot;即可。</p><p>➎ Cannot be created at this time 怎么办？</p><p>答：切换成 4G、5G、或者换个浏览器、或者用电脑注册，或者次日再试试。</p><p>➏ 注册成功后，如何二次修改美区 Apple ID 的地址、姓名等信息？</p><p>答：进入<a href="https://www.apple.com/">美国苹果官网</a>，拉到底部找到 manage your apple id，登录后即可修改，不懂英文的同学可借助翻译。</p><p>如果以上回答仍然无法解决你的问题，那建议用百度、必应、知乎等搜索工具去寻找解决方法。</p><h2 id="6-美区Apple-ID礼品卡">6  美区Apple ID礼品卡</h2><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://zhuanlan.zhihu.com/p/367821925">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://jihulab.com/aini/img/-/raw/main/Safari.webp)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">【2024年】五分钟注册美区AppleID，手把手教，稳定且耐用！</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><hr><p>创个美区 Apple ID 还是挺有必要的，可以下到许多国内没有上架的应用，和国区 Apple ID 两者互补，享受最全面的 App 下载体验。</p><p>这个教程，整体是没问题的，一定要完完全全按教程操作</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;这篇文章教大家注册一个非常稳定的美区 Apple ID。&lt;/p&gt;
&lt;p&gt;我通过该方法注册过两个美区账号，还冲了钱，到目前已经使用两年了，没出现任何问题稳的很。&lt;/p&gt;
&lt;p&gt;话不多说，教程开始，只要跟着我的步骤走，百分百能成功。&lt;/p&gt;
&lt;h2 id=&quot;1-准备工作&quot;&gt;1 </summary>
      
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="ios" scheme="https://aizhiqian.github.io/tags/ios/"/>
    
  </entry>
  
  <entry>
    <title>【教程】Shadowrocket详细介绍</title>
    <link href="https://aizhiqian.github.io/posts/9d78f097/"/>
    <id>https://aizhiqian.github.io/posts/9d78f097/</id>
    <published>2024-04-27T07:32:27.000Z</published>
    <updated>2024-04-27T10:23:40.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Shadowrocket快速使用方法：<br>1.首页 - 添加节点。<br>2.设置 - 延迟测试方法，选择CONNECT。<br>3.首页 - 连通性测试，选择可用节点连接。</p><p>首次启动会提示【安装VPN配置文件】<br>请点击【好】和【允许】才能正常使用</p></blockquote><h2 id="1-首页">1  首页</h2><h3 id="1-1-添加节点">1.1 添加节点</h3><ul><li><p>首页 - 右上角➕ - 类型Subscribe - URL栏输入机场订阅链接 - 保存。</p><blockquote><p>订阅链接后面加上#1、#2、#3…，可以重复添加同一个订阅。</p></blockquote></li><li><p>首页 - 右上角➕，选择对应节点类型，填写节点配置信息并保存。</p><blockquote><p>Shadowrocket已支持的类型：Shadowsocks、ShadowsocksR、Subscribe（订阅）、Vmess、VLESS、Relay、Socks5、Socks5 Over TLS、HTTP、HTTPS、HTTP2、Trojan、Hysteria、Hysteria2、TUIC、Juicity、WireGuard、Snell、Brook、Lua。</p></blockquote></li><li><p>复制节点链接，如<code>trojan://xxx</code>、<code>vmess://xxx</code>、<code>vless://xxx</code>等，打开Shadowrocket时会自动识别导入。</p></li><li><p>首页 - 左上角 - 扫码添加。</p></li></ul><h3 id="1-2-添加WireGuard节点">1.2 添加WireGuard节点</h3><p>方法一</p><ul><li>首页 - 右上角➕ - 类型选择WireGuard，填写配置信息。</li></ul><p>方法二</p><ul><li>复制如下格式的WireGuard配置信息，打开Shadowrocket时会自动弹出“添加对话框”，点击添加。</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Interface]</span></span><br><span class="line"><span class="attr">PrivateKey</span> = xxxxxx</span><br><span class="line"><span class="attr">Address</span> = <span class="number">172.16</span>.<span class="number">0.2</span>/<span class="number">32</span></span><br><span class="line"><span class="attr">DNS</span> = <span class="number">1.1</span>.<span class="number">1.1</span></span><br><span class="line"><span class="attr">MTU</span> = <span class="number">1420</span></span><br><span class="line"><span class="section">[Peer]</span></span><br><span class="line"><span class="attr">PublicKey</span> = xxxxxx</span><br><span class="line"><span class="attr">AllowedIPs</span> = <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span></span><br><span class="line"><span class="attr">AllowedIPs</span> = ::/<span class="number">0</span></span><br><span class="line"><span class="attr">Endpoint</span> = engage.cloudflareclient.com:<span class="number">2408</span></span><br><span class="line"><span class="attr">Reserved</span> = <span class="number">12</span>,<span class="number">34</span>,<span class="number">56</span></span><br></pre></td></tr></table></figure><p>如果没有自动弹出对话框，可能是因为设置中的<code>允许检测剪贴板</code>被关闭了，您可以重新打开，或者点击首页<code>连通性测试</code>下方的<code>粘贴</code>按钮，手动添加配置信息。</p><h3 id="1-3-更新订阅节点">1.3 更新订阅节点</h3><ul><li><p>订阅右滑 - 更新。</p></li><li><p>点击首页的更新订阅按钮🔄。</p></li><li><p>设置 - 订阅 - 打开时更新（刷掉后台，重新打开应用程序时会自动更新订阅）。</p></li><li><p>设置 - 订阅 - 自动后台更新（需在系统<code>设置</code>-<code>通用</code>-<code>后台App刷新</code>中开启对Shadowrocket的允许，更新周期为12小时）。</p></li><li><p>Shadowrocket提供了「更新订阅」的快捷指令，可以实现自动化操作。</p></li><li><p>长按屏幕的应用图标 - 更新订阅。</p></li></ul><blockquote><p>添加/更新订阅时异常原因：<br>forbidden 表示订阅被重置或令牌（token）错误。<br>not found 表示路径信息错误。<br>service unavailable 表示域名信息错误或域名被运营商屏蔽。</p></blockquote><h3 id="1-4-节点排序">1.4 节点排序</h3><p>设置 - 订阅 - 根据Ping排序。</p><h3 id="1-5-SSL错误">1.5 SSL错误</h3><p>添加/更新订阅链接时，如果提示<code>发生了SSL错误，无法建立与该服务器的安全连接</code>，可以尝试的解决方法：</p><ul><li><p>全局路由选代理，使用另外一个节点来添加/更新订阅链接。</p></li><li><p>切换网络后再添加/更新订阅链接。</p></li><li><p>检查订阅链接是否错误或失效。</p></li></ul><h3 id="1-6-节点旗帜">1.6 节点旗帜</h3><p>节点优先根据备注名称匹配旗帜，如果匹配不成功，由节点地址解析出IP，通过数据库判断该IP的国家或地区，然后显示对应的旗帜。</p><ul><li><p>节点后面ⓘ - 地址栏的图标，可以手动修改旗帜。</p></li><li><p>订阅后面ⓘ - 订阅链接后面ⓘ，利用脚本也能批量修改旗帜。</p><blockquote><p>如果把旗帜的Emoji放在节点备注开头，保存时会自动显示对应的旗帜。</p></blockquote></li></ul><h3 id="1-7-节点感叹号">1.7 节点感叹号</h3><p>节点显示感叹号原因：</p><p>您的节点使用了TLS，地址是IP，却没有设 SNI。</p><p>这是错误的，为了可以访问，Shadowrocket会主动开启允许不安全。上一版本<code>2.2.23</code>关闭了此功能造成很多人无法使用节点。</p><p><code>允许不安全</code>将跳过TLS证书验证，这将导致一些安全问题。如果您使用自签名证书，请将证书导入系统并信任它，否则请及时续订服务器端证书，以防止证书过期。</p><h3 id="1-8-节点分享与整理">1.8 节点分享与整理</h3><p>节点分享</p><ul><li><p>长按节点 - 拷贝，可以把节点链接分享给其他设备。</p></li><li><p>左滑节点 - 二维码，其他设备可以通过扫码添加节点（二维码页面点击右上角的<code>分享</code>按钮，可以选择其他形式传送二维码）。</p><blockquote><p>节点二维码缺乏统一标准。某些协议（Vmess）的节点，当使用其他代理工具扫码添加时，可能会丢失部分节点信息，导致不能连接。如果遇到此问题，请仔细检查同一个节点的各项配置信息是否一致。</p></blockquote></li><li><p>点击节点后面ⓘ，滑动至页面底部，有多种分享节点的菜单。</p></li><li><p>展开节点列表，点击连通性测试下方的编辑按钮<code>•••</code>，勾选需要分享的节点，点击左上角的<code>复制</code>，可以把多个节点链接同时分享给其他设备。</p></li></ul><p>节点整理</p><ul><li><p><strong>调整顺序</strong>：点击编辑按钮<code>•••</code>，长按订阅后面的<code>≡</code>图标可以调整订阅之间的上下顺序（本地节点默认置顶位置）。</p></li><li><p><strong>节点分类</strong>：非订阅形式添加的节点，默认会归类为<code>本地节点</code>。如果需要重新对本地节点进行分类，可以使用<code>折叠</code>功能。点击编辑按钮<code>•••</code>，勾选节点，点击左上角的<code>折叠</code>，为新分类的节点组命名（<code>折叠</code>功能可以选择本地节点或者订阅节点）。</p></li><li><p><strong>删除节点</strong>：点击编辑按钮<code>•••</code>，点击左上角的<code>删除</code>，可以选择删除全部节点或者删除连通性测试结果中的超时节点。</p></li><li><p><strong>滑动菜单</strong>：向右滑动订阅，可以选择<code>测试</code>当前订阅节点的连通性，或者<code>更新</code>当前订阅节点。向右滑动节点，点击<code>测试</code>可以获取单个节点的连通性测试结果，点击<code>复制</code>，可以在当前节点列表中新增一个同样配置信息的节点。</p></li></ul><h3 id="1-9-订阅节点筛选">1.9 订阅节点筛选</h3><p>首页 - 订阅后面ⓘ - 订阅链接后面ⓘ。</p><ul><li>保留节点名称含有关键词A和B的节点:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?=.*(A))^(?=.*(B))^.*$/</span><br></pre></td></tr></table></figure><ul><li>保留节点名称含有关键词A或B的节点:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A|B</span><br></pre></td></tr></table></figure><ul><li>排除节点名称含有关键词A或B的节点:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^((?!(A|B)).)*$/</span><br></pre></td></tr></table></figure><ul><li>保留节点名称含有关键词A并排除含有关键词B的节点:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?=.*(A).)^((?!(B)).)*$/</span><br></pre></td></tr></table></figure><p>分组、代理分组的正则写法与此相同，但需删除前后<code>/</code>符号。</p><h3 id="1-10-代理通过-代理链">1.10 代理通过/代理链</h3><p>使用代理链方法：</p><ul><li><p><strong>代理通过</strong>：当前代理通过另一个代理转发，支持多级代理。</p></li><li><p>使用节点A连接，点击节点A后面ⓘ，<code>代理通过</code>选择节点B，流量走向：<code>Client</code> - <code>B</code> - <code>A</code> - <code>Web server</code></p></li></ul><h3 id="1-11-全局路由区别">1.11 全局路由区别</h3><ul><li><p><strong>配置</strong>：流量根据规则进行分配，有些需要通过节点连接，有些则不需要。</p></li><li><p><strong>代理</strong>：全部流量都通过同一个节点连接。</p></li><li><p><strong>直连</strong>：全部流量都不通过节点连接。</p></li><li><p><strong>场景</strong>：根据不同的网络连接类型（Wi-Fi、蜂窝数据）自动切换到预先设置的路由模式，并选择对应的配置文件和节点连接。</p></li></ul><h3 id="1-12-连通性测试">1.12 连通性测试</h3><p>点击首页的<code>连通性测试</code>，节点列表将会显示以毫秒（ms）为单位的延迟数字，这是数据包的传输时间，不同的<code>延迟测试方法</code>对应不同的计算结果。长按首页的<code>连通性测试</code>，可以临时调整测试方法，仅对本次测试生效。</p><p>设置 - 延迟测试方法。</p><ul><li><p><strong>TCP</strong>：建立TCP连接的往返时间。</p></li><li><p><strong>ICMP</strong>：发送ICMP回显请求报文和接收ICMP回显应答报文的往返时间。</p></li><li><p><strong>CONNECT</strong>：向测试URL发送一个HTTP HEAD请求，测量从发送请求到接收响应头部信息的往返时间。</p><blockquote><p>请优先选择CONNECT，因为它更能准确反映节点的连通性。</p></blockquote></li></ul><p>延迟大小与网络上传下载速度没有直接关系，测速请使用其他方法，如：<br><a href="https://www.speedtest.net">https://www.speedtest.net</a></p><h3 id="1-13-修改测试地址">1.13 修改测试地址</h3><p>用于首页和分组节点的延迟测试</p><ul><li>首页 - 全局路由 - 分组 - URL测试设置。</li></ul><p>用于代理分组节点的延迟测试</p><ul><li>点击配置文件ⓘ - 代理分组 - 右上角➕ - 最底下URL栏。</li></ul><h3 id="1-14-场景">1.14 场景</h3><p>场景是根据不同的网络连接类型（Wi-Fi、蜂窝数据）自动切换到预先设置的路由模式，并选择对应的配置文件和节点连接。</p><ul><li><p>首页 - 全局路由 - 设置的<code>场景</code> - 添加场景。</p></li><li><p>为指定的网络连接类型设置对应的路由模式（<code>配置</code>、<code>直连</code>、<code>代理</code>），类型（<code>节点</code>、<code>分组</code>），<code>配置文件</code>，<code>备注</code>。</p></li><li><p>网络连接类型分别为：Wi-Fi、蜂窝数据、默认。选择Wi-Fi类型时，SSID需填写Wi-Fi名称。</p></li><li><p>首页 - 全局路由 - 选择<code>场景</code>。</p></li></ul><p>首次添加场景，可能会弹出申请权限的对话框，具体原因请看<code>5.1 定位权限</code>。当没有允许定位权限时，场景列表的☑️标记不会随着网络类型的切换而自动切换，但这不影响场景功能的正常生效。</p><h3 id="1-15-简单模式">1.15 简单模式</h3><p>首页 - 全局路由 - 分组 - 简单模式。</p><p><code>简单模式</code>的功能是自动测试并选择延迟低节点。</p><ul><li>节点的范围是什么？</li></ul><blockquote><p>当开启简单模式，此时下方会出现分组选项，如果没有继续添加分组的操作，节点范围就是首页全部节点，如果添加分组，范围就变成分组里的节点。</p></blockquote><ul><li>自动测试的周期是多久？延迟低的判断依据是什么？</li></ul><blockquote><p><code>首页</code> - <code>全局路由</code> - <code>分组</code> - <code>URL测试设置</code>，这里规定了测试的间隔时间，默认600s，即表示每10分钟自动进行一次节点延迟测试。相邻两次测试结果中最小延迟值的对比，根据公差机制决定是否切换节点，公差越大，触发节点切换的频次越低，默认0ms，即表示只要后面测试结果的最低延迟节点比前面测试结果的最低延迟节点延迟小就会自动切换。</p></blockquote><ul><li>切换的节点给什么规则使用？</li></ul><blockquote><p>Shadowrocket内置策略proxy，简单模式时自动切换的节点使用于所有指向proxy策略的规则。</p></blockquote><ul><li>简单模式是自动切换延迟低节点，代理分组的url-test类型也是自动切换延迟低节点，两者有何不同？</li></ul><blockquote><p>代理分组创建后，需要在规则中修改策略指向，而简单模式已经关联proxy策略，节省了修改规则的步骤。</p><p><code>全局路由</code>选择<code>代理</code>时将导致所有<code>代理分组</code>失效，而简单模式依然能够实现自动切换节点。</p></blockquote><ul><li>添加分组时，<code>测速</code>开关是什么作用？</li></ul><blockquote><p>开启测速，这个分组才允许自动切换节点。不开启测速，这个分组只能手动选择节点。</p></blockquote><h3 id="1-16-启用回退">1.16 启用回退</h3><p>首页 - 全局路由 - 启用回退。</p><p><code>启用回退</code>的功能是当节点连接失败时自动切换其他可用节点。</p><ul><li><p>连接失败3次才会触发回退机制。</p></li><li><p>节点只满足可用性，不要求是最低延迟节点。</p></li><li><p>随机切换，不按照节点顺序选择。</p></li><li><p>策略为proxy，节点切换范围就是首页全部节点，如果开启简单模式并选择分组，则范围缩小至分组内节点。</p></li><li><p>策略为分组/代理分组，节点切换范围就是分组或代理分组内节点。</p></li><li><p>具体切换到哪个节点，请查看<code>3.1 代理日志</code>。</p></li></ul><h2 id="2-配置">2  配置</h2><h3 id="2-1-配置文件">2.1 配置文件</h3><p>Shadowrocket内置了一个配置文件<code>default.conf</code>，其中包含了国内外网站的分流规则，满足大多数用户的基本需求。此配置文件的内容跟随应用更新而做不定期的调整。如果在使用过程中错误修改或误删配置文件，可以点击<code>配置</code> - <code>恢复默认配置</code>。</p><p>添加配置文件方法：</p><ul><li><p>从URL下载配置</p><ul><li>配置 - 右上角➕ - 粘贴配置链接 - 下载 - 点击对应的配置文件 - 使用配置。</li><li>Shadowrocket兼容使用<code>Clash YAML格式</code>的配置文件。</li></ul></li><li><p>从本地存储或云盘导入</p><ul><li>配置 - 从云导入，点击对应存储路径的配置文件。</li></ul></li></ul><p>点击配置文件，显示操作菜单：</p><ul><li>使用配置</li><li>编辑纯文本</li><li>更新配置</li><li>扩展配置</li><li>重新命名</li><li>导出</li></ul><p>点击配置文件的ⓘ图标，进入编辑菜单：</p><ul><li>通用</li><li>规则</li><li>Hosts</li><li>URL重写</li><li>HTTPS解密</li><li>脚本</li><li>代理分组</li><li>脚本URL</li><li>规则集URL</li><li>复制</li><li>替换策略</li><li>测试规则</li></ul><p>配置文件的纯文本编写方法，请参考：</p><ul><li><p><a href="https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/lazy.conf">懒人配置</a></p></li><li><p><a href="https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/lazy_group.conf">懒人配置（含策略组）</a></p></li></ul><h3 id="2-2-扩展配置">2.2 扩展配置</h3><ul><li><p>从配置a扩展出配置b，此时默认关系是b包含a，也可以理解为b继承了a的内容。</p></li><li><p>配置b优先级高于配置a，该功能是对配置建立包含关系，以满足同时使用多个配置的需求。</p></li><li><p>点击配置文件ⓘ - 通用 - 包含配置，可以修改或解除包含关系。</p></li></ul><h3 id="2-3-通用参数">2.3 通用参数</h3><p><strong>旁路系统（bypass-system）</strong>：如果禁用此选项，可能会导致一些系统问题，如推送通知延迟。</p><p><strong>跳过代理（skip-proxy）</strong>：此选项强制域名或IP的连接范围由Shadowrocket TUN接口来处理，而不是Shadowrocket代理服务器。此选项用于解决一些应用程序的一些兼容性问题。</p><p><strong>TUN旁路路由（tun-excluded-routes）</strong>：Shadowrocket TUN接口只能处理TCP协议。使用此选项可以绕过指定的IP范围，让其他协议通过。</p><p><strong>DNS覆写（dns-server）</strong>：使用普通DNS或加密DNS（如doh、doq、dot等）覆盖默认的系统DNS。有些dns over https支持http3，所以尝试查询，如果支持就切换到http3，可在doh链接后面加上<code>#no-h3</code>关闭。doh强制通过h3查询的写法是将<code>https</code>改成<code>h3</code>，如<code>h3://dns.alidns.com/dns-query</code>。</p><p><strong>备用DNS（fallback-dns-server）</strong>：当覆写DNS查询失败或查询时间超过2秒，Shadowrocket会自动回退备用DNS。如需指定多个DNS，可用逗号分隔。system表示回退到系统DNS。</p><p><strong>启用IPv6支持（ipv6）</strong>：false表示不启用，true表示启用。即使不启用此选项，当本地网络环境支持IPv6，并且节点域名支持IPv6解析，Shadowrocket也会使用节点的IPv6地址进行访问。解决方法是关闭节点域名的IPv6解析，或者在配置文件的<code>[Host]</code>项目下为节点域名指定IP地址。</p><p><strong>首选IPv6（prefer-ipv6）</strong>：优先向IPv6的DNS服务器查询AAAA记录，优先使用AAAA记录。false表示不启用。</p><p>💡 <strong>dns-direct-system</strong>：直连的域名类规则使用系统dns进行查询。false表示不启用。</p><p>💡 <strong>icmp-auto-reply</strong>：ping数据包自动回复。</p><p>💡 <strong>always-reject-url-rewrite</strong>：不开启时，「重写的REJECT策略」默认只有在配置模式下生效。开启后，可以令该策略在其他全局路由模式下都生效。</p><p><strong>私有IP应答（private-ip-answer）</strong>：如果不启用该选项，域名解析返回私有IP，Shadowrocket会认为该域名被劫持而强制使用代理。</p><p>💡 <strong>dns-direct-fallback-proxy</strong>：直连域名解析失败后使用代理。false表示不启用。</p><p><strong>TUN包含路由（tun-included-routes）</strong>：默认情况下，Shadowrocket接口会声明自己为默认路由，但由于Wi-Fi接口的路由较小，有些流量可能不会通过Shadowrocket接口。使用此选项可以添加一个较小的路由表。</p><p><strong>总是真实IP（always-real-ip）</strong>：这个选项要求Shadowrocket在TUN处理DNS请求时返回一个真实的IP地址而不是假的IP地址。</p><p><strong>DNS劫持（hijack-dns）</strong>：有些设备或软件总是使用硬编码的DNS服务器，例如Netflix通过Google DNS(<code>8.8.8.8</code>或<code>8.8.4.4</code>)发送请求，您可以使用此选项来劫持查询。</p><p>💡 <strong>udp-policy-not-supported-behaviour</strong>：当UDP流量匹配到规则里不支持UDP转发的节点策略时重新选择回退行为，可选行为包括DIRECT、REJECT。DIRECT表示直连转发UDP流量，REJECT表示拒绝转发UDP流量。</p><p><strong>包含配置（include）</strong>：表示当前配置包含另一个配置的内容，当前配置的优先级高于被包含配置。该选项是对配置建立包含关系，以满足同时使用多个配置的需求。</p><blockquote><p>带💡符号的参数只能通过配置文件的纯文本模式进行设置，没有UI操作选项。</p></blockquote><h3 id="2-4-添加规则">2.4 添加规则</h3><ul><li><p>点击配置文件ⓘ - 规则 - 右上角➕，根据需求选择<code>规则类型</code>和<code>规则策略</code>，填写规则内容。</p></li><li><p>数据 - 代理 - 启用日志记录，产生网络活动后回到该页面，从最近的日志中查看网络活动记录，点击任一记录查看详情，点击右上角<code>•••</code>选择类型添加规则。</p></li><li><p>规则匹配的优先级：</p><ul><li>上面规则优先于下面规则。</li><li>域名规则优先于IP规则。</li></ul></li></ul><h3 id="2-5-规则类型">2.5 规则类型</h3><p><strong>DOMAIN-SUFFIX</strong>：匹配请求域名的后缀。</p><p>如<code>DOMAIN-SUFFIX,example.com,DIRECT</code>可以匹配到<code>a.example.com</code>、<code>a.b.example.com</code>。</p><p><strong>DOMAIN-KEYWORD</strong>：匹配请求域名的关键词。</p><p>如<code>DOMAIN-KEYWORD,exa,DIRECT</code>可以匹配到<code>a.example.com</code>、<code>a.b.example.com</code>。</p><p><strong>DOMAIN</strong>：匹配请求的完整域名。</p><p>如<code>DOMAIN,www.example.com,DIRECT</code>只能匹配到<code>www.example.com</code>。</p><p><strong>USER-AGENT</strong>：匹配用户代理字符串，支持使用通配符<code>*</code>。</p><p>如<code>USER-AGENT,MicroMessenger*,DIRECT</code>可以匹配到<code>MicroMessenger Client</code>。</p><p><strong>URL-REGEX</strong>：匹配URL正则式。</p><p>如<code>URL-REGEX,^https?://.+/item.+,REJECT</code>可以匹配到<code>https://www.example.com/item/abc/123</code>。</p><p><strong>IP-CIDR</strong>：匹配IPv4或IPv6地址。</p><p>如<code>IP-CIDR,192.168.1.0/24,DIRECT</code>可以匹配到IP段<code>192.168.1.1～192.168.1.254</code>。当域名请求遇到IP类规则时，Shadowrocket会向本地DNS服务器发送查询请求，以判断主机IP是否匹配规则。若IP类规则加<code>no-resolve</code>(如：<code>IP-CIDR,172.16.0.0/12,DIRECT,no-resolve</code>)，则域名请求将会跳过此规则，不会触发本地DNS查询。</p><p><strong>IP-ASN</strong>：匹配IP地址隶属的ASN编号。</p><p>如<code>IP-ASN,56040,DIRECT</code>可以匹配到属于China Mobile Communications Corporation网络的IP地址。</p><p><strong>RULE-SET</strong>：匹配规则集内容。规则集的组成部分需包含规则类型。</p><p><strong>DOMAIN-SET</strong>：匹配域名集内容。域名集的组成部分不包含规则类型。</p><p><strong>SCRIPT</strong>：匹配脚本名称。</p><p><strong>DST-PORT</strong>：匹配目标主机名的端口号。</p><p>如<code>DST-PORT,443,DIRECT</code>可以匹配到443目标端口。</p><p><strong>GEOIP</strong>：匹配IP数据库。</p><p>如<code>GEOIP,CN,DIRECT</code>可以匹配到归属地为CN的IP地址。</p><p><strong>FINAL</strong>：兜底策略。</p><p>如<code>FINAL,PROXY</code>表示当其他所有规则都匹配不到时才使用FINAL规则的策略。</p><p><strong>AND</strong>：逻辑规则，与规则。</p><p>如<code>AND,((DOMAIN,www.example.com),(DST-PORT,123)),DIRECT</code>可以匹配到<code>www.example.com:123</code>。</p><p><strong>NOT</strong>：逻辑规则，非规则。</p><p>如<code>NOT,((DST-PORT,123)),DIRECT</code>可以匹配到除了<code>123</code>端口的其他所有请求。</p><p><strong>OR</strong>：逻辑规则，或规则。</p><p>如<code>OR,((DST-PORT,123),(DST-PORT,456)),DIRECT</code>可以匹配到<code>123</code>或<code>456</code>端口的所有请求。</p><p><strong>PROTOCOL</strong>：匹配传输协议类型。</p><p><code>PROTOCOL</code>类型不支持单独使用，只能作为子规则类型嵌套于逻辑规则当中。如<code>AND,((PROTOCOL,UDP),(DST-PORT,443)),REJECT-NO-DROP</code>。</p><h3 id="2-6-规则策略">2.6 规则策略</h3><p><strong>PROXY</strong>：代理。通过代理服务器转发流量。</p><p><strong>DIRECT</strong>：直连。连接不经过任何代理服务器。</p><p><strong>REJECT</strong>：拒绝。返回HTTP状态码404，没有内容。</p><p><strong>REJECT-DICT</strong>：拒绝。返回HTTP状态码200，内容为空的JSON对象。</p><p><strong>REJECT-ARRAY</strong>：拒绝。返回HTTP状态码200，内容为空的JSON数组。</p><p><strong>REJECT-200</strong>：拒绝。返回HTTP状态码200，没有内容。</p><p><strong>REJECT-IMG</strong>：拒绝。返回HTTP状态码200，内容为1像素GIF。</p><p><strong>REJECT-TINYGIF</strong>：拒绝。返回HTTP状态码200，内容为1像素GIF。</p><p><strong>REJECT-DROP</strong>：拒绝。丢弃IP包。</p><p><strong>REJECT-NO-DROP</strong>：拒绝。返回ICMP端口不可达。</p><p>除此之外，规则策略还可以选择<code>代理分组</code>、<code>订阅名称</code>、<code>分组</code>、<code>服务器节点</code>。</p><h3 id="2-7-app分流">2.7 app分流</h3><p>根据不同app指定分流规则的方法。</p><p>示例：YouTube app 分流走代理。</p><ul><li>复制YouTube的规则集链接</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list</span><br></pre></td></tr></table></figure><ul><li>点击配置文件ⓘ - 规则 - 右上角➕，类型选择<code>RULE-SET</code>，策略选择<code>PROXY</code>，输入框内粘贴“规则集链接”，保存完成（策略可以根据需求使用其他选项）。</li></ul><p>iOS系统没有常规分应用代理的操作，只能通过<code>域名</code> / <code>ip</code> / <code>ua</code>规则实现app分流效果。可自行抓包，或者订阅<a href="https://github.com/blackmatrix7">blackmatrix7</a>的<a href="https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Shadowrocket">规则集</a>。如果引用的链接是域名集，添加规则时，类型请选择<code>DOMAIN-SET</code>。</p><h3 id="2-8-更新规则集">2.8 更新规则集</h3><p>点击配置文件 - 使用配置。</p><h3 id="2-9-修改DNS">2.9 修改DNS</h3><ul><li><p>点击配置文件ⓘ - 通用 - DNS覆写，删除<code>system</code>，添加 <code>223.5.5.5,119.29.29.29</code>。也可以使用加密DNS，如<code>DNS-over-TLS</code>、<code>DNS-over-HTTPS</code>、<code>DNS-over-QUIC</code>。</p></li><li><p><strong>备用DNS</strong>：当覆写的DNS查询失败后回退备用DNS进行查询。如需指定多个DNS，可用逗号分隔。<code>system</code>表示回退到系统DNS。</p></li></ul><h3 id="2-10-no-resolve的作用">2.10 no-resolve的作用</h3><ul><li><p>当域名请求遇到IP类规则时，Shadowrocket会向本地DNS服务器发送查询请求，以判断主机IP是否匹配规则。</p></li><li><p>若IP类规则加<code>no-resolve</code>，则域名请求将会跳过此规则，不触发本地DNS查询。如：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP-CIDR,172.16.0.0/12,DIRECT,no-resolve</span><br></pre></td></tr></table></figure><h3 id="2-11-代理分组-策略组">2.11 代理分组/策略组</h3><ul><li><p>点击配置文件ⓘ - 代理分组 - 右上角➕。填写名称，根据需求选择类型，通过<code>正则</code>匹配策略，或者从策略输入框后面的<code>•••</code>手动添加策略，保存。</p></li><li><p>策略是规则的组成部分，创建的代理分组只有放到规则里才能发挥作用。<br>进入对应规则的详情页，点击策略选项，从列表中选择代理分组，保存。</p></li><li><p>首页下拉，可以快捷进入代理分组界面。</p></li></ul><h3 id="2-12-代理分组类型">2.12 代理分组类型</h3><ul><li><p><strong>select</strong>：手动切换节点。</p></li><li><p><strong>url-test</strong>：自动切换延迟最低节点。</p></li><li><p><strong>fallback</strong>：节点挂掉时自动切换其他可用节点。</p></li><li><p><strong>load-balance</strong>：不同规则的请求使用分组里的不同节点进行连接，相同的域名会使用同一个节点。</p></li><li><p><strong>random</strong>：随机使用分组里的不同节点进行连接。</p></li></ul><h3 id="2-13-自动切换节点">2.13 自动切换节点</h3><p>自动切换延迟低的节点：</p><p>方法一</p><ul><li>首页 - 全局路由 - 分组 - 简单模式 - 打开。</li></ul><p>方法二</p><ul><li>点击配置文件ⓘ - 代理分组 - 右上角➕ - 类型<code>url-test</code>。</li></ul><h3 id="2-14-HTTPS解密">2.14 HTTPS解密</h3><p>打开HTTPS解密方法：</p><ul><li><p>点击配置文件ⓘ - HTTPS解密 - 证书 - 生成新的CA证书 - 安装证书。</p></li><li><p>系统设置 - 已下载描述文件 - 安装。</p></li><li><p>系统设置 - 通用 - 关于本机 - 证书信任设置 - 开启对应Shadowrocket证书信任。</p></li></ul><h3 id="2-15-负载均衡">2.15 负载均衡</h3><p>使用负载均衡策略类型方法：</p><p>点击配置文件ⓘ - 代理分组 - 右上角➕，类型选择<code>load-balance</code>。</p><p>「load-balance」表示不同规则的请求使用分组里的不同节点进行连接，相同的域名会使用同一个节点。</p><h3 id="2-16-模块">2.16 模块</h3><p>添加模块方法:</p><p>本地新建模块</p><ul><li>模块跟配置的语法相同。您可以在模块里调整通用设置以及添加规则、Hosts、重写、脚本、证书内容、解密主机名。</li></ul><p>下载远程模块</p><ul><li>模块 - 右上角➕ - 填写模块链接 - 下载。</li><li>模块 <code>[MITM]</code> 部分写法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname = %APPEND% 主机名</span><br></pre></td></tr></table></figure><ul><li>加 <code>%APPEND%</code> 表示把内容插入到配置中，不加时会覆盖配置中对应内容，并影响其他模块功能。</li></ul><p>请对正在使用的配置开启HTTPS解密，模块才能完整生效。</p><h3 id="2-17-证书模块">2.17 证书模块</h3><p>切换配置文件时免除重复安装CA证书方法：</p><ul><li><p>点击「已安装证书的配置文件」后面ⓘ - HTTPS解密 - 证书后面ⓘ - 复制。</p></li><li><p>新建模块：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!name=证书（名字可更改）</span><br><span class="line">[MITM]</span><br><span class="line">enable=true</span><br><span class="line">ca-passphrase=证书密码（即「已安装证书的配置文件」的证书密码，默认密码是Shadowrocket）</span><br><span class="line">ca-p12=证书内容（即剪贴板复制的内容）</span><br></pre></td></tr></table></figure><p>原本是可以省略<code>ca-passphrase</code>这行参数。但由于引用的配置文件可能已经包含了证书密码，且证书密码可能不是<code>Shadowrocket</code>，为防止出错，因此才增加<code>ca-passphrase</code>参数来覆盖引用的配置文件的证书密码。</p><h3 id="2-18-模块消失">2.18 模块消失</h3><p>模块页面已经开启<code>保存到iCloud</code>，如果出现模块消失的问题，请检查：</p><ul><li><p>系统设置 - Apple ID - iCloud - 使用iCloud的APP中，确保Shadowrocket/iCloud云盘已经打开同步。</p></li><li><p>文件app - iCloud云盘 - Shadowrocket，确定其中包含<code>Modules</code>和<code>Script</code>两个子文件夹。</p></li><li><p>文件app - iCloud云盘 - Shadowrocket - Modules，如果iCloud的本地缓存被清理，此时模块文件是未下载状态，请等待自动下载或手动下载。</p></li></ul><h3 id="2-19-身份证书密码">2.19 身份证书密码</h3><p>Shadowrocket安装CA证书时，如果遇到「输入证书<code>身份证书</code>的密码」页面，可以尝试输入：<code>Shadowrocket</code></p><h3 id="2-20-微信转圈">2.20 微信转圈</h3><p>如果使用Shadowrocket时微信一直显示<code>连接中/收取中</code>，可以尝试的解决方法：</p><ul><li><p>微信分流走直连。</p></li><li><p>点击配置文件ⓘ - 通用 - 启用IPv6 - 关闭。</p></li></ul><h2 id="3-数据">3  数据</h2><h3 id="3-1-代理日志">3.1 代理日志</h3><p><code>代理日志</code>记录了网络活动过程中Shadowrocket处理请求的具体信息。</p><ul><li><p>数据 - 代理 - 启用日志记录。</p></li><li><p>产生网络活动时，返回<code>数据</code> - <code>代理</code>页面查看日志文件。</p></li><li><p>每条记录包含信息：</p><ul><li>请求URL</li><li>请求匹配的规则策略</li><li>请求传输协议</li><li>请求发送时间</li></ul></li><li><p>记录显示<code>MITM</code>，表示请求域名已启用解密。</p></li><li><p>点击每条记录查看详情，详情页右上角<code>•••</code>可以选择类型添加规则。</p></li><li><p><code>数据</code> - <code>代理</code>页面，右上角<code>•••</code>可以手动删除所有日志文件。日志文件页面，右上角<code>•••</code>可以选择导出。</p><blockquote><p>数据 - 自动删除 - 打开，程序会自动删除7天前的日志文件。Shadowrocket已连接状态，手动删除将保留最新的日志文件，未连接时，手动删除所有。</p></blockquote></li></ul><h3 id="3-2-DNS日志">3.2 DNS日志</h3><p><code>DNS日志</code>记录了网络活动过程中DNS服务器处理域名查询请求的具体信息。</p><ul><li><p>数据 - 代理 - DNS - 启用日志记录。</p></li><li><p>产生网络活动时，返回<code>数据</code> - <code>DNS</code>页面查看日志文件。</p></li><li><p>每条记录包含信息：</p><ul><li>请求域名</li><li>查询结果</li><li>DNS响应时间</li><li>处理请求的DNS</li></ul></li><li><p>旗帜是根据返回IP地址的地理位置信息自动显示。</p></li><li><p><code>覆写DNS</code>不可用或未返回有效响应时，回退<code>备用DNS</code>来查询域名。</p><blockquote><p>记录信息中如果响应时间超过2秒，意味着系统正在触发回退机制。</p></blockquote></li></ul><h3 id="3-3-iCloud自动同步">3.3 iCloud自动同步</h3><p>Shadowrocket支持将服务器节点、配置文件、模块和脚本文件等数据类型自动同步至iCloud云端。</p><ul><li><p>数据 - iCloud - 自动同步 - 打开。</p></li><li><p>设备<code>设置</code> - <code>账号</code> - <code>iCloud</code>，确保使用iCloud的APP列表中已经开启<code>Shadowrocket</code>和<code>iCloud云盘</code>项目，否则会出现<code>iCloud自动同步失败</code>的提示。</p></li><li><p>同步成功时，点击<code>iCloud文件</code>可以看到存储云端的配置文件。</p></li><li><p><code>文件app</code> - <code>iCloud云盘</code> - <code>Shadowrocket</code>，可以看到存储云端的所有数据。其中的<code>shadowrocket.v2.model</code>文件包含服务器节点的配置信息。</p></li><li><p>iCloud服务中断、网络连接问题以及其他复杂原因可能导致iCloud同步异常，这种情况建议选择手动删除iCloud备份并重新同步数据。</p><blockquote><p>如果用户删除首页某个节点后发现它又自动恢复，可以尝试以下解决方法：数据 - iCloud，服务器节点下面点击删除iCloud备份和同步服务器节点。</p></blockquote></li><li><p>添加的<code>场景</code>和<code>分组</code>不属于iCloud自动同步的数据类型，需要手动备份下载，才能在设备间共享数据。</p></li></ul><h3 id="3-4-节点数据管理">3.4 节点数据管理</h3><ul><li><p><strong>导出节点</strong>：将首页的所有节点数据整合成一个JSON文件，选择存储在本地或云端，也可以通过其他共享方式传输文件。</p></li><li><p><strong>导入节点</strong>：将存储在本地或云端JSON文件中的节点数据解析并添加到首页。</p></li><li><p><strong>删除本地节点</strong>：一键删除首页所有节点数据。</p></li></ul><h3 id="3-5-流量统计信息">3.5 流量统计信息</h3><p><code>统计</code>是Shadowrocket开启连接后接管设备所有网络传输的流量统计信息。</p><ul><li><p>数据 - 统计。</p></li><li><p>统计包含信息：</p><ul><li>开始时间</li><li>连接时间</li><li>Wi-Fi和蜂窝数据的上下行流量</li><li>流量分流的柱形图统计</li></ul></li><li><p>默认记录所有流量统计信息。打开<code>启用存档</code>将会单独记录每一次连接的流量统计信息，关闭首页连接后可以从<code>归档</code>查看。</p></li><li><p>点击右上角<code>•••</code>可以重置统计信息。</p></li></ul><p>首页<code>订阅</code>支持显示流量统计信息。方法是在订阅链接指向的纯文本base64编码前添加<code>STATUS=xxx</code>或<code>REMARKS=xxx</code>字段，这样订阅名称下方就能显示自定义信息。如果没有添加字段或者隐藏用户代理字符串，可能导致不返回相关统计信息，只显示时间。</p><h2 id="4-设置">4  设置</h2><h3 id="4-1-延迟测试方法">4.1 延迟测试方法</h3><p>详见词条<code>1.12 连通性测试</code></p><h3 id="4-2-小组件">4.2 小组件</h3><ul><li><p>设置 - 小组件。</p></li><li><p><strong>服务器节点</strong>：根据需求添加6个常用节点，点击Today小组件右上角的<code>&gt;</code>可以展开查看，方便手动切换节点。</p></li><li><p><strong>显示Ping值</strong>：启用后，长按Today小组件中心位置可以测试<code>服务器节点</code>连通性并显示延迟数字。</p></li><li><p><strong>根据Ping排序</strong>：启用后，长按Today小组件中心位置可以测试<code>服务器节点</code>连通性并依延迟大小自动排序。</p></li></ul><p>添加小组件方法：</p><p>Today小组件</p><ul><li>负一屏 - 编辑 - 自定 - 点击Shadowrocket旁边的“添加”按钮 ➕。</li></ul><p>屏幕小组件</p><ul><li>长按屏幕 - 左上角➕ - Shadowrocket，选择合适类型添加。（系统要求≥ iOS 17）</li></ul><p>更新Shadowrocket后，如果找不到小组件添加按钮，请尝试重启手机。如果小组件显示“无法加载”，请尝试以下方法：</p><ul><li>系统设置 - 通用 - 语言与地区，添加或删除一种其他语言。</li></ul><h3 id="4-3-按需求连接">4.3 按需求连接</h3><p><strong>始终开启</strong></p><ul><li><p>VPN保持连接状态。意外断开或者重启设备，也会自动连接。</p></li><li><p>通过应用<code>首页</code>临时关闭连接。设备设置中的VPN状态以及小组件开关不能直接关闭。</p></li><li><p><code>脚本</code>/<code>模块</code>/<code>解密</code>等需求比较多时建议开启。</p></li></ul><p><strong>按需求连接</strong></p><ul><li><p>根据添加的<code>按需求规则</code>自动切换VPN状态。默认规则是任意网络类型下保持连接状态，相当于<code>始终开启</code>。</p></li><li><p>按需求规则：</p><ul><li>当访问列表中的<code>域名</code>时，系统会向Shadowrocket发送请求，如果响应成功，VPN自动连接。</li><li>网络中指定的<code>DNS</code>（通常认为是网络运营商/Wi-Fi路由器提供的DNS服务器地址）与列表任一内容相匹配时，VPN自动连接或断开。</li><li><code>SSIDS</code>填写需要匹配的Wi-Fi名称。</li><li>VPN连接行为可以通过<code>网络类型</code>/<code>域名</code>/<code>DNS</code>条件触发。</li><li>VPN断开行为不能通过<code>域名</code>条件触发。</li><li>从上到下依次匹配添加的<code>按需求规则</code>。</li></ul></li></ul><ul><li>添加<code>按需求规则</code>后，打开<code>按需求连接</code>开关，规则才能生效。</li></ul><ul><li>同时打开<code>始终开启</code>和<code>按需求连接</code>，只有<code>始终开启</code>选项能够生效。</li></ul><p><strong>睡眠时断开</strong></p><ul><li><p>当设备进入睡眠状态，VPN自动断开连接。</p></li><li><p>Shadowrocket响应系统发送的睡眠指令才会断开连接，有时候熄屏的系统未必处于睡眠状态。</p></li></ul><p><strong>显示断开信息</strong></p><ul><li>显示VPN断开连接的通知信息。</li></ul><h3 id="4-4-VPN自动断开">4.4 VPN自动断开</h3><p>系统版本低于<code>iOS 15</code>、处理复杂请求、加解密数据、运行脚本等因素相互作用之下可能导致NE内存占用过高，从而造成VPN自动断开，解决方法：</p><p><code>设置</code> - <code>按需求连接</code> - 打开 <code>始终开启</code>。</p><h3 id="4-5-前置代理">4.5 前置代理</h3><p>设置 - 代理 - 前置代理。</p><p>「前置代理」表示所有流量先通过HTTP/SOCKS5代理转发，再根据配置规则向节点服务器发送请求。</p><h3 id="4-6-代理共享">4.6 代理共享</h3><p>局域网条件下</p><ul><li><p>A设备：设置 - 代理 - 代理共享 - 启用共享。</p></li><li><p>B设备：系统设置 - WiFi - WiFi名称后面ⓘ - HTTP代理 - 手动输入Shadowrocket「代理共享」的IP和端口。</p></li></ul><p>使用热点条件下</p><ul><li><p>A设备：开启热点。</p></li><li><p>B设备：连接热点。</p></li><li><p>然后按照局域网条件下方法进行设置。</p></li></ul><h3 id="4-7-检测代理">4.7 检测代理</h3><p>如果在使用 Shadowrocket 的时候，遇到某些 APP 提示需关闭代理才能使用，可以在 <code>Shadowrocket</code> - <code>设置</code> - <code>代理类型</code> - 选择 <code>None</code>。</p><h3 id="4-8-代理类型">4.8 代理类型</h3><p>Shadowrocket代理类型：</p><ul><li><p>设置 - 代理 - 代理类型。</p></li><li><p><strong>HTTP</strong>：系统代理模式，对于不支持的程序会交给tun接管网络连接。</p></li><li><p><strong>None</strong>：tun模式，全部网络请求都将通过tun接口进行处理。</p></li></ul><h3 id="4-9-开启UDP转发">4.9 开启UDP转发</h3><ul><li><p>设置 - UDP - 开启转发- 打开。</p></li><li><p>首页 - 订阅后面ⓘ - UDP转发 - 打开。</p></li><li><p>首页 - 节点后面ⓘ - UDP转发 - 打开。</p></li></ul><h3 id="4-10-隐藏VPN图标">4.10 隐藏VPN图标</h3><p>设置 - 排除路由0.0.0.0/31 - 打开。</p><h3 id="4-11-GEOIP数据库">4.11 GEOIP数据库</h3><p>设置 - GeoLite2数据库。</p><p>方法一</p><ul><li>填写<a href="https://www.maxmind.com">MaxMind官网</a>注册的账户ID和密钥，点击下方的<code>更新</code>按钮。</li></ul><p>方法二</p><ul><li>关注GitHub的IP数据库项目，复制mmdb格式的下载链接，粘贴在国家/ASN对应的URL位置，点击<code>更新</code>按钮。当点击<code>重置</code>时，可以恢复为系统自带的数据库。</li></ul><p><a href="https://github.com/Loyalsoldier/geoip">Loyalsoldier</a>的IP数据库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb</span><br></pre></td></tr></table></figure><p><a href="https://github.com/Hackl0us/GeoIP2-CN">Hackl0us</a>的IP数据库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb</span><br></pre></td></tr></table></figure><p><a href="https://github.com/Masaiki/GeoIP2-CN">Masaiki</a>的IP数据库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb</span><br></pre></td></tr></table></figure><p><a href="https://github.com/P3TERX/GeoLite.mmdb">P3TERX</a>的ASN数据库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/P3TERX/GeoLite.mmdb/raw/download/GeoLite2-ASN.mmdb</span><br></pre></td></tr></table></figure><h2 id="5-其他">5  其他</h2><h3 id="5-1-定位权限">5.1 定位权限</h3><ul><li><p>iOS系统的要求，开启定位权限才能获取Wi-Fi名称。</p></li><li><p>如果不需要在Shadowrocket里看到Wi-Fi信息，那么就可以不用开启。</p></li></ul><h3 id="5-2-编译原因">5.2 编译原因</h3><p>Shadowrocket2.2.29之前的版本是使用Xcode 13.2.1编译的。</p><p>2023年4月份以后，苹果官方要求开发者在提交应用到App Store时必须至少使用Xcode 14编译，所以iOS12以下系统无法使用。</p><p>Shadowrocket下一个版本<code>2.2.30</code>将设置最低安装要求iOS12，然后停止<code>2.2.29</code>版本，iOS低版本用户就可以方便安装<code>2.2.28</code>版本。</p><h3 id="5-3-下载Shadowrocket">5.3 下载Shadowrocket</h3><p>Shadowrocket只有iOS/iPadOS/tvOS版本和M系列芯片的Mac才能下载，开发者是<code>Shadow Launch Technology Limited</code>。<strong>Shadowrocket没有安卓/Windows版本！</strong></p><p>下载方法：</p><ul><li><p>非国区ID登陆App Store，搜索<code>Shadowrocket</code>，购买后下载。</p></li><li><p>Shadowrocket是买断制的付费软件。</p></li><li><p>美区价格：2.99美元。</p></li><li><p>使用美区ID时，地址建议填免税州。</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">五个免税州：</span><br><span class="line">俄勒冈州（Oregon）</span><br><span class="line">蒙大拿州（Montana）</span><br><span class="line">特拉华州（Delaware）</span><br><span class="line">新罕布什尔州（New Hampshire）</span><br><span class="line">阿拉斯加州（Alaska）部分区域</span><br></pre></td></tr></table></figure><h2 id="6-参考链接">6  参考链接</h2><p><a href="https://www.meiguodizhi.com">美国地址生成器</a></p><a href="/posts/cb3d58ea/" title="【教程】五分钟注册美区AppleID，手把手教，稳定且耐用！">美区Apple ID注册方法</a><p><a href="https://blog.skylershu.com/post/apple-gift-card">Apple官网购买礼品卡方法</a></p><p><a href="https://youtu.be/W3chc223K-w">支付宝购买美区礼品卡教程</a></p><p><a href="https://apps.apple.com/us/app/shadowrocket/id932747118?l=zh">美区Shadowrocket下载链接</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Shadowrocket快速使用方法：&lt;br&gt;
1.首页 - 添加节点。&lt;br&gt;
2.设置 - 延迟测试方法，选择CONNECT。&lt;br&gt;
3.首页 - 连通性测试，选择可用节点连接。&lt;/p&gt;
&lt;p&gt;首次启动会提示【安装VPN配置文件】&lt;br&gt;
请</summary>
      
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="代理" scheme="https://aizhiqian.github.io/tags/%E4%BB%A3%E7%90%86/"/>
    
    <category term="iOS" scheme="https://aizhiqian.github.io/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>【资源】影视网址合集</title>
    <link href="https://aizhiqian.github.io/posts/f51fdc33/"/>
    <id>https://aizhiqian.github.io/posts/f51fdc33/</id>
    <published>2024-04-09T09:22:24.000Z</published>
    <updated>2024-04-09T09:22:24.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>欢迎大家评论投稿！</p></blockquote><h2 id="1-免翻">1  免翻</h2><p>Free OK：<a href="https://www.freeok.vip/">https://www.freeok.vip</a></p><p>茶杯狐：<a href="https://cupfox.love/">https://cupfox.love</a></p><p>555 电影：<a href="https://555dy.org/">https://555dy.org</a>😍😍</p><p>libvio：<a href="https://www.libfabu.com/">https://www.libfabu.com</a></p><p>美剧网：<a href="https://mjw21.com/">https://mjw21.com</a></p><p>热播库：<a href="https://www.reboku.com/">https://www.reboku.com</a></p><p>影视网：<a href="https://yingshi.cc/">https://yingshi.cc</a>😍😍</p><p>App影院：<a href="https://appmovie.vip">https://appmovie.vip</a></p><p>旋风：<a href="https://miao101.com/">https://miao101.com</a></p><p>楚门：<a href="https://www.chumenys.com/">https://www.chumenys.com</a>😍😍</p><p>看B站：<a href="https://kanb.tv/">https://kanb.tv</a>😍😍</p><p>金曼：<a href="https://jinman.tv/">https://jinman.tv</a>😍😍</p><p>40：<a href="https://40tl.com/">https://40tl.com</a></p><p>蜥蜴： <a href="https://xi1.net/">https://xi1.net</a>😍😍</p><p>人人：<a href="https://kuaizi.cc/">https://kuaizi.cc</a></p><p>电影先生：<a href="https://dyxs30.com">https://dyxs30.com</a></p><h2 id="2-翻">2  翻</h2><p>大米星球：<a href="https://damiq.online/">https://damiq.online</a>😍😍</p><p>Gimy TV：<a href="https://gimy.is/">https://gimy.is</a>😍😍</p><p>欧乐：<a href="https://olevod4.com/">https://olevod4.com</a></p><p>爱迪：<a href="https://adys.tv/">https://adys.tv</a></p><p>蛋蛋：<a href="https://dandanzan.net/">https://dandanzan.net</a></p><p>泥视频：<a href="https://www.nivod8.tv/">https://www.nivod8.tv</a>😍😍</p><p>追剧啦：<a href="https://www.zhuiju.la/">https://www.zhuiju.la</a>😍😍</p><p>天天视频：<a href="https://tiantian.pro/">https://tiantian.pro</a>😍😍</p><p>欧乐：<a href="https://www.olevod.com/">https://www.olevod.com</a>😍😍</p><p>多瑙：<a href="https://www.dnvods.com/">https://www.dnvods.com</a>😍😍</p><p>爱壹帆：<a href="https://www.iyf.tv/">https://www.iyf.tv</a>😍😍</p><p>独播库：<a href="https://www.duboku.tv/">https://www.duboku.tv</a></p><p>七喜：<a href="https://www.7xi.tv/">https://www.7xi.tv</a>😍😍</p>]]></content>
    
    
    <summary type="html">个人收藏整理的影视网站</summary>
    
    
    
    <category term="休闲娱乐" scheme="https://aizhiqian.github.io/categories/%E4%BC%91%E9%97%B2%E5%A8%B1%E4%B9%90/"/>
    
    
    <category term="影视" scheme="https://aizhiqian.github.io/tags/%E5%BD%B1%E8%A7%86/"/>
    
  </entry>
  
  <entry>
    <title>【教程】使用Unsplash API生成随机图片</title>
    <link href="https://aizhiqian.github.io/posts/3238f337/"/>
    <id>https://aizhiqian.github.io/posts/3238f337/</id>
    <published>2024-01-01T13:55:10.000Z</published>
    <updated>2024-04-27T10:12:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Unsplash</h1><p>如果你想使用免费版权的图片时，无论你是否用于商业用途，<a href="https://unsplash.com/">Unsplash</a> 是不错的选择。</p><p>虽然他们为开发人员提供了很棒的 API，但他们也提供了通过 URL 访问随机图片的选项。</p><h2 id="1-默认随机">1  默认随机</h2><p>请看这个例子，从他们巨大的存储中生成随机的图片。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://source.unsplash.com/random</span><br></pre></td></tr></table></figure><h2 id="2-指定用户">2  指定用户</h2><p>我们还可以从特定用户账号中生成随机图像。URL 格式是这样的:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://source.unsplash.com/user/&#123;USERNAME&#125;</span><br></pre></td></tr></table></figure><p>你可以尝试单击下面的链接，从我的账号中随机生成图片：</p><p><a href="https://source.unsplash.com/user/halohh/likes">https://source.unsplash.com/user/halohh/likes</a></p><h2 id="3-指定尺寸">3  指定尺寸</h2><p>还有一个选项可以设置要生成的图像的大小。像这样:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://source.unsplash.com/random/&#123;WIDTH&#125;x&#123;HEIGHT&#125;</span><br></pre></td></tr></table></figure><p>让我们生成下 300 x 300 大小的图片：</p><p><a href="https://source.unsplash.com/random/300x300">https://source.unsplash.com/random/300x300</a></p><h2 id="4-依据关键词搜索">4  依据关键词搜索</h2><p>这个真的很棒。你可以从搜索词生成图像。让我们搜索食品相关的内容（非常有创意）：</p><p><a href="https://source.unsplash.com/random/300x300/?food">https://source.unsplash.com/random/300x300/?food</a></p><p>当然，你可以与尺寸配合使用：</p><p><a href="https://source.unsplash.com/random/900x700/?fruit">https://source.unsplash.com/random/900x700/?fruit</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Unsplash&lt;/h1&gt;
&lt;p&gt;如果你想使用免费版权的图片时，无论你是否用于商业用途，&lt;a href=&quot;https://unsplash.com/&quot;&gt;Unsplash&lt;/a&gt; 是不错的选择。&lt;/p&gt;
&lt;p&gt;虽然他们为开发人员提供了很棒的 API，但他们也提供了通过 UR</summary>
      
    
    
    
    <category term="玩机笔记" scheme="https://aizhiqian.github.io/categories/%E7%8E%A9%E6%9C%BA%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="API" scheme="https://aizhiqian.github.io/tags/API/"/>
    
  </entry>
  
  <entry>
    <title>【宝塔】搭建随机图API</title>
    <link href="https://aizhiqian.github.io/posts/20eb6109/"/>
    <id>https://aizhiqian.github.io/posts/20eb6109/</id>
    <published>2023-11-26T16:38:42.000Z</published>
    <updated>2024-04-27T10:11:02.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-创建站点">1  创建站点</h2><p>首先，我们打开服务器的宝塔面板，如果没安装的推荐安装一个，因为这个对建站小白来说非常的方便。</p><p>我们添加一个 API 站点</p><p>然后到站点设置里申请一个 ssl 认证，再打开强制 https</p><h2 id="2-添加图片链接">2  添加图片链接</h2><p>打开这个站点的目录，创建一个 img.txt 和一个 index.php</p><blockquote><p>以 index 命名可以直接域名访问，不需要再+ /index.php</p></blockquote><p>我们在 img.txt 中将我们图片的 url 写在里面，一行一个链接</p><h2 id="3-添加运行代码">3  添加运行代码</h2><p>在 index.php 中写下这段代码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//存有image链接的文件名img.txt</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&quot;img.txt&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>))&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;文件不存在&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//从文本获取链接</span></span><br><span class="line"><span class="variable">$pics</span> = [];</span><br><span class="line"><span class="variable">$fs</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="keyword">while</span>(!<span class="title function_ invoke__">feof</span>(<span class="variable">$fs</span>))&#123;</span><br><span class="line">    <span class="variable">$line</span>=<span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">fgets</span>(<span class="variable">$fs</span>));</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$line</span>!=<span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">        <span class="title function_ invoke__">array_push</span>(<span class="variable">$pics</span>, <span class="variable">$line</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//从数组随机获取链接</span></span><br><span class="line"><span class="variable">$pic</span> = <span class="variable">$pics</span>[<span class="title function_ invoke__">array_rand</span>(<span class="variable">$pics</span>)];</span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回指定格式</span></span><br><span class="line"><span class="variable">$type</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line"><span class="keyword">switch</span>(<span class="variable">$type</span>)&#123;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//JSON返回</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;json&#x27;</span>:</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/json&#x27;</span>);</span><br><span class="line">    <span class="keyword">die</span>(<span class="title function_ invoke__">json_encode</span>([<span class="string">&#x27;pic&#x27;</span>=&gt;<span class="variable">$pic</span>]));</span><br><span class="line"> </span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">die</span>(<span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: <span class="subst">$pic</span>&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>到此大功告成！我们的随机图 API 就做好了！</p><blockquote><p>可以再站点设置中添加防盗链，这样别人就无法使用你的 API 了，防止流量浪费</p></blockquote><p>我们只需要访问这个 API 链接（index.php）就可以立即跳转到我们 img.txt 中的随机一张图片的地址啦！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-创建站点&quot;&gt;1  创建站点&lt;/h2&gt;
&lt;p&gt;首先，我们打开服务器的宝塔面板，如果没安装的推荐安装一个，因为这个对建站小白来说非常的方便。&lt;/p&gt;
&lt;p&gt;我们添加一个 API 站点&lt;/p&gt;
&lt;p&gt;然后到站点设置里申请一个 ssl 认证，再打开强制 https&lt;/</summary>
      
    
    
    
    <category term="搭建部署" scheme="https://aizhiqian.github.io/categories/%E6%90%AD%E5%BB%BA%E9%83%A8%E7%BD%B2/"/>
    
    
    <category term="宝塔" scheme="https://aizhiqian.github.io/tags/%E5%AE%9D%E5%A1%94/"/>
    
  </entry>
  
  <entry>
    <title>【安装】Git详细安装教程</title>
    <link href="https://aizhiqian.github.io/posts/c13c4f52/"/>
    <id>https://aizhiqian.github.io/posts/c13c4f52/</id>
    <published>2023-10-03T16:50:30.000Z</published>
    <updated>2024-05-05T09:48:26.000Z</updated>
    
    <content type="html"><![CDATA[<h1>1  Git的下载</h1><p>进入到 <a href="https://git-scm.com/">git</a> 的主页 【<a href="https://git-scm.com/">点击前往</a>】，点击右侧的下载按钮，会自动匹配你的操作系统。本文中的安装版本为 2.42.0</p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/3/202310032343848.png" alt=""></p><h1>2  Git的安装</h1><h2 id="2-1-打开应用程序">2.1 打开应用程序</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040042062.webp" alt=""></p><h2 id="2-2-使用许可声明">2.2 使用许可声明</h2><p>双击下载后的 <code>Git-2.42.0.2-64-bit.exe</code>，开始安装，这个界面主要展示了 GPL第 2 版协议的内容，点击 [next] 到第二步。</p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040044718.webp" alt=""></p><h2 id="2-3-安装路径选择">2.3 安装路径选择</h2><p>第一步：选择安装路径</p><p>第二步：Next</p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040044582.webp" alt=""></p><h2 id="2-4-选择安装组件">2.4 选择安装组件</h2><ul><li><p>Additional Icons 添加桌面图标</p><ul><li>On the Desktop</li></ul></li><li><p>Windows Explorer integration 可以右键选择使用Git Bash和Git GUI两种方式的客户端</p><ul><li><p>Git Bash Here</p></li><li><p>Git GUI Here</p></li></ul></li><li><p>Git LFS （Large File Support）大文件支持</p></li><li><p>Associate .git* configuration files with the default text editor 关联.git后缀文件</p></li><li><p>Associate .sh files to be run with Bash 关联.sh文件</p></li><li><p>Check daily for Git for Windows updates 每天检查版本更新</p></li><li><p>(NEW!) Add a Git Bash Profile to Windows Terminal 将Git Bash添加到Windows Terminal中</p></li><li><p>(NEW!)Scalar (Git add-on to manage large-scale repositories) Windows新开发的一种大规模仓库管理</p></li></ul><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040044257.webp" alt=""></p><blockquote><p>注意：倒数第二个选项打勾的话，需要下载 Windows Terminal 配合 Git Bash使用，如图：</p></blockquote><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310041010121.webp" alt=""></p><h2 id="2-5-开始菜单文件夹">2.5 开始菜单文件夹</h2><p>在开始菜单栏创建Git文件夹，可以修改“Git”来重新命名文件夹，也可以点击“<code>Browser</code>”添加到别的已有文件夹，也可以勾选“<code>Don't create a Start Menu folder</code>”来选择不创建文件夹</p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040044516.webp" alt=""></p><p>安装成功后在开始菜单里的图如下：</p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040044453.webp" alt=""></p><h2 id="2-6-默认编辑器">2.6 默认编辑器</h2><p>Git 安装程序里面内置了10种编辑器供你挑选，比如 <code>Atom</code>、<code>Notepad</code>、<code>Notepad++</code>、<code>Sublime Text</code>、<code>Visual Studio Code</code>、<code>Vim</code> 等等，默认的是 Vim ，选择 Vim 后可以直接进行到下一步，但是 Vim 是纯命令行，操作有点难度，需要学习。如果选其他编辑器，则还需要去其官网安装后才能进行下一步。</p><p>下图为默认编辑器 <code>Vim</code></p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040044106.webp" alt=""></p><p>如果你不想用 <code>Vim</code> 当默认编辑器，换一个，比如 <code>Notepad++</code> ，那么你需要点击下面的蓝色字体 &quot; Notepad++ &quot; 去其官网下载安装好才能进行下一步 [next].</p><p><strong>本教程选择Notepad++编辑器</strong></p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045474.webp" alt=""></p><p>安装后还要配置在<code>我的电脑-&gt;属性-&gt;高级系统设置-&gt;高级-&gt;环境变量-&gt;系统变量-&gt;Path-&gt;编辑添加</code> Notepad++ 的安装地址，如 C:\Program Files\notepad++<br>这样才能在 Git Bash 里面直接调用 Notepad++</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">notepad++ 文件名.后缀  //在 git bash 调用 notepad++ 打开文件</span><br></pre></td></tr></table></figure><p>新手建议使用 <code>Notepad++</code> 、<code>Sublime Text</code>，这两个比 Windows 自带的记事本功能多太多了。</p><h2 id="2-7-默认分支">2.7 默认分支</h2><p>第一种是让 Git 自己选择，名字是<code>master</code>，但是未来也有可能会改为其他名字；第二种是我们自行决定，默认是<code>main</code>，当然，你也可以改为其他的名字。一般默认第一种。</p><blockquote><p>注： 第二个选项下面有个 NEW！ ，说很多团队已经重命名他们的默认主干名为 main . 这是因为2020 年非裔男子乔治·弗洛伊德因白人警察暴力执法惨死而掀起的 Black Lives Matter(黑人的命也是命)运动，很多人认为 master 不尊重黑人，呼吁改为 main.</p></blockquote><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045381.webp" alt=""></p><h2 id="2-8-调整-path-环境变量">2.8 调整 path 环境变量</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045253.webp" alt=""></p><p>翻译如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Use Git from Git Bash only </span><br><span class="line">This is the most cautious choice as your PATH will not be modified at all. You w only be able to use the Git command line tools from Git Bash.</span><br><span class="line">仅从 Git Bash 使用 Git</span><br><span class="line">这是最谨慎的选择，因为您的 PATH 根本不会被修改。您将只能使用 Git Bash 中的 Git 命令行工具。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Git from the command line and also from 3rd-party software</span><br><span class="line">(Recommended) This option adds only some minimal Git wrappers to your PATH to avoid cluttering your environment with optional Unix tools.</span><br><span class="line">You will be able to use Git from Git Bash, the Command Prompt and the Windov PowerShell as well as any third-party software looking for Git in PATH.</span><br><span class="line">从命令行以及第三方软件进行 Git</span><br><span class="line">（推荐）此选项仅将一些最小的 Git 包装器添加到PATH中，以避免使用可选的 Unix 工具使环境混乱。</span><br><span class="line">您将能够使用 Git Bash 中的 Git，命令提示符和 Windov PowerShell 以及在 PATH 中寻找 Git 的任何第三方软件。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Use Git and optional Unix tools from the Command Prompt </span><br><span class="line">Both Git and the optional Unix tools will be added to your PATH.</span><br><span class="line">Warning: This will override Windows tools like &quot;find&quot;and &quot;sort&quot;. Only use this option if you understand the implications.</span><br><span class="line">使用命令提示符中的 Git 和可选的 Unix 工具</span><br><span class="line">Git 和可选的 Unix 工具都将添加到您的 PATH 中。</span><br><span class="line">警告：这将覆盖 Windows 工具，例如 &quot;find&quot; and &quot;sort&quot;. 仅在了解其含义后使用此选项。</span><br></pre></td></tr></table></figure><p>第一种是仅从 Git Bash 使用 Git。这个的意思就是你只能通过 Git 安装后的 Git Bash 来使用 Git ，其他的什么命令提示符啊等第三方软件都不行。</p><p>第二种是从命令行以及第三方软件进行 Git。这个就是在第一种基础上进行第三方支持，你将能够从 Git Bash，命令提示符(cmd) 和 Windows PowerShell 以及可以从 Windows 系统环境变量中寻找 Git 的任何第三方软件中使用 Git。推荐使用这个。</p><p>第三种是从命令提示符使用 Git 和可选的 Unix 工具。选择这种将覆盖 Windows 工具，如 “ find 和 sort ”。只有在了解其含义后才使用此选项。一句话，适合比较懂的人折腾。</p><h2 id="2-9-选择-SSH-执行文件">2.9 选择 SSH 执行文件</h2><p>勾选默认即可</p><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045364.webp" alt=""></p><p>翻译如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">choosing the SSH executable</span><br><span class="line">选择SSH可执行文件</span><br><span class="line"></span><br><span class="line">use bundled opensSH</span><br><span class="line">使用捆绑开放SH</span><br><span class="line">This uses ssh.exe that comes with Git.</span><br><span class="line">它使用Git附带的ssh.exe。</span><br><span class="line"></span><br><span class="line">Use external opensSH</span><br><span class="line">使用外部操作系统SH</span><br><span class="line">NEW!This uses an external ssh.exe.Git will not install its own OpenSSH(and related) binaries but use them as found on the PATH.</span><br><span class="line">新的！这将使用外部的ssh.exe.Git不会安装它自己的OpenSSH(和相关的)二进制文件，而是像在路径上找到的那样使用它们。</span><br></pre></td></tr></table></figure><h2 id="2-10-选择HTTPS后端传输">2.10 选择HTTPS后端传输</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045898.webp" alt=""></p><p>翻译如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">use the OpenSSL library </span><br><span class="line">Server certificates will be validated using the ca-bundle. crt file.</span><br><span class="line">使用 OpenSSL 库</span><br><span class="line">服务器证书将使用 ca-bundle.crt 文件进行验证。</span><br><span class="line"></span><br><span class="line">Use the native Windows Secure Channel library </span><br><span class="line">Server certificates will be validated using Windows Certificate Stores.</span><br><span class="line">This option also allows you to use your company&#x27;s internal Root CA certificates distributed e.g. via Active Directory Domain Services.</span><br><span class="line">使用本机 Windows 安全通道库</span><br><span class="line">服务器证书将使用 Windows 证书存储进行验证。</span><br><span class="line">此选项还允许您使用公司内部分发的内部根 CA 证书，例如通过 Active Directory 域服务。</span><br></pre></td></tr></table></figure><p>作为普通用户，只是用 Git 来访问 <em>Github、Gitlab</em> 等网站，选择前者就行了。点击到下一步</p><h2 id="2-11-配置行尾符号转换">2.11 配置行尾符号转换</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045764.webp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Checkout Windows-style, commit Unix-style line endings </span><br><span class="line">Git will convert LF to CRLF when checking out text files. </span><br><span class="line">When committing text files, CRLF will be converted to LF. For cross-platform projects, this is the recommended setting on Windows(&quot;core. autocrif&quot;is set to &quot;true&quot;).</span><br><span class="line">签出 Windows 样式，提交 Unix 样式的行结尾</span><br><span class="line">Git 签出文本文件时，会将 LF 转换为 CRLF。</span><br><span class="line">提交文本文件时，CRLF 将转换为 LF。</span><br><span class="line">对于跨平台项目，这是 Windows 上的建议设置（&quot;core.autocrif&quot; 设置为 &quot;true&quot;）。</span><br><span class="line"></span><br><span class="line">Checkout as-is, commit Unix-style line endings </span><br><span class="line">Git will not perform any conversion when checking out text files. </span><br><span class="line">When committing text files, CRLF will be converted to LF. For cross-platform projects, this is the recommended setting on Unix(&quot;core.autocrif&quot; is set to &quot;input&quot;).</span><br><span class="line">按原样签出，提交 Unix 样式的行结尾</span><br><span class="line">Git 在签出文本文件时不会执行任何转换。提交文本文件时，CRLF 将转换为 LF。</span><br><span class="line">对于跨平台项目，这是在 Unix 上的建议设置（&quot;core.autocrif&quot; 设置为 &quot;input&quot;）。</span><br><span class="line"></span><br><span class="line">Checkout as-is, commit as-is </span><br><span class="line">Git will not perform any conversions when checking out or committing text files. </span><br><span class="line">Choosing this option is not recommended for cross-platform projects(&quot;core. autocrif&quot;is set to &quot;false&quot;).</span><br><span class="line">按原样签出，按原样提交</span><br><span class="line">Git 在签出或提交文本文件时不会执行任何转换。</span><br><span class="line">不建议跨平台项目选择此选项（&quot;core.autocrif&quot; 设置为 &quot;false&quot;）。</span><br></pre></td></tr></table></figure><p>那 Windows 样式和 Unix 样式到底有什么区别呢？</p><p>引用 《<a href="https://link.zhihu.com/?target=https%3A//book.douban.com/subject/26462816/">GitHub 入门与实践</a>》 第50页内容：</p><blockquote><p>GitHub 中公开的代码大部分都是以 Mac 或 Linux 中的 LF（Line Feed）换行。然而，由于 Windows 中是以 CRLF（Carriage Return+ Line Feed）换行的，所以在非对应的编辑器中将不能正常显示。</p><p>Git 可以通过设置自动转换这些换行符。使用 Windows 环境的各位，请选择推荐的 “Checkout Windows-style，commit Unix-style line endings” 选项。换行符在签出时会自动转换为 CRLF，在提交时则会自动转换为 LF .</p></blockquote><p>上面说 Mac 、Linux、Unix 的 Line Feed ，翻译过来就是换行符，用 “\n” 表示，换行符 “\n” 的 ASCII 值为10；</p><p>Windows 的是 Carriage Return+ Line Feed（回车+换行），用 “\r\n” 表示，回车符 “\r” 的 ASCII 值为13；这上下两者是不一样的。</p><p>所以这就需要转换了，至于为什么选第一项？</p><p>这还用问吗？我们现在的教程就是介绍怎么安装 Windows 版 Git，肯定选第一项啦。</p><p>至于 “回车”（carriage return）和 “换行”（line feed）这两个概念的来历和区别？</p><p>引用一下 <a href="https://link.zhihu.com/?target=https%3A//link.csdn.net/%3Ftarget%3Dhttp%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2006%2F04%2Fpost_213.html">阮一峰老师博客</a> 的部分内容：</p><blockquote><p>在计算机还没有出现之前，有一种叫做电传打字机（Teletype Model 33）的玩意，每秒钟可以打 10 个字符。但是它有一个问题，就是打字机打完一行换行的时候，要用去 0.2 秒，正好可以打两个字符。要是在这 0.2 秒里面，又有新的字符传过来，那么这个字符将丢失。<br>于是，研制人员想了个办法解决这个问题，就是在每行后面加两个表示结束的字符。一个叫做 “回车”，告诉打字机把打印头定位在左边界；另一个叫做 “换行”，告诉打字机把纸向下移一行。</p></blockquote><h2 id="2-12-配置终端模拟器">2.12 配置终端模拟器</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045306.webp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Use MinTTY(the default terminal of MSYS2) </span><br><span class="line">Git Bash will use MinTTY as terminal emulator, which sports a resizable window</span><br><span class="line">non-rectangular selections and a Unicode font.Windows console programs(such</span><br><span class="line">as interactive Python) must be launched via &#x27;winpty&#x27; to work in MinTTY.</span><br><span class="line">使用 MinTTY（MSYS2的默认终端）</span><br><span class="line">Git Bash 将使用 MinTTY 作为终端仿真器，该仿真器具有可调整大小的窗口非矩形选择和 Unicode 字体。</span><br><span class="line">Windows 控制台程序（例如交互式 Python）必须通过 &quot;winpty&quot; 启动才能在 MinTTY 中运行。</span><br><span class="line"></span><br><span class="line">Use Windows&#x27; default console window</span><br><span class="line">Git will use the default console window of Windows(&quot;cmd.exe&quot;), which works well</span><br><span class="line">with Win32 console programs such as interactive Python or node. js, but has a</span><br><span class="line">very limited default scroll-back,needs to be configured to use a Unicode font in </span><br><span class="line">order to display non-ASCII characters correctly, and prior to Windows 10 its </span><br><span class="line">window was not freely resizable and it only allowed rectangular text selections.</span><br><span class="line">使用 Windows 的默认控制台窗口</span><br><span class="line">Git 将使用 Windows 的默认控制台窗口（&quot;cmd.exe&quot;），该窗口可与 Win32 控制台程序（例如交互式Python 或 </span><br><span class="line">node.js）一起使用，但默认回滚非常有限，需要将其配置为使用 Unicode 字体才能正确显示非 ASCII 字符，并且在 </span><br><span class="line">Windows 10 之前，其窗口不可随意调整大小，并且仅允许选择矩形文本。</span><br></pre></td></tr></table></figure><p>建议选择第一种，MinTTY 3功能比 cmd 多，cmd 只不过 比 MinTTY 更适合处理 Windows 的一些接口问题，这个对 Git 用处不大，除此之外 Windows 的默认控制台窗口（cmd）有很多劣势，比如 cmd 具有非常有限的默认历史记录回滚堆栈和糟糕的字体编码等等。</p><p>相比之下，MinTTY 具有可调整大小的窗口和其他有用的可配置选项，可以通过右键单击的工具栏来打开它们 git-bash 。点击 [next] 到下一步。</p><h2 id="2-13-默认的-“git-pull”-行为">2.13 默认的 “git pull” 行为</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045323.webp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Default(fast-forward or merge)</span><br><span class="line">This is the standard behavior ofgit pull&quot;: fast-forward the current branch to </span><br><span class="line">the fetched branch when possible, otherwise create a merge commit.</span><br><span class="line">默认（快进或合并）</span><br><span class="line">这是 &quot;git pull&quot; 的标准行为：在可能的情况下将 当前分支 快进到 获取的分支，否则创建合并提交。</span><br><span class="line"></span><br><span class="line">Rebase </span><br><span class="line">Rebase the current branch onto the fetched branch. If there are no local </span><br><span class="line">commits to rebase, this is equivalent to a fast-forward.</span><br><span class="line">变基将当前分支变基到获取的分支上。如果没有本地提交要变基，则等同于快进。</span><br><span class="line"></span><br><span class="line">Only ever fast-forward </span><br><span class="line">Fast-forward to the fetched branch. Fail if that is not possible.</span><br><span class="line">只能快进快进到获取的分支。如果不可能，则失败。</span><br></pre></td></tr></table></figure><p>“git pull” 是什么意思呢？<br>git pull 就是获取最新的远程仓库分支到本地，并与本地分支合并</p><p>上面给了三个 “git pull” 的行为：<br>第一个是 merge<br>第二个是 rebase<br>第三个是 直接获取</p><p>第一种 <code>git pull = git fetch + git merge</code><br>第二种 <code>git pull = git fetch + git rebase</code><br>第三种 <code>git pull = git fetch</code> ？(这个没试过，纯属猜测)</p><p>一般默认选择第一项，git rebase 绝大部分程序员都用不好或者不懂，而且风险很大，但是很多会用的人也很推崇，但是用不好就是灾难。</p><p>git pull 只是拉取远程分支并与本地分支合并，而 git fetch 只是拉取远程分支，怎么合并，选择 merge 还是 rebase ，可以再做选择。</p><h2 id="2-14-凭证帮助程序">2.14 凭证帮助程序</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040045379.webp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Git Credential Manager </span><br><span class="line">Use the cross-platform Git Credential Manager.</span><br><span class="line">See more information about the future of Git Credential Manager here.</span><br><span class="line">Git 凭证管理</span><br><span class="line">使用跨平台的 Git  凭证管理。</span><br><span class="line">在此处查看有关 Git 凭证管理未来的更多信息。</span><br><span class="line"></span><br><span class="line">None </span><br><span class="line">Do not use a credential helper.</span><br><span class="line">不使用凭证助手。</span><br></pre></td></tr></table></figure><p>一共两个选项：<br><code>Git 凭证管理</code><br><code>不使用凭证助手</code></p><p>第一个选项是提供<code>登录凭证</code>帮助的，Git 有时需要用户的凭据才能执行操作；例如，可能需要输入<code>用户名</code>和<code>密码</code>才能通过 HTTP 访问远程存储库（GitHub，GItLab 等等）。</p><h2 id="2-15-配置额外的选项">2.15 配置额外的选项</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040046833.webp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Enable file system caching </span><br><span class="line">File system data will be read in bulk and cached in memory for certain operations(&quot;core.fscache&quot; is set to &quot;true&quot;). </span><br><span class="line">This provides a significant performance boost.</span><br><span class="line">启用文件系统缓存</span><br><span class="line">将批量读取文件系统数据并将其缓存在内存中以进行某些操作（&quot;core.fscache” 设置为 &quot;true&quot;）。</span><br><span class="line">这可以显着提高性能。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Enable symbolic links </span><br><span class="line">Enable symbolic links(requires the SeCreateSymbolicLink permission).</span><br><span class="line">Please note that existing repositories are unaffected by this setting.</span><br><span class="line">启用符号链接</span><br><span class="line">启用符号链接（需要SeCreateSymbolicLink权限）。</span><br><span class="line">请注意，现有存储库不受此设置的影响。</span><br></pre></td></tr></table></figure><p>有两个选项：</p><p><code>启用文件系统缓存</code>就是将批量读取文件系统数据并将其缓存在内存中以进行某些操作，可以显著提升性能。这个选项默认开启。</p><p><code>启用符号链接</code>，符号链接是一类特殊的文件，其包含有一条以绝对路径或者相对路径的形式指向其它文件或者目录的引用，类似于 Windows 的快捷方式，不完全等同类Unix（如 Linux的符号链接。因为该功能的支持需要一些条件，所以默认不开启。</p><h2 id="2-16-配置实验性选项">2.16 配置实验性选项</h2><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040046742.webp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Enable experimental support for pseudo consoles.</span><br><span class="line">(NEW!) This allows running native console programs like Node or Python in a Git Bash window without using winpty, </span><br><span class="line">but it still has known bugs.</span><br><span class="line">启用对伪控制台的实验性支持。</span><br><span class="line">(新功能!) 这允许在不使用 winpty 的情况下在 Git Bash 窗口中运行诸如 Node 或 Python 之类的本机控制台程序，</span><br><span class="line">但是它仍然存在已知的 bug。</span><br><span class="line"></span><br><span class="line">Enable experimental built-in file system monitor</span><br><span class="line">(NEW!) Automatically run a built-in file system watcher, to speed up common operations such as &#x27; git status&#x27;, &#x27; git add&#x27;, &#x27; git commit&#x27;, etc in worktrees containing many files.</span><br><span class="line">启用实验性内置文件系统监视器</span><br><span class="line">（新！）自动运行内置文件系统监视器，以加快包含许多文件的工作树中的常见操作，例如 &#x27;git status&#x27;、&#x27;git add&#x27;、&#x27;git commit&#x27; 等.</span><br></pre></td></tr></table></figure><p>这是实验性功能，可能会有一些小错误之类的，建议不用开启。</p><p>点击 [install] 进行安装。</p><h1>3  测试</h1><h2 id="3-1-Windows-Terminal">3.1 Windows Terminal</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查看Git版本</span><br><span class="line">git --version</span><br><span class="line"></span><br><span class="line"># 查看Git路径</span><br><span class="line">where git</span><br></pre></td></tr></table></figure><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/10/4/202310040047233.webp" alt=""></p><h2 id="3-2-Git-的功能介绍">3.2 Git 的功能介绍</h2><h3 id="3-2-1-Git-Bash">3.2.1 Git Bash</h3><p><code>Git Bash</code> 是基于CMD的，在CMD的基础上增添一些新的命令与功能，平时主要用这个，功能很丰富</p><h3 id="3-2-2-Git-CMD">3.2.2 Git CMD</h3><p><code>Git CMD</code> 不能说和 cmd 完全一样，只能说一模一样，功能少得可怜</p><h3 id="3-2-3-Git-FAQs">3.2.3 Git FAQs</h3><p><code>Git FAQs</code> 就是 Git Frequently Asked Questions（常问问题），访问地址：<a href="https://github.com/git-for-windows/git/wiki/FAQ">https://github.com/git-for-windows/git/wiki/FAQ</a></p><h3 id="3-2-4-Git-GUI">3.2.4 Git GUI</h3><p><code>Git GUI</code> 就是 Git 的图形化界面</p><p>可以通过它快速<code>创建新仓库（项目），克隆存在的仓库（项目），打开存在的仓库（仓库）</code>这个我用的很少，建议还是用命令行学习Git。</p><h3 id="3-2-5-Git-Release-Note">3.2.5 Git Release Note</h3><p><code>Git Release Note</code> 就是版本说明，增加了什么功能，修复了什么 bug 之类的。</p><h1>4  Git 优秀教程推荐</h1><ul><li><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰-Git教程</a>   [<code>访问量: 30941698172，新手必看</code>]</p></li><li><p><a href="https://wwc.lanzouo.com/i4BWko0gfje">GitHub入门与实践</a> [<code>密码:7aik，电子书，特别棒的入门书籍，2年后的感悟，强烈建议看这个</code>]</p></li><li><p><a href="https://rogerdudler.github.io/git-guide/index.zh.html">git-简明指南</a>      [<code>图形化模式，简单易懂</code>]</p></li><li><p><a href="http://marklodato.github.io/visual-git-guide/index-zh-cn.html">图解Git</a>          [<code>一样是图形化教程</code>]</p></li><li><p><a href="https://github.com/521xueweihan/git-tips">Git的奇技淫巧</a>    [<code>GitHub 14.9k stars</code>]</p></li><li><p><a href="https://ndpsoftware.com/git-cheatsheet.html#loc=stas">git-cheatsheeth</a>   [<code>图形化 Git 命令的作用域</code>]</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1  Git的下载&lt;/h1&gt;
&lt;p&gt;进入到 &lt;a href=&quot;https://git-scm.com/&quot;&gt;git&lt;/a&gt; 的主页 【&lt;a href=&quot;https://git-scm.com/&quot;&gt;点击前往&lt;/a&gt;】，点击右侧的下载按钮，会自动匹配你的操作系统。本文中的安装版</summary>
      
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="安装" scheme="https://aizhiqian.github.io/tags/%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】美化教程合集 3</title>
    <link href="https://aizhiqian.github.io/posts/e4fbd1cb/"/>
    <id>https://aizhiqian.github.io/posts/e4fbd1cb/</id>
    <published>2023-07-25T10:25:55.000Z</published>
    <updated>2023-07-25T10:25:55.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><ol><li>鉴于每个人的根目录名称都不一样，本帖<strong>博客根目录</strong>一律以<code>[BlogRoot]</code>指代。</li><li>本贴魔改均基于<code>butterfly</code>主题。</li><li>本帖涉及魔改源码的内容，会使用<strong>diff代码块</strong>标识，复制时请<strong>不要忘记删除</strong>前面的<code>+、-</code>符号。</li><li>因为<code>.pug</code>和<code>.styl</code>以及<code>.yml</code>等对缩进要求较为严格，请尽量<strong>不要使用记事本等无法提供语法高亮的文本编辑器</strong>进行修改。</li><li>本帖基于<code>Butterfly主题</code>进行魔改方案编写，因此请读者优先掌握<a href="https://butterfly.js.org/">Butterfly主题官方文档</a>的内容后再来进行魔改。</li><li>魔改会过程常常引入<strong>自定义的css与js文件</strong>，方法见<a href="/posts/2e57d1d6/" title="【Hexo】添加自定义css和js文件">【Hexo】添加自定义css和js文件</a></li></ol></div><h2 id="1-今日诗词侧边栏">1  今日诗词侧边栏</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>转载自：<a href="https://blog.zhheo.com/p/2ed9d8dd.html">Butterfly美化：今日诗词侧边栏小组件，中国传统诗词文化</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><p><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/07/25/202307251836270.png" alt=""></p><!-- ![](https://p0.meituan.net/csc/3d4d8cddc488b2fef2f8ec7f538debba6893.jpg) --></div></div><ol><li><p>API</p><p>本组件的API由<a href="https://www.jinrishici.com/">今日诗词</a>提供</p></li><li><p>Demo<br>本站所有包含侧边栏的页面均有该组件</p></li><li><p>安装教程<br>主题新建<code>themes/butterfly/layout/includes/widget/card_poem.pug</code>，内容如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#card-poem.card-widget</span><br><span class="line">    #poem_sentence</span><br><span class="line">    #poem_info</span><br><span class="line">        #poem_dynasty</span><br><span class="line">        #poem_author</span><br><span class="line">script(src=&#x27;https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/jinrishici.js&#x27;, charset=&#x27;utf-8&#x27;)</span><br><span class="line">script(type=&#x27;text/javascript&#x27;).</span><br><span class="line">  jinrishici.load(function(result) &#123;</span><br><span class="line">  var sentence = document.querySelector(&quot;#poem_sentence&quot;)</span><br><span class="line">  var author = document.querySelector(&quot;#poem_author&quot;)</span><br><span class="line">  var dynasty = document.querySelector(&quot;#poem_dynasty&quot;)</span><br><span class="line"></span><br><span class="line">  var sentenceText = result.data.content</span><br><span class="line">  sentenceText = sentenceText.substr(0, sentenceText.length - 1);</span><br><span class="line">  sentence.innerHTML = sentenceText</span><br><span class="line">  dynasty.innerHTML = result.data.origin.dynasty</span><br><span class="line">  author.innerHTML = result.data.origin.author + &#x27;《&#x27; + result.data.origin.title + &#x27;》&#x27;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>在<code>themes/butterfly/layout/includes/widget/index.pug</code>中你需要的位置添加以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!=partial(&#x27;includes/widget/card_poem&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br></pre></td></tr></table></figure><p>填写示例，可以在俩个<br><img src="https://jihulab.com/ainiz/img1/-/raw/main/2023/07/25/202307251844681.png" alt=""></p><!-- ![](https://p0.meituan.net/csc/bd3573bde43c38db00edf68fca68395e51258.jpg) --><p>如果没有引用过<code>heoMainColor.css</code>需要引用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/js-heo@1.0.11/mainColor/heoMainColor.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>引用主css</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/poem.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></div></details>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note blue icon-padding flat&quot;&gt;&lt;i class=&quot;note-icon fas fa-bullhorn&quot;&gt;&lt;/i&gt;&lt;ol&gt;
&lt;li&gt;鉴于每个人的根目录名称都不一样，本帖&lt;strong&gt;博客根目录&lt;/strong&gt;一律以&lt;code&gt;</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Termux】高级终端安装使用配置教程 5</title>
    <link href="https://aizhiqian.github.io/posts/ba339f20/"/>
    <id>https://aizhiqian.github.io/posts/ba339f20/</id>
    <published>2023-07-22T18:02:07.000Z</published>
    <updated>2023-07-22T18:02:07.000Z</updated>
    
    <content type="html"><![CDATA[<h1>信息安全</h1><p>因为 Termux 可以很好的支持 <code>Python</code>，所以几乎所有用 <code>Python</code> 编写的安全工具都是可以完美的运行使用的，所以国光这个版块重点就列举了国光认为实战中比较不错的安全工具。当然大家也可以直接参考本文的 「系统安装」- 「Kali NetHunter」章节，直接在手机里面安装一个 Kali Linux 系统，国光实际体验还是很完美的，里面的信息安全工具要更全面一些。</p><h2 id="更新一下">更新一下</h2><p>因为网络社交媒体上有不少脚本小子上传了如何使用 Termux 安装黑客工具进行一些破坏行为，导致 Termux 官方移除了如下黑客工具的包支持：</p><ul><li>Hashcat</li><li>Hydra</li><li>Metasploit</li><li>Sqlmap</li></ul><p>实际上官方并没有封死，只是为脚本小子提高了门槛，官方文档原话如下：</p><p>Manual compiling and installation of these packages should not require much effort from experienced users. All packages are still present in git history, so just revert commits to restore them. As for others… lets they take a mission <s>impossible challenge</s> of installing package from source!</p><p>手动编译和安装这些包应该不需要有经验的用户付出太多努力。所有包仍然存在于 git 历史记录中，因此只需还原提交即可恢复它们。至于其他人…… 让他们接受从源代码安装软件包的<s>不可能完成的挑战</s>！</p><blockquote><p>23333 只会用工具的脚本小子被官方嘲讽了。</p></blockquote><h2 id="Exiftool">Exiftool</h2><p>一个强大的元数据查看修改工具，CTF 的 MISC 的比赛上也经常露面，实际上 ios 自带的相机拍出的照片里面是携带 GPS 定位的，使用 Exiftool 就可以很轻松的查看到经纬度信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install exiftool</span><br></pre></td></tr></table></figure><p>下面查看一下国光我刚刚保存地理信息拍的照片的元数据信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/storage/dcim/Camera</span><br><span class="line">exiftool IMG_20200424_073210.jpg</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200424/15876850463298.jpg" alt="img"></p><p>给 GPS 位置信息打马，防止网友顺着网线过来打人。</p><h2 id="Metasploit">Metasploit</h2><p>Metasploite 黑客 Top10 工具之一，漏洞攻击库，安全从业者必备工具之一，也在各大黑客题材的电影中频频出现。</p><h3 id="2021-年更新">2021 年更新</h3><p>因为官方的 unstable-repo 源，移除了对 Metasploit 的支持，按照以前的方法会提示：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E: Unable to locate paclage metasploit </span><br></pre></td></tr></table></figure><p>国光这里是通过 Github 上的 m-wiz 项目来辅助安装 Metasploit 的，脚本启动比较简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line">pkg install git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆脚本项目</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/noob-hackers/m-wiz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行脚本</span></span><br><span class="line"><span class="built_in">cd</span> m-wiz &amp;&amp;  m-wiz.sh</span><br></pre></td></tr></table></figure><p>操作的菜单比较简单直观：</p><p><img src="https://image.3001.net/images/20210610/16233277309507.png" alt="img"></p><p>安装的时候还会有一些提示，比如选择 Metasploit 的版本之类的，大家根据提示自己选择安装即可，安装的过程可能会安装其他 Ruby gem，因此能需要很长时间。在安装完成之前，请勿关闭 Termux 会话，否则可能会出一些玄学问题导致安装失败，总之耐心等待即可。</p><p>国光强烈建议搭建挂代理安装，这样效率和成功率会高很多，大家看到这个版块说明也是安全从业者了，所以代理对于你来说应该很简单了吧，最后的安装效果如下：</p><p><img src="https://image.3001.net/images/20210610/16233278494519.png" alt="img"></p><p>为了方便日后直接启动，手动创建下软连接，下次可以直接启动：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s <span class="variable">$HOME</span>/metasploit-framework/msfconsole <span class="variable">$PREFIX</span>/bin/msfconsole</span><br><span class="line"><span class="built_in">ln</span> -s <span class="variable">$HOME</span>/metasploit-framework/msfd <span class="variable">$PREFIX</span>/bin/msfd</span><br><span class="line"><span class="built_in">ln</span> -s <span class="variable">$HOME</span>/metasploit-framework/msfdb <span class="variable">$PREFIX</span>/bin/msfdb</span><br><span class="line"><span class="built_in">ln</span> -s <span class="variable">$HOME</span>/metasploit-framework/msfrpc <span class="variable">$PREFIX</span>/bin/msfrpc</span><br><span class="line"><span class="built_in">ln</span> -s <span class="variable">$HOME</span>/metasploit-framework/msfupdate <span class="variable">$PREFIX</span>/bin/msfupdate</span><br><span class="line"><span class="built_in">ln</span> -s <span class="variable">$HOME</span>/metasploit-framework/msfvenom <span class="variable">$PREFIX</span>/bin/msfvenom</span><br></pre></td></tr></table></figure><h3 id="旧的教程">旧的教程</h3><h4 id="Android-7">Android 7 +</h4><p><s>目前 Termux 官方的 pkg 已经支持直接安装 Metasploit 了，但是仅适用于 Android 7 及其以上版本。通过如下两条命令即可安装，下载过程大约 1 分钟左右（当然国光我是<strong>挂代理</strong>的）</s></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  切换不稳定源</span></span><br><span class="line">pkg install unstable-repo</span><br><span class="line"></span><br><span class="line"><span class="comment">#  安装 msf</span></span><br><span class="line">pkg install metasploit</span><br></pre></td></tr></table></figure><h4 id="Android-5-x-6-x">Android 5.x - 6.x</h4><p><s>因为老的安卓版本不支持 unstable-repo，所以只能执行如下命令手动安装了：</s></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://github.com/termux/termux-packages/files/3995119/metasploit_5.0.65-1_all.deb.gz</span><br><span class="line">gunzip metasploit_5.0.65-1_all.deb.gz</span><br><span class="line">dpkg -i metasploit_5.0.65-1_all.deb</span><br><span class="line">apt -f install</span><br></pre></td></tr></table></figure><h2 id="Netcat">Netcat</h2><p>nc 被誉为网络安全界的瑞士军刀，一个简单而有用的工具，netcat 是比较新的现代版本，并且作者是着名的 Nmap 程序的作者。nc 命令的详细教程可以参考我的这篇文章: <a href="https://www.sqlsec.com/2019/10/nc.html">nc 命令教程</a></p><p>目前 ncat 已经集成到了 nmap 里面，安装完 nmap 后就可以使用 <code>ncat</code> 命令了，如果你不想安装 nmap 也可以单独安装 ncat 命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">pkg install nmap-ncat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 版本信息</span></span><br><span class="line">netcat --version</span><br><span class="line">Ncat: Version 7.80 ( https://nmap.org/ncat )</span><br></pre></td></tr></table></figure><h2 id="Nmap">Nmap</h2><p>端口扫描必备工具，在最近的国产电视剧《亲爱的，热爱的》也出现过令人叹为观止的操作：<code>nmap -sT -A localhost</code>!!!</p><p><strong>安装 Nmap</strong></p><p>Termux 源里面封装打包了 Nmap，所以安装起来就比较简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install nmap</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20180502/15252522986960.png" alt="img"></p><h2 id="Hashcat">Hashcat</h2><p>Hashcat 是世界上最快的密码破解程序，是一个支持多平台、多算法的开源的分布式工具。</p><p>官方:<a href="https://hashcat.net/hashcat/">https://hashcat.net/hashcat/</a></p><p>Github:<a href="https://github.com/hashcat/hashcat">https://github.com/hashcat/hashcat</a></p><p>在我的另一篇文章里面有更详细的教程来介绍这款工具：<a href="https://www.sqlsec.com/2019/10/hashcat.html">Hashcat 学习记录</a></p><p><strong>安装 Hashcat</strong></p><p>Termux unstable 源里面也封装好了 Hastcat，所以我们安装依然一条命令即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install hashcat</span><br></pre></td></tr></table></figure><p>如果提示找不到 Hashcat 包的话，那么手动安装切换不稳定源即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  切换不稳定源</span></span><br><span class="line">pkg install unstable-repo</span><br></pre></td></tr></table></figure><h2 id="Hydra">Hydra</h2><p>Hydra 是著名的黑客组织 THC 的一款开源暴力破解工具，如果由于 Termux 官方移除对 Hydra 的支持 ，如今只能手动编译安装，理论上编译安装的方法如下，是否真的好用还得等大家的测试，国光感觉 Hydra 不太行，就没有深入折腾这个：</p><p><strong>安装 Hydra</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拷贝项目</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/vanhauser-thc/thc-hydra</span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动编译</span></span><br><span class="line">./configure --prefix=<span class="variable">$PREFIX</span></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看版本信息</span></span><br><span class="line">./hydra -h</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20180502/1525253245778.png!" alt="成功爆破出了SSH的密码 以前的图"></p><h2 id="SQLmap">SQLmap</h2><p>SQLmap 是一款用来检测与利用 SQL 注入漏洞的免费开源工具 <a href="https://github.com/sqlmapproject/sqlmap">官方项目地址</a>，后面 SQLmap 也支持 Python3 版本了</p><p><strong>安装 SQLmap</strong></p><p>我们直接 <code>git clone</code> 源码，然后运行 <code>sqlmap.py</code> 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/sqlmapproject/sqlmap.git</span><br><span class="line"><span class="built_in">cd</span> sqlmap</span><br><span class="line">python sqlmap.py</span><br></pre></td></tr></table></figure><blockquote><p>sqlmap 支持 pip 安装了，所以建议直接 <code>pip install sqlmap</code> 来进行安装，然后终端下直接 sqlmap 就可以了，十分方便。</p></blockquote><p><img src="https://image.3001.net/images/20180502/15252521782388.png" alt="img"></p><h2 id="xray">xray</h2><p>xray 是长亭科技开发的 Web 漏洞扫描器，在圈内的反馈都是还不错的，在我的这篇文章 <a href="https://www.sqlsec.com/2020/04/xray.html">xray Web 扫描器学习记录</a>已经讲解了 xray 扫描器的基本使用，但是国光注意到 xray 官方项目居然也发布了 arm64 的版本，那么理论 Termux 应该也就可以愉快地安装了，手机躺着挖洞也不是不可能。</p><p><strong>官方版本发布地址</strong>: <a href="https://github.com/chaitin/xray/releases">https://github.com/chaitin/xray/releases</a></p><p>下面尝试直接安装运行看看：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载并解压</span></span><br><span class="line"><span class="built_in">mkdir</span> xray &amp;&amp; <span class="built_in">cd</span> xray</span><br><span class="line">wget xxxxx.zip <span class="comment"># xray 的下载地址</span></span><br><span class="line">unzip xray_linux_arm64.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接运行</span></span><br><span class="line">./xray_linux_arm646</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200424/1587683533703.png" alt="img"></p><h2 id="小结">小结</h2><p>因为 Termux 完美的支持 <code>Python</code> 和 <code>Perl</code> 等语言，所以有太多优秀的信息安全工具值得大家去发现了，这里国光我就不一一列举了。</p><h1>官方插件</h1><p>Termux 有一些额外有趣的功能，我们可以通过安装插件的方式来使用这些功能。网友们反馈 F-Droid 里面的 Termux 插件都是可以免费下载的，大家根据实际情况自行抉择。</p><h2 id="Termux-API">Termux:API</h2><p>Termux:API，可用于访问手机硬件实现更多的友情的功能。官方唯一一个免费的 API，良心啊。</p><h3 id="准备工作">准备工作</h3><h4 id="安装-Termux-API">安装 Termux:API</h4><p><strong>下载地址</strong></p><ul><li><a href="https://play.google.com/store/apps/details?id=com.termux.api">Termux:API Google Play 下载地址</a></li><li><a href="https://f-droid.org/packages/com.termux.api/">Termux:API F-Droid 下载地址</a></li></ul><blockquote><p>请勿在 Google Play 和 F-Droid 之间混合安装 Termux 和 插件。</p></blockquote><p><img src="https://image.3001.net/images/20200420/1587370530651.jpg" alt="img"></p><h4 id="给-app-权限">给 app 权限</h4><p>因为 Termux-api 可以直接操作手机底层，所以我们需要到手机的设置里面给 这个 APP 的权限全部开了，这样下面操作的时候就不会提示权限不允许的情况了。</p><p><img src="https://image.3001.net/images/20200420/15873722473744.jpg" alt="img"></p><h4 id="安装-Termux-api-软件包">安装 Termux-api 软件包</h4><p>手机安装完 Termux-api 的 APP 后，Termux 终端里面必须安装对应的包后才可以与手机底层硬件进行交互。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install termux-api</span><br></pre></td></tr></table></figure><p>下面只列举一些可能会用到的，想要获取更多关于 <code>Termux-api</code> 的话，可以考虑参考官方文档。</p><p>因为本文的篇幅已经过长，而且手机用户浏览起来已经很卡顿了，所以单独把之前冗长的 Termux API 部分开了一篇文章来记录，提高用户的浏览体验：<a href="https://www.sqlsec.com/2018/05/termuxapi.html">Termux-API 使用教程</a></p><h2 id="Termux-Boot">Termux:Boot</h2><p>用于将自定义命令开机自启使用，不要每次重启完重复敲命令了。(当然你的手机性能很强，从来需要重启)</p><h3 id="安装-Termux-Boot">安装 Termux:Boot</h3><ul><li><a href="https://play.google.com/store/apps/details?id=com.termux.boot">Termux:Boot Google Play 下载地址</a></li><li><a href="https://f-droid.org/packages/com.termux.boot/">Termux:Boot F-Droid 下载地址</a></li></ul><blockquote><p>请勿在 Google Play 和 F-Droid 之间混合安装 Termux 和 插件。</p></blockquote><p><img src="https://image.3001.net/images/20200420/15873935552099.jpg" alt="img"></p><p>这是一个收费的应用，一贫如洗的国光是买不起的，但是还得写一下这个，万一真的有壕买了这个 APP 呢</p><h3 id="使用方法">使用方法</h3><p>安装完成启动这个应用程序后，创建 <code>~/.termux/boot/</code> 目录，将需要开机自启的脚本放在这个目录下面，如果有多个文件的话，将他们按照排序顺序执行，如果要确保设备进入睡眠状态，建议脚本前面先运行 <code>termux-wake-lock</code> 命令。</p><p>下面是一个开机自启 <code>sshd</code> 服务的的脚本，文件的完整路径为: <code>~/.termux/boot/start-sshd</code> 内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/data/data/com.termux/files/usr/bin/sh</span></span><br><span class="line">termux-wake-lock</span><br><span class="line">sshd</span><br></pre></td></tr></table></figure><h2 id="Termux-Float">Termux:Float</h2><p>可以将 Termux 悬浮窗形式显示，看上去比较酷炫。</p><ul><li><a href="https://play.google.com/store/apps/details?id=com.termux.window">Termux: Float Google Play 下载地址</a></li><li><a href="https://f-droid.org/packages/com.termux.window/">Termux: Float F-Droid 下载地址</a></li></ul><blockquote><p>请勿在 Google Play 和 F-Droid 之间混合安装 Termux 和 插件。</p></blockquote><p><img src="https://image.3001.net/images/20200420/15873941179613.jpg" alt="img"></p><p>这是依然是一个收费的应用，尽管它看上去很酷炫，但是家境贫寒的国光还是买不起，下面就晒一个效果图吧：</p><p><img src="https://image.3001.net/images/20200420/15873942264525.jpg" alt="边学习 边操作练习"></p><h2 id="Termux-Styling">Termux:Styling</h2><p>Termux 官方提供了终端的一些美化方案。</p><ul><li><a href="https://play.google.com/store/apps/details?id=com.termux.styling">Termux:Styling Google Play 下载地址</a></li><li><a href="https://f-droid.org/packages/com.termux.styling/">Termux:Styling F-Droid 下载地址</a></li></ul><blockquote><p>请勿在 Google Play 和 F-Droid 之间混合安装 Termux 和 插件。</p></blockquote><p><img src="https://image.3001.net/images/20200420/15873944539130.jpg" alt="img"></p><p>这是还是一个收费的应用，虽然我们前面的一键安装脚本已经可以达到这个美化效果了，但是如果你想尝试一下官方的可以试试看。</p><h2 id="Termux-Widget">Termux:Widget</h2><p>提供了 Andorid 的 Termux 小部件。</p><ul><li><a href="https://play.google.com/store/apps/details?id=com.termux.widget">Termux:Widget Google Play 下载地址</a></li><li><a href="https://f-droid.org/packages/com.termux.widget/">Termux:Widget F-Droid 下载地址</a></li></ul><blockquote><p>请勿在 Google Play 和 F-Droid 之间混合安装 Termux 和 插件。</p></blockquote><p><img src="https://image.3001.net/images/20200420/1587395400685.jpg" alt="img"></p><p>依然是收费插件，比较冷门，使用场景很少，不推荐大家入手这个，所以用法这里国光就不列出了。(这个偷懒的理由很好 2333)</p><h1>无聊专区</h1><p>一些无聊有趣的知识，如果你是一个正经讲究人，可以跳过这个版块以节约你的阅读时间。</p><h2 id="cmatrix">cmatrix</h2><p>《黑客帝国》的代码雨视觉特效。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install cmatrix</span><br><span class="line">cmatrix</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874294451476.jpg" alt="img"></p><h2 id="cowsay">cowsay</h2><p>cowsay 命令是一个有趣的命令，它会用 ASCII 字符描绘牛，羊和许多其他动物，还可以附带上个自定义文本，很巧的是 Termux 也封装了这个工具。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg intall cowsay</span><br><span class="line">cowsay -f 动物 内容</span><br></pre></td></tr></table></figure><p>内置如下动物：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cowsay -l list</span><br><span class="line"></span><br><span class="line">Cow files <span class="keyword">in</span> /data/data/com.termux/files/usr/share/cows:</span><br><span class="line">beavis.zen bong bud-frogs bunny cheese cower daemon default dragon</span><br><span class="line">dragon-and-cow elephant elephant-in-snake eyes flaming-sheep ghostbusters</span><br><span class="line">head-in hellokitty kiss kitty koala kosh luke-koala meow milk moofasa moose</span><br><span class="line">mutilated ren sheep skeleton stegosaurus stimpy three-eyes turkey turtle</span><br><span class="line">tux vader vader-koala www</span><br></pre></td></tr></table></figure><p>国光的简单示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cowsay -f eyes <span class="string">&#x27;法外狂徒张三&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874299303178.jpg" alt="img"></p><h2 id="figlet">figlet</h2><p>FIGlet 是创建一个简单的命令行实用程序，用于创建 ASCII logo。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install figlet</span><br><span class="line">figlet -f 字体 <span class="string">&#x27;文本内容&#x27;</span></span><br></pre></td></tr></table></figure><p>内置如下样式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ls $PREFIX/share/figlet</span><br><span class="line"></span><br><span class="line">646-ca.flc   646-jp.flc   8859-7.flc      circle.tlf    mini.flf       smbraille.tlf</span><br><span class="line">646-ca2.flc  646-kr.flc   8859-8.flc      digital.flf   mnemonic.flf   smmono12.tlf</span><br><span class="line">646-cn.flc   646-no.flc   8859-9.flc      emboss.tlf    mono12.tlf     smmono9.tlf</span><br><span class="line">646-cu.flc   646-no2.flc  ascii12.tlf     emboss2.tlf   mono9.tlf      smscript.flf</span><br><span class="line">646-de.flc   646-pt.flc   ascii9.tlf      frango.flc    moscow.flc     smshadow.flf</span><br><span class="line">646-dk.flc   646-pt2.flc  banner.flf      future.tlf    pagga.tlf      smslant.flf</span><br><span class="line">646-es.flc   646-se.flc   big.flf         hz.flc        script.flf     standard.flf</span><br><span class="line">646-es2.flc  646-se2.flc  bigascii12.tlf  ilhebrew.flc  shadow.flf     term.flf</span><br><span class="line">646-fr.flc   646-yu.flc   bigascii9.tlf   ivrit.flf     slant.flf      upper.flc</span><br><span class="line">646-gb.flc   8859-2.flc   bigmono12.tlf   jis0201.flc   small.flf      ushebrew.flc</span><br><span class="line">646-hu.flc   8859-3.flc   bigmono9.tlf    koi8r.flc     smascii12.tlf  uskata.flc</span><br><span class="line">646-irv.flc  8859-4.flc   block.flf       lean.flf      smascii9.tlf   utf8.flc</span><br><span class="line">646-it.flc   8859-5.flc   bubble.flf      letter.tlf    smblock.tlf    wideterm.tlf</span><br></pre></td></tr></table></figure><p>国光的演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">figlet -f future <span class="string">&#x27;www.sqlsec.com&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874311007168.jpg" alt="img"></p><h2 id="hollywood">hollywood</h2><p>在 Linux 终端中伪造好莱坞黑客屏幕，假装自己是一名黑客。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install hollywood</span><br><span class="line">hollywood</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/1587430290862.jpg" alt="国光差点就信了"></p><h2 id="neofetch">neofetch</h2><p>Neofetch 是一个简单但有用的命令行系统信息工具。它会收集有关系统软硬件的信息，并在终端中显示结果。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install neofetch</span><br><span class="line">neofetch</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874278755324.jpg" alt="img"></p><h2 id="nyancat">nyancat</h2><p><strong>彩虹貓</strong>（英语： <strong>Nyan Cat</strong>）是在 2011 年 4 月上传在 Youtube 的视频，并且迅速爆红于网络，並在 2011 年 YouTube 浏览量最高的视频中排名第五，B 站这个小猫也很多，主要是 BGM 比较魔性，感兴趣的朋友可以自己去搜索看看。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install nyancat</span><br><span class="line">nyancat</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873965321494.jpg" alt="喵喵喵喵"></p><p>使用 <code>Ctrl + C</code> 快捷键退出魔性循环</p><h2 id="screenfetch">screenfetch</h2><p>Screenfetch 是一个适用于 Linux 的小工具，用于显示系统信息及 ASCII 化的 Linux 发行版图标。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install screenfetch</span><br><span class="line">screenfetch</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874280449502.jpg" alt="img"></p><p>显示其他 Linux 发行版的 logo：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screenfetch -A 发行版</span><br></pre></td></tr></table></figure><p>现在内置的发行版 logo 有：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ALDOS,</span> <span class="string">Alpine Linux, Amazon Linux, Antergos, Arch Linux (Old and Current</span></span><br><span class="line">    <span class="attr">Logos),</span> <span class="string">ArcoLinux, Artix Linux, blackPanther OS, BLAG, BunsenLabs, CentOS,</span></span><br><span class="line">    <span class="attr">Chakra,</span> <span class="string">Chapeau, Chrome OS, Chromium OS, CrunchBang, CRUX, Debian, Deepin,</span></span><br><span class="line">    <span class="attr">DesaOS,Devuan,</span> <span class="string">Dragora, elementary OS, EuroLinux, Evolve OS, Sulin, Exherbo,</span></span><br><span class="line">    <span class="attr">Fedora,</span> <span class="string">Frugalware, Fuduntu, Funtoo, Fux, Gentoo, gNewSense, Guix System,</span></span><br><span class="line">    <span class="attr">Hyperbola</span> <span class="string">GNU/Linux-libre, januslinux, Jiyuu Linux, Kali Linux, KaOS, KDE neon,</span></span><br><span class="line">    <span class="attr">Kogaion,</span> <span class="string">Korora, LinuxDeepin, Linux Mint, LMDE, Logos, Mageia,</span></span><br><span class="line">    <span class="attr">Mandriva/Mandrake,</span> <span class="string">Manjaro, Mer, Netrunner, NixOS, OBRevenge, openSUSE, OS</span></span><br><span class="line">    <span class="attr">Elbrus,</span> <span class="string">Oracle Linux, Parabola GNU/Linux-libre, Pardus, Parrot Security,</span></span><br><span class="line">    <span class="attr">PCLinuxOS,</span> <span class="string">PeppermintOS, Proxmox VE, PureOS, Qubes OS, Raspbian, Red Hat</span></span><br><span class="line">    <span class="attr">Enterprise</span> <span class="string">Linux, ROSA, Sabayon, SailfishOS, Scientific Linux, Siduction,</span></span><br><span class="line">    <span class="attr">Slackware,</span> <span class="string">Solus, Source Mage GNU/Linux, SparkyLinux, SteamOS, SUSE Linux</span></span><br><span class="line">    <span class="attr">Enterprise,</span> <span class="string">SwagArch, TinyCore, Trisquel, Ubuntu, Viperr, Void and Zorin OS and</span></span><br><span class="line">    <span class="attr">EndeavourOS</span></span><br></pre></td></tr></table></figure><p>内置的操作系统 logo 有：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dragonfly/Free/Open/Net BSD, Haiku, Mac OS X, Windows</span><br></pre></td></tr></table></figure><h2 id="sl">sl</h2><p>某编程牛人也经常犯把 ls 敲成 sl 的错误，所以他自己编了一个程序娱乐一下，这个程序的作用很简单，就是当你输入 sl 的时候终端会出现一个火车呼啸而过～～</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install sl</span><br><span class="line">sl</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874292623441.jpg" alt="img"></p><h2 id="toilet">toilet</h2><p>toilet 能用字母拼写出更大字母的工具，具体拼出什么字由命令后面的参数决定，不仅如此，它还能打印出各种风格的效果，比如彩色，金属光泽等。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install toilet</span><br><span class="line">toilet -f 字体 -F 颜色参数 <span class="string">&#x27;文本信息&#x27;</span></span><br></pre></td></tr></table></figure><p>内置如下字体：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> <span class="variable">$PREFIX</span>/share/figlet</span><br><span class="line"></span><br><span class="line">ascii12.tlf     bigmono12.tlf  emboss2.tlf  mono9.tlf      smblock.tlf    wideterm.tlf</span><br><span class="line">ascii9.tlf      bigmono9.tlf   future.tlf   pagga.tlf      smbraille.tlf</span><br><span class="line">bigascii12.tlf  circle.tlf     letter.tlf   smascii12.tlf  smmono12.tlf</span><br><span class="line">bigascii9.tlf   emboss.tlf     mono12.tlf   smascii9.tlf   smmono9.tlf</span><br></pre></td></tr></table></figure><p>内置如下颜色效果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ toilet --filter list</span><br><span class="line"></span><br><span class="line">Available filters:</span><br><span class="line"><span class="string">&quot;crop&quot;</span>: crop unused blanks</span><br><span class="line"><span class="string">&quot;gay&quot;</span>: add a rainbow colour effect</span><br><span class="line"><span class="string">&quot;metal&quot;</span>: add a metallic colour effect</span><br><span class="line"><span class="string">&quot;flip&quot;</span>: flip horizontally</span><br><span class="line"><span class="string">&quot;flop&quot;</span>: flip vertically</span><br><span class="line"><span class="string">&quot;180&quot;</span>: rotate 180 degrees</span><br><span class="line"><span class="string">&quot;left&quot;</span>: rotate 90 degrees counterclockwise</span><br><span class="line"><span class="string">&quot;right&quot;</span>: rotate 90 degrees clockwise</span><br><span class="line"><span class="string">&quot;border&quot;</span>: surround text with a border</span><br></pre></td></tr></table></figure><p>国光的简单演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">toilet -f mono12 -F gay <span class="string">&#x27;Bilibili&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874290774172.jpg" alt="img"></p><h2 id="搭建-mc-基岩服务器">搭建 mc 基岩服务器</h2><blockquote><p>本版块由初学生 KeySummer 提供，QQ 为：1505708353 有这方面问题可以找他交流哦。</p></blockquote><p>搭建 mc 基岩服务器首先得了解跨 CPU 技术，具体安装方法可以参考 <a href="https://gitee.com/mo2/linux">Gitee -Moe/Tmoe-linux</a> ，在安装过程中请安装 ubuntu，以便与直接开服。然后输入 debian 就可以进入我的跨 cpu 的容器里了，然后大家可以去：<a href="https://www.minecraft.net/zh-hans/download/server/bedrock">https://www.minecraft.net/zh-hans/download/server/bedrock</a> 网址内找到 Ubuntu 版的下载按钮，然后复制连接回到 Termux 内的 Ubuntu 后输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> mc </span><br><span class="line"><span class="built_in">cd</span> mc </span><br><span class="line">wget https://minecraft.azureedge.net/bin-linux/bedrock-server-1.16.201.02.zip</span><br><span class="line">apt install unzip</span><br><span class="line">unzip bedrock-server-1.16.201.02.zip</span><br></pre></td></tr></table></figure><p>然后输入 <code>LD_LIBRARY_PATH=. ./bedrock_server</code> 即可（树莓派和此办法一样，Ubuntu 则不需要前面的跨 CPU 步骤，直接进行最后的 2，3 两步即可），祝你们好运。</p><h2 id="终端二维码">终端二维码</h2><p>Linux 命令行下的二维码，主要核心是这个网址：<code>http://qrenco.de/</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;https://www.sqlsec.com&quot;</span> |curl -F-=\&lt;- qrenco.de</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873974595369.png" alt="img"></p><p>如果你不嫌无聊的话还可以扫描这个二维码，然后就又打开我的这篇文章了。</p><h1>文章总结</h1><p>相对来说 国外的 Termux DIY 的氛围比国内好很多，Youtube 上的视频都有很高的播放量。当然国内也有这么一批执着于 <code>Termux</code> 的玩家，当初写完这篇文章的时候，相对来说还比较小众的，写这篇文章只想让更多的人认识到 <code>Termux</code> 的生产力，使用 <code>Termux</code> 来做一些很 cool 的事情。 期待有更多 <code>Termux</code> 的优秀文章出现～</p><p>另外如果你喜欢这篇文章的话 不防点一下网站最下方不起眼的广告表示支持！Thanks♪(･ω･)ﾉ</p><p>本文可能实际上也没有啥技术含量，但是写起来还是比较浪费时间的，在这个喧嚣浮躁的时代，个人博客越来越没有人看了，写博客感觉一直是用爱发电的状态。如果你恰巧财力雄厚，感觉本文对你有所帮助的话，可以考虑打赏一下本文，用以维持高昂的服务器运营费用（域名费用、服务器费用、CDN 费用等）</p><hr><p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/%3Ca%20href=https:/www.sqlsec.com/2018/05/termux.html#%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%3Ehttps:/www.sqlsec.com/2018/05/termux.html#%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%3C/a%3E">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(<a href=https://image.3001.net/images/20200922/16007336487809.jpg>https://image.3001.net/images/20200922/16007336487809.jpg</a>)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Termux 高级终端安装使用配置教程</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div></p>]]></content>
    
    
    <summary type="html">信息安全、官方插件、无聊专区</summary>
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="termux" scheme="https://aizhiqian.github.io/tags/termux/"/>
    
    <category term="Android" scheme="https://aizhiqian.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>【Termux】高级终端安装使用配置教程 4</title>
    <link href="https://aizhiqian.github.io/posts/bc98c85d/"/>
    <id>https://aizhiqian.github.io/posts/bc98c85d/</id>
    <published>2023-07-22T18:01:20.000Z</published>
    <updated>2023-07-22T18:01:20.000Z</updated>
    
    <content type="html"><![CDATA[<h1>1  网站搭建</h1><p>网站搭建这一块实际上原理是大同小异的，国光这里只写几个网站的安装方法，给大家提供一个思路。</p><h2 id="1-1-DVWA">1.1 DVWA</h2><p>DVWA 是一个用来搞 Web 安全从业者入门使用的一个练习靶场，用来学习掌握基本的漏洞原理使用的，如果你对 Web 安全不感兴趣的话可以直接跳过这一个小节。</p><blockquote><p>国光建议 DVWA 练习的时候 要结合源码去分析漏洞 不要直接把网上攻击流程走一步就草草了之了 不看源码的学习 等于啥都没有学</p></blockquote><h3 id="1-1-1-环境准备">1.1.1 环境准备</h3><p>因为 DVWA 靶场是 PHP 编写的，所以你需要 提前配置好 Nginx 、PHP 以及 数据库，关于这方面配置可以参考前面<strong>开发环境</strong>下分类的「Nginx」、「MariaDB (MySQL)」和 「Nginx 解析 PHP」章节</p><h3 id="1-1-2-下载-DVWA">1.1.2 下载 DVWA</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/ethicalhack3r/DVWA/archive/master.zip</span><br></pre></td></tr></table></figure><p>如果访问 Github 比较慢的话，可以尝试如下链接：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://hub.fastgit.org/ethicalhack3r/DVWA/archive/master.zip</span><br></pre></td></tr></table></figure><h3 id="1-1-3-解压到-Nginx-目录下">1.1.3 解压到 Nginx 目录下</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 解压</span><br><span class="line">unzip master.zip -d $PREFIX/share/nginx/html/</span><br><span class="line"></span><br><span class="line"># 重命名</span><br><span class="line">cd $PREFIX/share/nginx/html/</span><br><span class="line">mv DVWA-master dvwa</span><br></pre></td></tr></table></figure><h3 id="1-1-4-新建数据库">1.1.4 新建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="operator">-</span>e&quot;create database dvwa;show databases;&quot;</span><br></pre></td></tr></table></figure><blockquote><p><code>***</code> 这里是 mysql 的密码</p></blockquote><p><img src="https://image.3001.net/images/20200421/15874570678054.jpg" alt="img"></p><p>可以看到 <code>dvwa</code> 数据库已经新建成功了。</p><h3 id="1-1-5-编辑-DVWA-配置文件">1.1.5 编辑 DVWA 配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 将配置文件 还原为 PHP 后缀</span><br><span class="line">cd $PREFIX/share/nginx/html/dvwa/config</span><br><span class="line">mv config.inc.php.dist config.inc.php</span><br><span class="line"></span><br><span class="line"># 编辑配置文件</span><br><span class="line">vim mv config.inc.php.dist config.inc.php</span><br></pre></td></tr></table></figure><p>只需要定位找到如下内容 根据你的实际情况填写就可以了：</p><p><img src="https://image.3001.net/images/20200421/15874574737335.jpg" alt="img"></p><h3 id="1-1-6-初次访问测试网站">1.1.6 初次访问测试网站</h3><p>按照上述配置好 DVWA 之后，浏览器访问：<a href="http://192.168.31.124:8080/dvwa/setup.php">http://192.168.31.124:8080/dvwa/setup.php</a></p><p>可以看到 <code>allow_url_include</code> 运行 URL 远程包含没有开启，我们得手动开启一下：</p><p><img src="https://image.3001.net/images/20200421/15874587489432.jpg" alt="img"></p><p>实际上正常人是不会去开启这个的，十分危险，但是 DVWA 是一个靶场，有些漏洞实际上就是利用 PHP 配置不当造成的，这样才让新手有攻击下来的信心。</p><h3 id="1-1-7-配置-php-ini">1.1.7 配置 php.ini</h3><p>Termux 下默认是没有 php.ini 文件的，不信我们手动来查找一下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">php --ini</span><br><span class="line"></span><br><span class="line">Configuration File (php.ini) Path: /data/data/com.termux/files/usr/lib</span><br><span class="line">Loaded Configuration File:         (none)</span><br><span class="line">Scan for additional .ini files in: (none)</span><br><span class="line">Additional .ini files parsed:      (none)</span><br></pre></td></tr></table></figure><p>发现 php.ini 的文件应该存放在 /data/data/com.termux/files/usr/lib 目录下，但是 PHP 没有找到配置文件，所以需要我们手动在这个目录下新建 php.ini 配置文件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;allow_url_include = On&#x27; &gt; $PREFIX/lib/php.ini</span><br></pre></td></tr></table></figure><blockquote><p>注意这是一个不安全的配置 只是为了配合本地的 DVWA 靶场 做模拟黑客攻击练习使用的</p></blockquote><p>配置完成后，自己尝试使用 <code>php --ini</code> 来定位搜索配置文件，会发现 PHP 已经找到了配置文件了。</p><p>修改完配置文件后 得重启 <code>php-fpm</code> 服务:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 杀掉 php-fpm 相关的进程</span><br><span class="line">kill -9 `pgrep fpm`</span><br><span class="line"></span><br><span class="line"># 再次启动 php-fpm</span><br><span class="line">php-fpm</span><br></pre></td></tr></table></figure><h3 id="1-1-8-再次访问测试网站">1.1.8 再次访问测试网站</h3><p>浏览器访问: <a href="http://192.168.31.124:8080/dvwa/setup.php">http://192.168.31.124:8080/dvwa/setup.php</a></p><p>可以看到刚刚的配置文件生效了，现在安全检查全部通过</p><p><img src="https://image.3001.net/images/20200421/15874597788397.jpg" alt="img"></p><p>既然 安全检查通过的话，那么就直接页面滚动到最下面直接点击 <strong>Create/Reset Database 初始化数据库</strong>按钮即可，初始化成功后会自动跳转到登录界面。</p><p>DVWA 默认的用户有 5 个，用户名密码如下：</p><table><thead><tr><th>用户名</th><th>密码</th></tr></thead><tbody><tr><td>admin</td><td>password</td></tr><tr><td>gordonb</td><td>abc123</td></tr><tr><td>1337</td><td>charley</td></tr><tr><td>pablo</td><td>letmein</td></tr><tr><td>smithy</td><td>password</td></tr></tbody></table><p>登录成功的效果图：</p><p><img src="https://image.3001.net/images/20200421/15874601246066.jpg" alt="img"></p><h2 id="1-2-Hexo">1.2 Hexo</h2><p>Hexo 是一个用 Nodejs 编写的快速、简洁且高效的博客框架。Hexo 使用 Markdown 解析文章，在几秒内，即可利用靓丽的主题生成静态网页。另外大家看到国光我的博客就是使用 Hexo 搭建的哦。</p><h3 id="1-2-1-安装-Hexo">1.2.1 安装 Hexo</h3><p>Hexo 是用 Nodejs 编写的，所以安装的话得使用 npm 命令来安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>安装完成的话，顺便看一下 Hexo 相关的版本信息吧：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure><h3 id="1-2-2-Hexo-基本部署">1.2.2 Hexo 基本部署</h3><p>我们建立一个目录，然后到这个目录下初始化 Hexo 环境：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 手动创建一个目录</span><br><span class="line">mkdir hexo  </span><br><span class="line"></span><br><span class="line"># 进入目录下并初始化Hexo环境</span><br><span class="line">cd hexo  </span><br><span class="line">hexo init  </span><br><span class="line"></span><br><span class="line">#生成静态文件 启动Hexo</span><br><span class="line">hexo g</span><br><span class="line">hexo s      </span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20180502/15251904412057.png" alt="img"></p><p>然后就跑起来一个最基本的 Hexo 博客，关于 Hexo 博客的详细教程，建议搭建去参考 Hexo 官方文档，我这里重点在于 Termux 其他的不作过多的叙述。</p><p>使用浏览器访问: <code>http://127.0.0.1:4000</code> 即可看到 Hexo 的效果图：</p><p><img src="https://image.3001.net/images/20180502/1525190501582.png" alt="img"></p><h3 id="1-2-3-Hexo-部署到-Nginx">1.2.3 Hexo 部署到 Nginx</h3><p>Hexo 是纯静态博客，官方默认把 Hexo 搭建在 Github Pages 仅仅是把 Hexo 根目录的 public 文件夹即 Hexo 生成的纯 HTML 源码部署到上面而已。所以知道这样原理 我们就可以轻而易举地将 Hexo 部署到 Nginx 下面。</p><h4 id="生成-HTML-纯静态源码">生成 HTML 纯静态源码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873445427891.jpg" alt="img"></p><p>可以看到 Hexo 的根目录下 已经生成了 public 文件夹了</p><h4 id="拷贝源码搭到-Nginx">拷贝源码搭到 Nginx</h4><p>现在我们只需要将 public 的文件夹里面的源码 全部拷贝到 Nginx 的网站根目录下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 在 nginx 根目录下新建 hexo 文件夹</span><br><span class="line">mkdir $PREFIX/share/nginx/html/hexo</span><br><span class="line"></span><br><span class="line"># 拷贝 源码到 nginx 下</span><br><span class="line">cp -rf public/* $PREFIX/share/nginx/html/hexo</span><br></pre></td></tr></table></figure><h4 id="访问效果查看">访问效果查看</h4><p>浏览器访问:<code>http://127.0.0.1:8080/hexo/</code> 即可看到效果：</p><p><img src="https://image.3001.net/images/20200420/15873451349295.jpg" alt="img"></p><p>当然这里网站的 CSS 等样式没有加载出来，这个原因是 Hexo 对网站目录下部署并不友好 ，大概有如下解决方法：</p><ol><li>Nginx vhosts 配置多域名，这个服务器上常用的操作，但是 Termux 里面实现难度较高</li><li>将 Hexo 的源码 直接拷贝到 Nginx 的根目录下，不用拷贝到 html/hexo 目录下了，然后直接访问 <code>http://127.0.0.1:8080</code> 即可看到效果</li></ol><p>国光这里就只是说一下这个思路，因为强迫症的我不能忍受 Nginx 根目录的文件 乱七八糟 =，= 大家想尝试的话 按照我这个思路去尝试就可以了。</p><h2 id="1-3-KodExplorer">1.3 KodExplorer</h2><p>KodExplorer 是一款开源文件资源管理器，搭建起来很简单，我们也可以在 Termux 搭建，这样就可以实现 Temux 下的文件分享了，十分优雅方便。在我的这篇文章：<a href="https://www.sqlsec.com/2019/11/kode.html">https://www.sqlsec.com/2019/11/kode.html</a> 里面也讲解了 macOS 下的安装。</p><h3 id="1-3-1-下载解压-Kod">1.3.1 下载解压 Kod</h3><p><strong>官网的下载地址</strong>：<a href="https://kodcloud.com/download/">https://kodcloud.com/download/</a></p><p>我们拷贝下载链接后，使用 wegt 可以直接下载：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 下载</span><br><span class="line">wget http://static.kodcloud.com/update/download/kodexplorer4.40.zip</span><br><span class="line"></span><br><span class="line"># 解压 到 Nginx 的 kod 目录下</span><br><span class="line">unzip kodexplorer4.40.zip -d $PREFIX/share/nginx/html/kod</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873462656808.jpg" alt="img"></p><h3 id="1-3-2-安装设置-Kod">1.3.2 安装设置 Kod</h3><blockquote><p>Nginx 确保已经配置可以解析 PHP，如果没有配置好，那么请参考 上文的 「开发环境」小节</p></blockquote><p>手机浏览器访问: <a href="http://127.0.0.1:8080/kod">http://127.0.0.1:8080/kod</a> 即可进入设置管理密码界面：</p><p><img src="https://image.3001.net/images/20200420/15873466781678.jpg" alt="img"></p><p>设置完密码登录看看，建议大家在 Kod 里面设置电脑版视图，效果很赞，下面是主界面截图：</p><p><img src="https://image.3001.net/images/20200420/15873467695847.jpg" alt="推荐大家使用电脑版"></p><p>当然在局域网的情况下，通过 IP 地址，局域网的其他设备也是可以轻松访问到你的文件的，文件共享目的达成。</p><h2 id="1-4-WordPress">1.4 WordPress</h2><p>WordPress 是一个以 PHP 和 MySQL 为平台的自由开源的博客软件和内容管理系统。如果你的 Termux 没有配置好 MySQL、PHP、Nginx 的话 那么请参考上面的 <code>开发环境</code> 章节来进行配置。</p><h3 id="1-4-1-新建数据库">1.4.1 新建数据库</h3><p>网站需要数据库，在安装 WordPress 前我们先需要新建一个数据库，以供后面的网站安装：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="operator">-</span>e&quot;create database wordpress;show databases;&quot;</span><br></pre></td></tr></table></figure><blockquote><p><code>***</code> 这里是 mysql 的密码</p></blockquote><p><img src="https://image.3001.net/images/20200420/15873422525786.jpg" alt="img"></p><p>可以看到 <code>wordpress</code> 数据库已经新建成功了。</p><h3 id="1-4-2-下载-WordPress">1.4.2 下载 WordPress</h3><p><strong>WordPress 历届版本</strong>: <a href="https://cn.wordpress.org/download/releases/">https://cn.wordpress.org/download/releases/</a></p><p>选择最新的版本后，复制下载的直链，那么就开始用 wget 下载并解压吧：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#  wget 下载</span><br><span class="line">wget https://cn.wordpress.org/wordpress-5.4-zh_CN.zip</span><br><span class="line"></span><br><span class="line"># unzip 解压 没有安装unzip请自行安装</span><br><span class="line">unzip wordpress-4.9.4-zh_CN.zip</span><br><span class="line"></span><br><span class="line"># 将解压的文件夹移动到 nginx 网站根目录下</span><br><span class="line">mv wordpress/ $PREFIX/share/nginx/html</span><br></pre></td></tr></table></figure><blockquote><p>如果 WordPress 官网这个下载又问题的话，可以多尝试几次，也可以通过如下渠道来下载</p></blockquote><ol><li>WordPress Too Many Requests 出现这种报错，多半是中国的 IP 又被国外屏蔽了，可以尝试使用迅雷来下载</li><li>挂代理来下载</li><li>百度找国内的第三方非官方下载站下载（不是很推荐）</li></ol><h3 id="1-4-3-配置-Nginx-解析">1.4.3 配置 Nginx 解析</h3><p>如果你读过前面的「开发环境」、「Nginx」、「Nginx 解析 PHP」三个小节的话，这里直接启动 php-fpm 和 Nginx 即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">php-fpm</span><br><span class="line">nginx</span><br></pre></td></tr></table></figure><blockquote><p>当然如果你的 php-fpm 和 Nginx 服务以及启动的话 就直接跳到下一步吧</p></blockquote><h3 id="1-4-4-安装-WordPress">1.4.4 安装 WordPress</h3><p>浏览器访问: <code>http://127/.0.0.1/wordpress/</code> 进行 WordPress 的安装，根据提示填写好自己的数据库信息即可安装，详细这一步大家都懂的，国光这里直接放安装好的效果图吧：</p><p><img src="https://image.3001.net/images/20200420/15873435661903.jpg" alt="WordPress的后台"></p><h1>2  系统安装</h1><p>Termux 可以安装其他 Linux 发行版系统，核心用到的工具是 chroot ，所以我们得确保安装系统的时候 <code>proot</code> 这个包你是安装好的，然后因为操作系统店都有官方维护的脚本，所以安装起来甚至比我们前面配置的开发环境还要简单，下面来具体的介绍吧。</p><h2 id="2-1-实用必备工具">2.1 实用必备工具</h2><p>有能力的朋友以下工具可以直接在 F-Droid 或者 Google Play 商店里面下载最新的版本，国光这里就简单列举搬运一下：</p><table><thead><tr><th>软件</th><th>下载地址</th><th>说明</th></tr></thead><tbody><tr><td>VNC Viewer 3.6.1.42089 汉化版</td><td><a href="https://sqlsec.lanzoux.com/ibq43wb">蓝奏云</a></td><td>远程连接使用</td></tr><tr><td>NetHunter KeX 4.0.7-6</td><td><a href="https://sqlsec.lanzoux.com/ibq4akb">蓝奏云</a></td><td>Kali 官方 远程连接工具</td></tr><tr><td>AnLinux 6.10</td><td><a href="https://sqlsec.lanzoux.com/ibq4iuj">蓝奏云</a></td><td>提供比较全面的系统安装脚本</td></tr><tr><td>AndroNix 4.2</td><td>Google Play</td><td>提供比较全面的系统安装脚本</td></tr></tbody></table><p>VNC 工具的隐藏技巧，首先我们默认使用 VNC Viewer 这个工具远程是下图这张效果，可以看到并没有占满全屏，强迫症无法接受：</p><p><img src="https://image.3001.net/images/20200421/15874781368918.jpg" alt="VNC Viewer"></p><p>然后使用 Kali 官方的 NetHunter KeX 远程连接，屏幕就完全被充分利用了：</p><p><img src="https://image.3001.net/images/20200421/15874782726974.jpg" alt="NetHunter KeX"></p><p>但是 NetHunter Kex 在远程操作体验上又不如 VNC Viewer 舒服，难道鱼和熊掌就无法兼得了吗？ 当然可以！！！ 经过国光测试，这个时候后台关掉 NetHunter KeX 的时候呢，再用 VNC Viewer 就可以完美的利用手机的全部屏幕空间了，岂不是美哉。</p><h2 id="2-2-Kali-NetHunter">2.2 Kali NetHunter</h2><p>Kali NetHunter 是基于 Kali Linux 的免费、开源的 Android 设备移动渗透测试平台，安全从业者必备的操作系统。</p><h3 id="2-2-1-安装-Kali-NetHunter">2.2.1 安装 Kali NetHunter</h3><p>Kali 官网提供的完整的安装命令如下，下面国光标上注释方便大家理解:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 申请存储访问权限</span><br><span class="line">termux-setup-storage</span><br><span class="line"></span><br><span class="line"># 安装 wget</span><br><span class="line">pkg install wget</span><br><span class="line"></span><br><span class="line"># 下载 安装脚本</span><br><span class="line">wget -O install-nethunter-termux https://offs.ec/2MceZWr </span><br><span class="line"></span><br><span class="line"># 给脚本执行权限</span><br><span class="line">chmod +x install-nethunter-termux </span><br><span class="line"></span><br><span class="line"># 运行安装脚本</span><br><span class="line">./install-nethunter-termux</span><br></pre></td></tr></table></figure><p>里面很多操作我们之前都做了，所以现在只需要如下几步即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 下载 安装脚本</span><br><span class="line">wget -O install-nethunter-termux https://offs.ec/2MceZWr </span><br><span class="line"></span><br><span class="line"># 如果上面这一步卡的话，可以使用国光我放到国内的脚本</span><br><span class="line">wget -O install-nethunter-termux https://html.sqlsec.com/install-nethunter-termux.txt</span><br><span class="line"></span><br><span class="line"># 给脚本执行权限</span><br><span class="line">chmod +x install-nethunter-termux </span><br><span class="line"></span><br><span class="line"># 运行安装脚本</span><br><span class="line">./install-nethunter-termux</span><br></pre></td></tr></table></figure><blockquote><p>下载包大概 1GB+ 左右安装过程比较慢，国光这里建议大家挂代理下载，提供效率和成功率</p></blockquote><p>如果你没有代理怎么办？ <a href="https://images.kali.org/nethunter/kalifs-arm64-full.tar.xz">https://images.kali.org/nethunter/kalifs-arm64-full.tar.xz</a> 这个就是最大的 1GB+ 的数据包，复制链接地址到迅雷等下载工具里面下载下来，然后拷贝到 Termux 手机的安装脚本同级目录下，或者直接更改脚本把这个数据包的下载地址替换为局域网的地址都可以方法有很多 大家可以自行发挥。</p><p>安装成功的效果图如下：</p><p><img src="https://image.3001.net/images/20200421/15874521922608.jpg" alt="img"></p><h3 id="2-2-2-基本使用命令">2.2.2 基本使用命令</h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><strong>nethunter</strong></td><td>启动 Kali NetHunter 命令行界面</td></tr><tr><td><strong>nethunter kex passwd</strong></td><td>配置 KeX 密码 (仅在第一次使用前需要)</td></tr><tr><td><strong>nethunter kex &amp;</strong></td><td>开始 KeX 会话服务</td></tr><tr><td><strong>nethunter kex stop</strong></td><td>停止 Kali NetHunter 桌面</td></tr><tr><td><strong>nethunter</strong></td><td>在 NetHunter 环境中运行命令</td></tr><tr><td><strong>nethunter -r</strong></td><td>以 root 身份启动 Kali NetHunterk 命令行界面</td></tr><tr><td><strong>nethunter -r kex passwd</strong></td><td>配置 root 用户的 KeX 密码</td></tr><tr><td><strong>nethunter -r kex &amp;</strong></td><td>以 root 身份开始 KeX 会话服务</td></tr><tr><td><strong>nethunter -r kex stop</strong></td><td>停止 root 身份运行的 KeX 会话服务</td></tr><tr><td><strong>nethunter -r kex kill</strong></td><td>杀掉所有的 KeX 会话</td></tr><tr><td><strong>nethunter -r</strong></td><td>以 root 身份在 NetHunter 环境中运行命令</td></tr></tbody></table><blockquote><p>nethunter 命令可以缩写成 nh ，Kali NetHunter 默认的用户名 kali 的密码也是 kali</p><p>root 密码没有设置 可以输入 sudo passwd 来修改 root 用户的密码</p></blockquote><p><img src="https://image.3001.net/images/20200421/15874636577312.jpg" alt="img"></p><p>Kali 命令行的使用国光不在废话了，下面就列几个点，大家可以关注一下:</p><ol><li>Kali Linux 不需要换源，官方源会自动选择最佳的服务器节点（如果官方源卡的话 再考虑换国内源）</li><li>root 用户 无法使用 nmap ，所以 nmap 的一些需要高权限的参数无法正常使用</li><li>完整安装 kali 工具集合可以使用 <strong>apt install kali-linux-default</strong> 大小大概为 2.6GB 左右 国光不建议这样操作，需要啥工具自己单独安装即可，没有必要全部安装</li><li>Galaxy 系列手机可能会阻止非 root 用户使用 sudo，只需使用 <strong>su -c</strong> 代替</li></ol><h3 id="2-2-3-启动-VNC-服务">2.2.3 启动 VNC 服务</h3><p>上面命令表中的 KeX 服务，实际上就是 VNC 服务，默认的端口是 5901 端口，首先 Termux 下启动 Kali 的 VNC：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nh kex &amp;</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874772042978.jpg" alt="img"></p><p>图片上可以得出 KeX 服务的端口是 5901，然后进程的 ID 是 17222，可以使用 nmap 或者 netstat 命令再检测一下 5901 端口是否打开。</p><h3 id="2-2-4-VNC-工具连接">2.2.4 VNC 工具连接</h3><p>VNC 连接还需要密码，所以这里手动设置一下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nh kex passwd</span><br></pre></td></tr></table></figure><p>设置完成之后级可以在 VNC 连接工具里面填写相应的信息即可连接了，记得端口号要加上：</p><p><img src="https://image.3001.net/images/20200421/15874788054699.jpg" alt="img"></p><p>VNC 关掉连接后，想要停止 Kex 服务即 VNC 服务，Termu 下使用如下命令即可退出服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nh kex stop</span><br></pre></td></tr></table></figure><h2 id="2-3-其他-Linux-系统">2.3 其他 Linux 系统</h2><p><strong>Termux 安装 Linux 系统项目地址</strong>：<a href="https://github.com/sqlsec/termux-install-linux">https://github.com/sqlsec/termux-install-linux</a></p><p>这个脚本国光我磨磨蹭蹭写了 1 天才写完，筛选下来的系统都是体验还不错的系统。</p><p><img src="https://image.3001.net/images/20200423/15876456241183.jpg" alt="img"></p><p>下载的主要镜像全部托管在了 Gitee 上，下载速度很快，而且系统对应的更新源国光均替换为国内源了，安装和卸载都很容易上手，用户非预期的输入也都考虑到了，目前完美支持 Ubuntu、Kali、Debian、CentOS、Fedora 系统的安装，具体想尝试的话可以输入如下命令体验安装:</p><blockquote><p>确保 Termux 已经安装了 proot 和 Python3 才可以顺利安装</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/sqlsec/termux-install-linux</span><br><span class="line">cd termux-install-linux</span><br><span class="line">python termux-linux-install.py</span><br></pre></td></tr></table></figure><p>系统安装的更多细节图可以参考我的这一篇文章：<a href="https://www.sqlsec.com/2020/04/termuxlinux.html">Android Termux 安装 Linux 就是这么简单</a></p><h1>3  极客行为</h1><p>因为 Termux 各种基础的包都有，所以基本是一个小型的树莓派，所以可折腾性极高，如果你是一个极客玩家，不折腾会死星人的话，那么本章节比较适合你。祝你折腾愉快！</p><h2 id="3-1-Aria2">3.1 Aria2</h2><p>Aria2 是一个轻量级多协议和多源命令行下载实用工具。它支持 HTTP / HTTPS, FTP, SFTP, bt 和 Metalink。最近被封杀的 PanDownload 也是使用的是 Aria2 来加速下载百度网盘里的资源的。本文是一个 Termux 教程，所以关于 Aria2 不会很深入将下去，关于更多 Aria2 的配置教程，大家可以参考网上其他大佬的教程。</p><h3 id="3-1-1-安装-aria2">3.1.1 安装 aria2</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install aria2</span><br></pre></td></tr></table></figure><p>安装完成后 可以顺便看一下版本信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aria2c -v</span><br></pre></td></tr></table></figure><h3 id="3-1-2-启动-rcp-服务">3.1.2 启动 rcp 服务</h3><p>aria2 支持 rpc 服务，默认监听的是 <code>6800</code> 端口。这样我们可以使用开源的 Web 项目来连接操作 aria2：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aria2c --enable-rpc --rpc-listen-all</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873685036548.jpg" alt="img"></p><h3 id="3-1-3-webui-aria2">3.1.3 webui-aria2</h3><p>国光这里选的是这个比较流行的 aria2 的开源项目，地址是：<a href="https://github.com/ziahamza/webui-aria2">https://github.com/ziahamza/webui-aria2</a> 安装运行起来也很简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ziahamza/webui-aria2.git</span><br><span class="line"><span class="built_in">cd</span> webui-aria2</span><br><span class="line">node node-server.js</span><br></pre></td></tr></table></figure><blockquote><p>需要 node 来运行，没有安装的 话使用 <code>pkg install nodejs</code> 来安装</p><p>如果如果下载速度比较慢的话，可以尝试使用 fastgit 镜像地址来下载</p><p>git clone <a href="https://hub.fastgit.org/ziahamza/webui-aria2.git">https://hub.fastgit.org/ziahamza/webui-aria2.git</a></p></blockquote><p><img src="https://image.3001.net/images/20200420/15873690527865.jpg" alt="img"></p><p>运行起来后，浏览器访问:<code>http://localhost:8888</code> 查看效果：</p><p><img src="https://image.3001.net/images/20180502/15252753579498.png" alt="img"></p><p>速度还算可以，有兴趣的朋友可以研究如何利用 <code>aria2</code> 来下载百度云文件之类的操作，更多姿势等你们来探索。</p><h2 id="3-2-SSH">3.2 SSH</h2><p>有时候我们需要通过 ssh 远程连接服务器，这个时候有 Termux，躺在床上就可以操作电脑了，哇！哦哦哦！awesome ，或者我们突然很闲，想要用电脑来远程手机，没错 Termux 都可以做到。</p><h3 id="3-2-1-Termux-ssh-连接电脑">3.2.1 Termux ssh 连接电脑</h3><h4 id="安装-openssh">安装 openssh</h4><p>OpenSSH 是 SSH （Secure SHell） 协议的免费开源实现。SSH 协议族可以用来进行远程控制， 或在计算机之间传送文件。Termux 官方已经封装好了，我们安装起来也会很简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install openssh</span><br></pre></td></tr></table></figure><h4 id="远程连接电脑">远程连接电脑</h4><p>然后就可以直接 ssh 连接你的服务器了，（前提是电脑安装了 ssh 服务)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh sqlsec@192.168.1.8</span><br></pre></td></tr></table></figure><p>手机连接操作电脑效果图：</p><p><img src="https://image.3001.net/images/20180501/15251634576779.png" alt="img"></p><p>附上完整的 Linux SSH 连接命令格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh -p 端口号 用户名@主机名或者IP</span></span><br><span class="line">ssh -p 22 user@hostname_or_ip</span><br><span class="line"></span><br><span class="line"><span class="comment"># ssh -i 私钥 用户名@主机名或者IP</span></span><br><span class="line">ssh -i id_rsa user@hostname_or_ip</span><br></pre></td></tr></table></figure><h4 id="传输文件">传输文件</h4><p>SSH 不仅仅可以远程连接服务器，同样也可以使用 SSH 自带的 <code>scp</code> 命令进行文件传输：</p><p><strong>复制文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp 本地文件路径 远程主机用户名@远程主机名或IP:远程文件保存的位置路径</span></span><br><span class="line">scp local_file remote_username@remote_ip:remote_folder</span><br></pre></td></tr></table></figure><p><strong>复制目录</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp -r 本地文件夹路径 远程主机用户名@远程主机名或IP:远程文件夹保存的位置路径</span></span><br><span class="line">scp -r local_folder remote_username@remote_ip:remote_folder</span><br></pre></td></tr></table></figure><p>看完了 不打算亲自尝试一下文件传输的操作吗？ :-)</p><h3 id="3-2-2-电脑-ssh-连接-Termux">3.2.2 电脑 ssh 连接 Termux</h3><p>这个使用场景比较少，但是既然要打造中国的 Termux 文档的效果，还是一起写上去吧，首先确保你已经安装了 openssh 软件包，没有安装的话参考上一个小结进行安装，实现这个效果有两大种方法：</p><ol><li>SSH 通过密码认证连接</li><li>SSH 通过公私钥连接<ul><li>PC 端生成公私钥，然后将 公钥 拷贝到 Termux 中，通过公私钥连接。</li><li>Termux 端生成公私钥，然后将 私钥拷贝到 PC 中，通过公私钥连接。</li></ul></li></ol><h4 id="启动-ssh-服务">启动 ssh 服务</h4><p>安装完成后，<code>sshd</code> 服务默认没有启动，所以得手动启动下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshd</span><br></pre></td></tr></table></figure><p>因为手机上面低的端口有安全限制，所以这里 openssh 默认的 sshd 默认的服务端口号为 8022</p><p><img src="https://image.3001.net/images/20200420/15873614328073.jpg" alt="img"></p><h4 id="停止-ssh-服务">停止 ssh 服务</h4><p>如果需要停止 ssh 服务，只需要 kill 杀掉进程即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill sshd</span><br></pre></td></tr></table></figure><h4 id="通过密码认证链接">通过密码认证链接</h4><p>Termux 默认是使用密码认证进行连接的，如果要启用密码连接的话要确保你的密码足够安全，否则你的 SSH 被恶意攻击者连接或者爆破成功的话，那就美滋滋了！</p><p>Termux 下的 SSH 默认配置文件的路径为 <code>$PREFIX/etc/ssh/sshd_config</code>，我们来查看下这个配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SSHD_CONFIGPrintMotd no</span><br><span class="line">PasswordAuthentication <span class="built_in">yes</span></span><br><span class="line">Subsystem sftp /data/data/com.termux/files/usr/libexec/sftp-server</span><br></pre></td></tr></table></figure><p>国光的 Termux 0.94 的版本就这 3 行配置，下面来逐行解释一下这个配置：</p><p><code>PrintMotd</code> : 是否显示登录成功的欢迎信息 例如上次登入的时间、地点等</p><p><code>PasswordAuthentication</code>: 是否启用密码认证</p><p><code>Subsystem</code>: SFTP 服务相关的设定</p><h5 id="设置新密码">设置新密码</h5><p>执行 <code>passwd</code> 命令可以直接修改密码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/1587362963901.jpg" alt="密码不要忘记哦"></p><h5 id="电脑远程连接测试">电脑远程连接测试</h5><p>国光测试了一下 Termux 的 ssh 和常规 Linux 不太一样，连接的时候不需要指定用户名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 192.168.31.124 -p 8022</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873647647979.jpg" alt="img"></p><h4 id="通过公私钥连接">通过公私钥连接</h4><p>公私钥连接更加安全，再也不用但你的 Termux SSH 被黑客爆破攻击的情况了</p><h5 id="PC-端生成公私钥">PC 端生成公私钥</h5><p>首先在 PC 端生成秘钥对：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><p>默认一直回车下去：</p><p><img src="https://image.3001.net/images/20200420/15873656474057.jpg" alt="img"></p><p>此时会在 <code>~/.ssh</code> 目录下生成 3 个文件<br><code>id_rsa</code>， <code>id_rsa.pub</code>，<code>known_hosts</code></p><p>然后需要把公钥 <code>id_rsa.pub</code> 拷贝到手机的 <strong>data\data\com.termux\files\home.ssh</strong> 文件夹中。然后</p><p><strong>将公钥拷贝到验证文件中</strong></p><p>在 <code>Termux</code> 下操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> id_rsa.pub &gt; authorized_keys</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873660522013.jpg" alt="img"></p><p>OK 现在你已经设置好公私钥了，那么修改一下 SSH 的配置文件，关掉密码登录吧：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>找到：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PasswordAuthentication <span class="built_in">yes</span> </span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure><p>然后记得重启一下 SSH 服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill sshd;sshd</span><br></pre></td></tr></table></figure><p>然后电脑端这边直接就可以通过公私钥连接了，无需输入密码也更加安全：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 192.168.31.124 -p 8022</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873666122203.jpg" alt="img"></p><h5 id="Termux-端生成公私钥">Termux 端生成公私钥</h5><p>操作完上一步之后，我想你大概已经知道了公私钥的原理了。那么我们现在尝试在 Termux 端生成公私钥这种方法试试看，理论上也是可以的。</p><p>首先在 Termux 端生成秘钥对:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keyge</span><br></pre></td></tr></table></figure><p>此时会在 <code>~/.ssh</code> 目录下生成 3 个文件<br><code>id_rsa</code>， <code>id_rsa.pub</code>，<code>known_hosts</code></p><p>然后<strong>将公钥拷贝到验证文件中</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> id_rsa.pub &gt; authorized_keys</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873671143088.jpg" alt="img"></p><p>接着将 <code>id_rsa.pub</code> 私钥下载下来，拷贝到 PC 端上，并赋予 <code>600</code> 的权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 600 id_rsa</span><br></pre></td></tr></table></figure><p>然后通过 <code>-i</code> 手动加载私钥的方式也可以成功连接到 Termux：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i id_rsa root@192.168.31.124 -p 8022</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873673916988.jpg" alt="Bingo!"></p><p>至此，Termux SSH 连接的 3 种方式都演示过了，国光个人比较建议使用 <code>PC 端生成公私钥</code> 的方法，这样可以减少 rsa 私钥泄露的风险，也方便 PC 端的远程连接与管理。</p><h2 id="3-3-you-get">3.3 you-get</h2><p>一个命令行小程序，支持下载各大网站的视频，具体支持的网站大家可以参考官方项目，国光这里就只作简单的介绍。</p><h3 id="3-3-1-安装-you-get">3.3.1 安装 you-get</h3><p>首先得先安装相关的依赖包</p><blockquote><p>Python3 如果没有安装的话 可以参考上文的 「开发环境」-「Python」</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install python3 ffmpeg -y</span><br></pre></td></tr></table></figure><p>安装完成后，直接使用 pip 来 安装，这里通过 <code>-i</code> 指定国内的 pip 源 速度会更快一点：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install you-get  -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br></pre></td></tr></table></figure><h3 id="3-3-2-升级-you-get">3.3.2 升级 you-get</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --upgrade you-get</span><br></pre></td></tr></table></figure><h3 id="3-3-3-下载-B-站视频">3.3.3 下载 B 站视频</h3><p>默认是下载最高画质的，但是我们也可以列出所有可以下载的画质：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">you-get -i https://www.bilibili.com/video/BV1mE411L7Rg</span><br><span class="line"></span><br><span class="line">site:                Bilibili</span><br><span class="line">title:               Python Web开发之Django美化-使用SimpleUi</span><br><span class="line">streams:             <span class="comment"># Available quality and codecs</span></span><br><span class="line">    [ DASH ] ____________________________________</span><br><span class="line">    - format:        dash-flv</span><br><span class="line">      container:     mp4</span><br><span class="line">      quality:       高清 1080P</span><br><span class="line">      size:          12.9 MiB (13525977 bytes)</span><br><span class="line">    <span class="comment"># download-with: you-get --format=dash-flv [URL]</span></span><br><span class="line"></span><br><span class="line">    - format:        dash-flv720</span><br><span class="line">      container:     mp4</span><br><span class="line">      quality:       高清 720P</span><br><span class="line">      size:          11.3 MiB (11834935 bytes)</span><br><span class="line">    <span class="comment"># download-with: you-get --format=dash-flv720 [URL]</span></span><br><span class="line"></span><br><span class="line">    - format:        dash-flv480</span><br><span class="line">      container:     mp4</span><br><span class="line">      quality:       清晰 480P</span><br><span class="line">      size:          9.8 MiB (10274269 bytes)</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure><p>下载 720P 视频：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you-get --format=dash-flv720 https://www.bilibili.com/video/BV1mE411L7Rg</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874338639875.jpg" alt="img"></p><h3 id="3-3-4-下载网易云音乐歌单">3.3.4 下载网易云音乐歌单</h3><p>下面以我自己的歌单为例子，首先找到自己喜欢的歌单，然后点击复制链接：</p><p><img src="https://image.3001.net/images/20200421/1587434719875.jpg" alt="img"></p><blockquote><p>链接传送门：<a href="http://music.163.com/playlist?id=489221140">渗透测试代码审计程序员必备电音</a></p></blockquote><p>直接 you-get 歌单的链接地址就可以直接批量下载地址了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you-get <span class="string">&#x27;http://music.163.com/playlist?id=489221140&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874360252003.jpg" alt="img"></p><p>下载完成后会以歌单名作为文件夹存放下载好的音乐以及歌单的封面：</p><p><img src="https://image.3001.net/images/20200421/15874361278208.jpg" alt="img"></p><hr><p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/%3Ca%20href=https:/www.sqlsec.com/2018/05/termux.html#%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%3Ehttps:/www.sqlsec.com/2018/05/termux.html#%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%3C/a%3E">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(<a href=https://image.3001.net/images/20200922/16007336487809.jpg>https://image.3001.net/images/20200922/16007336487809.jpg</a>)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Termux 高级终端安装使用配置教程</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div></p>]]></content>
    
    
    <summary type="html">网站搭建、系统安装、极客行为</summary>
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="termux" scheme="https://aizhiqian.github.io/tags/termux/"/>
    
    <category term="Android" scheme="https://aizhiqian.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>【Termux】高级终端安装使用配置教程 3</title>
    <link href="https://aizhiqian.github.io/posts/46db2752/"/>
    <id>https://aizhiqian.github.io/posts/46db2752/</id>
    <published>2023-07-22T18:00:35.000Z</published>
    <updated>2023-07-22T18:00:35.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-编辑器">1  编辑器</h2><p>写代码前总得折腾一下编辑器，毕竟磨刀不误砍柴工嘛。Termux 支持多种编辑器，完全可以满足日常使用需求。</p><h3 id="1-1-Emacs">1.1 Emacs</h3><p>据说 Emacs 是神的编辑器，国光我这种小菜鸡还不会使用哎，但是 Termux 官方已经封装好了 Emacs 了，我们安装起来就会简单很多:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install emacs  </span><br></pre></td></tr></table></figure><h3 id="1-2-nano">1.2 nano</h3><p>nano 是一个小而美的编辑器。具有如下：打开多个文件，每行滚动，撤消 / 重做，语法着色，行编号等功能</p><p>同样安装起来也很简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install nano</span><br></pre></td></tr></table></figure><h3 id="1-3-Vim">1.3 Vim</h3><p>Vim 被称为编辑器之神，基本上 Linux 发行版都会自带 Vim，这个在前文基本工具已经安装了，如果你没有安装的话，可以使用如下命令安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install vim</span><br></pre></td></tr></table></figure><p>并且官方也已经封装了 <code>vim-python</code>，对 Python 相关的优化。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install vim-python</span><br></pre></td></tr></table></figure><h4 id="1-3-1-解决汉字乱码">1.3.1 解决汉字乱码</h4><p>如果你的 Vim 打开汉字出现乱码的话，那么在家目录 (<code>~</code>) 下，新建<code>.vimrc</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim .vimrc</span><br></pre></td></tr></table></figure><p>添加内容如下：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set <span class="attr">fileencodings</span>=utf-<span class="number">8</span>,gb2312,gb18030,gbk,ucs-bom,cp936,latin1</span><br><span class="line">set <span class="attr">enc</span>=utf8</span><br><span class="line">set <span class="attr">fencs</span>=utf8,gbk,gb2312,gb18030</span><br></pre></td></tr></table></figure><p>然后 <code>source</code> 下变量：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> .vimrc</span><br></pre></td></tr></table></figure><p><strong>效果图</strong></p><p><img src="https://image.3001.net/images/20180501/15251690917140.png" alt="img"></p><h4 id="1-3-2-Vim-配色">1.3.2 Vim 配色</h4><p>Termux Vim 自带了如下的配色：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /data/data/com.termux/files/usr/share/vim/vim82/colors</span><br><span class="line"></span><br><span class="line">desert.vim    morning.vim    shine.vim    blue.vim      elflord.vim   murphy.vim     slate.vim    darkblue.vim  evening.vim   pablo.vim      industry.vim  peachpuff.vim  torte.vim    delek.vim     koehler.vim   ron.vim        zellner.vim   </span><br></pre></td></tr></table></figure><p>配色可以自己一个个尝试一下，还是向上面的汉字乱码那样，编辑家目录下的<code>.vimrc</code> 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.vimrc</span><br></pre></td></tr></table></figure><p>新增如下内容：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set number            &quot; 显示行号</span><br><span class="line">colorscheme desert    &quot; 颜色主题</span><br><span class="line">syntax on             &quot; 打开语法高亮</span><br></pre></td></tr></table></figure><p>下面是国光随便找的几个颜色主题效果，感兴趣的朋友可以自己一个个尝试：</p><p><img src="https://image.3001.net/images/20200419/15872622533864.jpg" alt="slate"></p><p><img src="https://image.3001.net/images/20200419/15872621751148.jpg" alt="murphy"></p><p><img src="https://image.3001.net/images/20200419/15872625401164.jpg" alt="peachpuff"></p><h2 id="2-Apache">2  Apache</h2><p>Apache 是一个开源网页服务器软件，由于其跨平台和安全性，被广泛使用，是最流行的 Web 服务器软件之一。</p><h3 id="2-1-安装-Apache">2.1 安装 Apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install apache2</span><br></pre></td></tr></table></figure><h3 id="2-2-启动-Apache">2.2 启动 Apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apachectl start</span><br></pre></td></tr></table></figure><p>然后浏览器访问: <code>http://127.0.0.1:8080</code> 访问是否成功启动：</p><p><img src="https://image.3001.net/images/20200424/15876870133939.jpg" alt="img"></p><p>Termux 自带的 Apache 的网站默认路径为：</p><p><strong>$PREFIX/share/apache2/default-site/htdocs/index.html</strong></p><h3 id="2-3-停止-Apache">2.3 停止 Apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apachectl stop</span><br></pre></td></tr></table></figure><h3 id="2-4-重启-Apache">2.4 重启 Apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apachectl restart</span><br></pre></td></tr></table></figure><h2 id="3-Apache-解析-PHP">3  Apache 解析 PHP</h2><p>既然 Apache、PHP、MySQL 都可以成功安装的话，那么现在只要配置好 Apache 解析 PHP 之后就可以打造一个 Android 平台上的 LAMPP 平台了，配置本小节的内容得确保 Termux 已经配置好了 PHP 开发环境，没有配置好的可以参加下面 PHP 小节部分。</p><h3 id="3-1-安装-php-apache">3.1 安装 php-apache</h3><p>默认的 Apache 是无法解析 PHP 的，我们需要安装相应的包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install php-apache</span><br></pre></td></tr></table></figure><h3 id="3-2-配置-Apache">3.2 配置 Apache</h3><p>Termux 上的 Apache 默认配置文件的路径为:</p><p><strong>$PREFIX/etc/apache2/httpd.conf</strong></p><p>直接编辑配置文件:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /data/data/com.termux/files/usr/etc/apache2/httpd.conf</span><br></pre></td></tr></table></figure><p>配置文件里面搜索 PHP 没有相关的模块，所以需要我们手动添加 PHP7 的模块:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule php7_module /data/data/com.termux/files/usr/libexec/apache2/libphp7.so </span><br></pre></td></tr></table></figure><p>并在刚刚这个语句下方添加解析器，内容如下:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;FilesMatch</span> <span class="string">\.php$&gt;</span></span><br><span class="line">  <span class="attr">SetHandler</span> <span class="string">application/x-httpd-php</span></span><br><span class="line"><span class="attr">&lt;/FilesMatch&gt;</span> <span class="string"></span></span><br></pre></td></tr></table></figure><p>接着继续往下找配置文件里面配置默认首页的地方，我们添加 <code>index.php</code> 到默认首页的规则里面:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;IfModule</span> <span class="string">dir_module&gt;</span></span><br><span class="line">  <span class="attr">DirectoryIndex</span> <span class="string">index.php index.html</span></span><br><span class="line"><span class="attr">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure><p>这表示网站目录的默认首页是 index.php，如果没有 index.php 系统会自动寻找 index.html 做为默认首页了。</p><p>修改完 Apache 的配置文件后，记得使用 <code>apachectl restart</code> 重启 Apache 服务，然后这个时候回发现我们重启居然报错了：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Apache is running a threaded MPM, but your PHP Module is <span class="keyword">not</span> compiled to be threadsafe.  You need to recompile PHP.</span><br><span class="line">AH00013: Pre-configuration failed</span><br></pre></td></tr></table></figure><p>不要慌问题不大，下面来解决这个问题</p><h3 id="3-3-解决-Apache-PHP-报错">3.3 解决 Apache PHP 报错</h3><p>先找到如下行：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">LoadModule</span> <span class="string">mpm_worker_module libexec/apache2/mod_mpm_worker.so</span></span><br></pre></td></tr></table></figure><p>给他注释掉为：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#LoadModule mpm_worker_module libexec/apache2/mod_mpm_worker.so</span></span><br></pre></td></tr></table></figure><p>然后找到如下行：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#LoadModule mpm_prefork_module libexec/apache2/mod_mpm_prefork.so</span></span><br></pre></td></tr></table></figure><p>取消注释：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">LoadModule</span> <span class="string">mpm_prefork_module libexec/apache2/mod_mpm_prefork.so</span></span><br></pre></td></tr></table></figure><p>最终的示例图如下:</p><p><img src="https://image.3001.net/images/20200424/15876891812066.jpg" alt="img"></p><h3 id="3-4-解析-PHP-测试">3.4 解析 PHP 测试</h3><p>在 Apache 的网站根目录下，创建一个 index.php ，测试一下 phpinfo () 函数能否正常运行:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;?php phpinfo(); ?&gt;&#x27;</span> &gt; <span class="variable">$PREFIX</span>/share/apache2/default-site/htdocs/index.php</span><br></pre></td></tr></table></figure><p>然后浏览访问: <code>http://127.0.0.1:8080</code> 查看效果：</p><p><img src="https://image.3001.net/images/20200424/15876893688277.png" alt="OK"></p><h2 id="4-C">4  C</h2><p>Termux 官方封装了 Clang，他是一个 C、C++、Objective-C 和 Objective-C++ 编程语言的编译器前端。</p><h3 id="4-1-安装-clang">4.1 安装 clang</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install clang</span><br></pre></td></tr></table></figure><h3 id="4-2-编译测试">4.2 编译测试</h3><p>clang 在编译这一块很强大，感兴趣的朋友可以去网上查看详细的教程，国光这里只演示基本的 Hello World 使用。写一个 Hello World 的 C 程序，如下 <code>hello.c</code>：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编辑完成后，使用 clang 来编译生成 hello 的可执行文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang hello.c -o hello</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872641341258.jpg" alt="效果图"></p><h2 id="5-Java">5  Java</h2><p>Termux 早期原生编译 JAVA 只能使用 <code>ecj</code> (Eclipse Compiler for Java) 和 <code>dx</code> 了，然后使用 Android 自带的 dalvikvm 运行。后面 Termux 官方也封装了 openjdk-17 这样安装起来就更方便了。</p><p>还有如果想要完整体验 JAVA 环境的话，另一个方法就是 Termux 里面安装一个完整的 Linux 系统，然后在 Linux 里面运行 Java，安装系统部分下面文章会详细介绍，这种思路也是可以的。</p><h3 id="5-1-Openjdk-17">5.1 Openjdk-17</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg update</span><br><span class="line">pkg install openjdk-17</span><br></pre></td></tr></table></figure><p>当然这个包可能不太稳定，遇到相关问题可以去 Termux 官方的项目下提交 issue：</p><ul><li><a href="https://github.com/termux/termux-packages/issues?q=openjdk">https://github.com/termux/termux-packages/issues?q=openjdk</a></li><li><a href="https://github.com/termux/termux-packages/issues?q=java">https://github.com/termux/termux-packages/issues?q=java</a></li></ul><h3 id="5-2-ECJ">5.2 ECJ</h3><h4 id="5-2-1-安装编译工具">5.2.1 安装编译工具</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install ecj dx -y</span><br></pre></td></tr></table></figure><p>国光这里只演示基本的 Hello World 使用。写一个 Hello World 的 JAVA 程序，如下 <code>HelloWorld.java</code>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello Termux&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-2-编译生成-class-文件">5.2.2 编译生成 class 文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ecj HelloWorld.java</span><br></pre></td></tr></table></figure><h4 id="5-2-3-编译生成-dex-文件">5.2.3 编译生成 dex 文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dx --dex --output=hello.dex HelloWorld.class</span><br></pre></td></tr></table></figure><h4 id="5-2-4-使用-dalvikvm-运行">5.2.4 使用 dalvikvm 运行</h4><blockquote><p>格式规范如下：<code>dalvikvm -cp dex文件名 类名</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dalvikvm -<span class="built_in">cp</span> hello.dex HelloWorld</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872689779426.jpg" alt="效果图"></p><h2 id="6-MariaDB-MySQL">6  MariaDB (MySQL)</h2><p>MariaDB 是 MySQL 关系数据库管理系统的一个复刻，由社区开发，有商业支持，旨在继续保持在 GNU GPL 下开源。开发这个分支的原因之一是：甲骨文公司收购了 MySQL 后，有将 MySQL 闭源的潜在风险，因此社区采用分支的方式来避开这个风险。</p><h3 id="6-1-安装-MariaDB">6.1 安装 MariaDB</h3><p>Termux 官方也封装了 MariaDB，所以安装起来很方便：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install mariadb</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872737414317.jpg" alt="img"></p><p>这里基本上会安装很顺利，但是早期用户可能出现安装失败的情况，如果安装失败的话，这个时候手动在配置目录下创建 <code>my.cnf.d</code> 文件夹即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /data/data/com.termux/files/usr/etc/</span><br><span class="line">$ <span class="built_in">mkdir</span> my.cnf.d</span><br></pre></td></tr></table></figure><h3 id="6-2-初始化数据库">6.2 初始化数据库</h3><blockquote><p>早期的 Termux 安装完 MySQL 是需要初始化数据库的，新版本在安装时候就已经初始化了数据库</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_install_db</span><br></pre></td></tr></table></figure><p>2020 年 4 月 19 日：国光今天安装的 MySQL 发现已经存在 mysql.user 表了，无需初始化：</p><p><img src="https://image.3001.net/images/20200419/1587274710701.jpg" alt="img"></p><h3 id="6-3-启动-MySQL-服务">6.3 启动 MySQL 服务</h3><p>因为正常启动完成后，MySQL 这个会话就一直存活，类似与 Debug 调试一样，此时使用 <code>Ctrl + C</code> -&gt; 中止当前进程也无济于事，体验式就一点都不优雅，所以这里国光使用 Linux 自带的 <code>nohup</code> 命令将其放到后台启动。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> mysqld &amp;</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872759828856.jpg" alt="img"></p><p>图片上这个 <code>17115</code> 此时就是 <code>mysqld</code> 的进程 PID 号，我们使用如下命令验证一下是否正确：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep mysql</span><br></pre></td></tr></table></figure><p>可以看到果然是进程的 PID 号：</p><p><img src="https://image.3001.net/images/20200419/15872772626788.jpg" alt="img"></p><p>至于 nohup 运行的提示</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup: ignoring input and appending output to `nohup.out&#x27;</span><br></pre></td></tr></table></figure><p>这个是正常现象，无伤大雅，Termux 下就这样将就着用吧。</p><h3 id="6-4停止-MySQL-服务">6.4停止 MySQL 服务</h3><p>Termux 下没有好的办法退出 MySQL 服务，只能强制杀掉进程了，使用如下命令格式可以轻松杀掉进程：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 PID</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872774392594.jpg" alt="成功kill掉"></p><p>当然每次查看进程的 PID 号，再杀掉进程有点繁琐了，实际上这一步可以直接这样操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 `pgrep mysql`</span><br></pre></td></tr></table></figure><p>Awesome ! 优雅！</p><h3 id="6-5-默认的两个用户">6.5 默认的两个用户</h3><blockquote><p>用户登录的前提是 MySQL 服务在后台运行，如果你按照上一小节操作把 MySQL kill 掉的话，请重新启动一下 MySQL 服务</p></blockquote><p>新版本的 Termux 安装初始化数据库的时候包含两个高权限用户，一个是无法访问的 <strong>root</strong> 用户</p><p><img src="https://image.3001.net/images/20200419/15872785237034.jpg" alt="提示拒绝root登录"></p><p><strong>提示拒绝 root 登录</strong></p><p>另一个用户就是 Termux 的<strong>用户名</strong>，默认密码为<code>空</code>，我们来登录看看：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u $(<span class="built_in">whoami</span>)</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872787187162.jpg" alt="可以成功登录 并执行SQL语句"></p><p><strong>可以成功登录 并执行 SQL 语句</strong></p><p>那么这个无法登录的 root 用户该怎么办呢 ？不要着急 继续往下看</p><h3 id="6-6-修改-root-密码">6.6 修改 root 密码</h3><p>老版本的 Termux 的直接使用 <code>mysql_secure_installation</code> 可以设置密码，但是新版本的安全策略变更了 我们在设置密码的时候回提示当前密码不正确，所以这条路行不通了。</p><p>这里我们只能使用 MySQL 的另一个用户名，即 Termux 用户名登录，然后来修改 root 的密码，使用如下命令修改 root 密码:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 登录 Termux 用户</span></span><br><span class="line">mysql -u $(<span class="built_in">whoami</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改 root 密码的 SQL语句</span></span><br><span class="line">use mysql;</span><br><span class="line"><span class="built_in">set</span> password <span class="keyword">for</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> = password(<span class="string">&#x27;你设置的密码&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新权限 并退出</span></span><br><span class="line">flush privileges;</span><br><span class="line">quit; </span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872812941161.jpg" alt="细节图片"></p><p>OK！ 如何和图片上差不的效果，那么修改 root 密码就成功了。</p><h3 id="6-7-root-用户登录">6.7 root 用户登录</h3><p>修改完密码之后我们就可以美滋滋地使用 root 用户来登录了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line">Enter password: xxxxx（这里输入你的密码)</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872811505855.jpg" alt="img"></p><h3 id="6-8-远程登录-MySQL">6.8 远程登录 MySQL</h3><p>使用 <code>ip a</code> 后查看 IP 地址后，尝试电脑端远程访问 Termux 的数据库:</p><p><img src="https://image.3001.net/images/20200419/15872927348730.jpg" alt="img"></p><p>发现默认是无法成功连接的，这个时候我们需要到数据库手动开启 root 用户的远程访问权限:</p><blockquote><p>这里的 P@ssw0rd 是我的 root 密码</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> root@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;P@ssw0rd&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872930045560.jpg" alt="img"></p><p>执行完成后 尝试 PC 端远程过去看看：</p><p><img src="https://image.3001.net/images/20200419/15872955565240.jpg" alt="img"></p><h2 id="7-Nginx">7  Nginx</h2><p>Nginx 是一个高性能的 Web 和反向代理服务器，Nginx 用的熟悉的话，下面搭建各种网站也就轻而易举了。</p><h3 id="7-1-安装-Nginx">7.1 安装 Nginx</h3><p>Termux 安装 Nginx 也很简单，一条命令即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install nginx</span><br></pre></td></tr></table></figure><p>安装完成后，国光的习惯是查看一下版本信息：</p><p><img src="https://image.3001.net/images/20200419/1587298511654.png" alt="1.17.10 版本"></p><h3 id="7-2-测试-Nginx">7.2 测试 Nginx</h3><p>测试检查 Nginx 的配置文件是否正常:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872987037951.jpg" alt="img"></p><p>现在测试肯定是 OK 的，这个多用于我们修改完 Nginx 的配置文件后的检查。</p><h3 id="7-3-启动-Nginx">7.3 启动 Nginx</h3><p>早期版本的 Termux 需要在 <code>termux-chroot</code> 环境下才可以成功启动 Nginx ，新版本的 Termux 可以直接启动，还是很方便的：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure><p>Termux 在 Nginx 上默认运行的端口号是 8080， 使用 <code>pgrep</code> 命令也可以查看 Nginx 进程相关的 PID 号。</p><p>然后手机本地直接访问 <code>http://127.0.0.1:8080</code> 查看 Nginx 是否正常启动：</p><p><img src="https://image.3001.net/images/20200419/15872975682196.jpg" alt="img"></p><h3 id="7-4-重启-Nginx">7.4 重启 Nginx</h3><p>一般当修改完 Nginx 相关的配置文件时，我们需要重启 Nginx，使用如下命令即可重启:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><h3 id="7-5-停止-Nginx">7.5 停止 Nginx</h3><h4 id="7-5-1-方法一-原生停止">7.5.1 方法一 原生停止</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure><blockquote><p>quit 是一个优雅的关闭方式，Nginx 在退出前完成已经接受的连接请求。Stop 是快速关闭，不管有没有正在处理的请求。</p></blockquote><h4 id="7-5-2-方法二-杀掉进程">7.5.2 方法二 杀掉进程</h4><p><s>只需三番钟，里造会干我一样，爱象节款游戏</s> 扯远了，只需要 1 条命令，即可优雅的终止掉 Nginx 服务:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 `pgrep nginx`</span><br></pre></td></tr></table></figure><p>貌似手机党 并不好敲 这个 ` 符号 =，= ，如果实在敲不出来，那就分两步走吧：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询 nginx 进程相关的 PID 号</span></span><br><span class="line">pgrep nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 杀掉 查询出的 PID号进程</span></span><br><span class="line"><span class="built_in">kill</span> -9 PID</span><br></pre></td></tr></table></figure><h2 id="8-Nginx-解析-PHP">8  Nginx 解析 PHP</h2><p>Termux 下的 Nginx 解析 PHP 这里单独拿出一级标题来叙述，成功解析的话，下面安装 wordpress 等 PHP 网站就会轻松很多。</p><h3 id="8-1-安装-php-fpm">8.1 安装 php-fpm</h3><p>Nginx 本身不能处理 PHP，它只是个 Web 服务器，当接收到 PHP 请求后发给 PHP 解释器处理。Nginx 一般是把请求转发给 fastcgi 管理进程处理，PHP-FPM 是一个 PHP FastCGI 管理器，所以这里得先安装它：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install php-fpm</span><br></pre></td></tr></table></figure><p>安装完成顺便检查一下版本信息吧：</p><p><img src="https://image.3001.net/images/20200419/15873011212729.jpg" alt="img"></p><h3 id="8-2-配置-php-fpm">8.2 配置 php-fpm</h3><p>编辑 php-fpm 的配置文件 <code>www.conf</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure><p>定位搜索 <code>listen =</code> 找到</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">listen</span> = /data/data/com.termux/files/usr/var/run/php-fpm.sock</span><br></pre></td></tr></table></figure><p>将其改为：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">listen</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9000</span></span><br></pre></td></tr></table></figure><p>？？？啥 你不会使用 vim 搜索 ㄟ (▔,▔) ㄏ 那就老老实实一个个翻页吧。</p><h3 id="8-3-配置-Nginx">8.3 配置 Nginx</h3><p>编辑 Nginx 的配置文件 <code>nginx.conf</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>下面国光贴出配置好的完整配置文件，大家可以参考下面这些图，只需要两大步骤：</p><ol><li>添加 <code>index.php</code> 到默认首页的规则里面：</li></ol><p><img src="https://image.3001.net/images/20200419/15873019971725.jpg" alt="img"></p><ol><li>取消 <code>location ~ \.php$</code> 这些注释，按照图片上的 提示修改：</li></ol><p><img src="https://image.3001.net/images/20200419/15873019943700.jpg" alt="img"></p><p>Termux 里面的 Nginx 默认网站的根目为：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/data/data/com<span class="variable">.termux</span>/files/usr/share/nginx/html</span><br></pre></td></tr></table></figure><p>如果想要修改默认路径的话 只需要在配置文件中 替换 2 处出现的这个路径即可</p><p>下面贴一份完整的配置文件：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">8080</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   /data/data/com.termux/files/usr/share/nginx/html;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm index.php;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        <span class="section">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   /data/data/com.termux/files/usr/share/nginx/html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">            <span class="attribute">root</span>           html;</span><br><span class="line">            <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">            <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">            <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  /data/data/com.termux/files/usr/share/nginx/html<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">            <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-4-测试-PHP-解析">8.4 测试 PHP 解析</h3><p>Nginx 默认网站的根目录为：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/data/data/com<span class="variable">.termux</span>/files/usr/share/nginx/html</span><br></pre></td></tr></table></figure><p>在这个网站根目录下新建 <code>info.php</code> 内容为：<code>&lt;?php phpinfo(); ?&gt;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;?php phpinfo(); ?&gt;&#x27;</span> &gt; <span class="variable">$PREFIX</span>/share/nginx/html/info.php</span><br></pre></td></tr></table></figure><h3 id="8-5-启动服务">8.5 启动服务</h3><p>先启动 php-fpm 服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php-fpm</span><br></pre></td></tr></table></figure><p>然后再启动 Nginx 服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure><blockquote><p>如果你的 Nginx 已经启动了的话，使用 <code>nginx -s reload</code> 重启 Nginx</p></blockquote><h3 id="8-6-访问测试">8.6 访问测试</h3><p>浏览器访问 <code>http://127.0.0.1:8080/info.php</code> 来看看刚刚新建的测试文件是否解析了：</p><p><img src="https://image.3001.net/images/20200419/15873036887325.jpg" alt="哇哦~ awesome"></p><h2 id="9-Nodejs">9  Nodejs</h2><p>Node.js 是能够在服务器端运行 JavaScript 的开放源代码、跨平台 JavaScript 运行环境。</p><h3 id="9-1-安装-Nodejs">9.1 安装 Nodejs</h3><p><code>nodejs-lts</code> 是长期支持版本，如果执行 <code>pkg install nodejs</code> 版本后，发现 npm 报如下错误:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">segmentation fault</span><br></pre></td></tr></table></figure><p>那么这个时候可以尝试卸载当前版本 <code>pkg uninstall nodejs</code> 然后执行下面命令安装长期稳定版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install nodejs-lts</span><br></pre></td></tr></table></figure><p>安装完成后使用如下命令查看版本信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -V</span><br><span class="line">npm -V</span><br></pre></td></tr></table></figure><h3 id="9-2-Hello-World">9.2 Hello World</h3><p>新建一个 <code>hello.js</code> 脚本，内容如下:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello Termux&#x27;</span>);</span><br></pre></td></tr></table></figure><p>然后尝试运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node hello.js</span><br><span class="line">Hello Termux</span><br></pre></td></tr></table></figure><h3 id="9-3-http-server">9.3 http-server</h3><p>http-server 是一个基于 Node.js 的简单零配置命令行 HTTP 服务器。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 http-server</span></span><br><span class="line">npm install -g http-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 http-server</span></span><br><span class="line">http-server</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200421/15874464701156.jpg" alt="img"></p><p>尝试电脑端浏览器直接访问看看：</p><p><img src="https://image.3001.net/images/20200421/15874465807370.jpg" alt="OK"></p><h3 id="9-4-安装报错">9.4 安装报错</h3><p>早期版本的 Termux 的 npm 安装一些包的时候会报如下错误：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot read <span class="keyword">property</span> &#x27;length&#x27; of undefined</span><br></pre></td></tr></table></figure><p>查了下是这边版本的问题：</p><p><img src="https://image.3001.net/images/20180501/15251603187936.png" alt="新版本貌似npm正常"></p><p>这是一个 BUG，官方的解决方法如下：</p><p><a href="https://github.com/rvagg/node-worker-farm/commit/0b2349c6c7ed5c51e234e418fad226875313e773">disable concurrency in case of libuv/libuv#1459</a></p><p><img src="https://image.3001.net/images/20180501/15251607456224.png" alt="img"></p><p>编辑如下文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/lib/node_modules/npm/node_modules/worker-farm/lib/farm.js</span><br></pre></td></tr></table></figure><p>我这里修改 length 的是 <code>4</code>，这个好像和 CPU 有关，总之这里的 length 得指定一个数字：</p><p><img src="https://image.3001.net/images/20180501/15251608278605.png" alt="新版本貌似npm正常"></p><p>然后在重新安装下 <code>npm install hexo-cli -g</code> 成功。</p><h2 id="10-PHP">10  PHP</h2><p>PHP 是一种开源的脚本语言，适用于网络开发。语法借鉴吸收 C 语言、Java 和 Perl 等流行计算机语言的特点，易于学习，PHP 是世界上最好的语言（手动狗头）。</p><h3 id="10-1-安装-PHP">10.1 安装 PHP</h3><p>Termux 官方封装了 PHP，所以我们安装起来就很方便：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install php</span><br></pre></td></tr></table></figure><p>安装完成后查看下版本信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php --version</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872714538915.jpg" alt="img"></p><h3 id="10-2-运行测试文件">10.2 运行测试文件</h3><blockquote><p>自 <code>PHP5.4</code> 之后 PHP 内置了一个 Web 服务器。在 Termux 下可以很方便地测试 PHP 文件</p></blockquote><p>首先在家 (<code>~</code>) 目录下建一个 <code>www</code> 文件夹，然后在 <code>www</code> 文件夹下新建一个 <code>index.php</code> 文件，内容为：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">phpinfo</span>();<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>完整的步骤如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建 www 文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/www</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 inedx.php 文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;?php phpinfo();?&gt;&#x27;</span> &gt; ~/www/index.php</span><br></pre></td></tr></table></figure><p>编写完成 <code>index.php</code> 文件后，尝试使用 PHP 内置的 WebServer 直接启动：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入家目录</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 WebServer</span></span><br><span class="line">php -S 0.0.0.0:8888 -t www/</span><br></pre></td></tr></table></figure><p>自己制定端口后，浏览器访问 <code>http://127.0.0.1:8888</code> 效果如下：</p><p><img src="https://image.3001.net/images/20200419/15872720841994.jpg" alt="img"></p><h2 id="11-Python">11  Python</h2><p>Python 是近几年非常流行的语言，Python 相关的书籍和资料也如雨后春笋一般不断涌现，带来了活跃了 Python 学习氛围。</p><h3 id="11-1-安装-Python2">11.1 安装 Python2</h3><p>Python2 版本要淘汰了，大家简单了解一下就好：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install python2 -y</span><br></pre></td></tr></table></figure><p>安装完成后，使用 <code>python2</code> 命令启动 Python2.7 的环境。</p><h3 id="11-2-安装-Python3">11.2 安装 Python3</h3><p>Termux 安装 Python 默认版本是 Python3 的版本，与此同时也顺便安装了 <code>clang</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install python -y</span><br></pre></td></tr></table></figure><p>安装完成后，查看下 <code>clang</code> 和 <code>Python</code> 的版本：</p><p><img src="https://image.3001.net/images/20200418/15872152256508.jpg" alt="img"></p><h3 id="11-3-注意版本区分">11.3 注意版本区分</h3><p>如果你同时安装了 Python3 和 Python2 版本的话，最好向下图中这样验证一下各个版本情况，做到心知肚明，国光我是先安装 Python3 然后再安装 Python2 的：</p><p><img src="https://image.3001.net/images/20200418/15872154301353.jpg" alt="安装顺序不一样 pip 这种图片应该也就不一样"></p><p>如果版本直接混乱的话，手动修改 bin 目录下的软连接指向的位置即可。</p><h3 id="11-4-升级-PIP-版本">11.4 升级 PIP 版本</h3><p>PIP 保持最新是一个好习惯，升级方式很简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 升级 pip2 </span></span><br><span class="line">python2 -m pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级 pip3</span></span><br><span class="line">python -m pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br></pre></td></tr></table></figure><p>这两条命令分别升级了 <code>pip2</code> 和 <code>pip3</code> 到最新版。升级完成后你会惊讶的发现你的 <code>pip3</code> 命令不见了？？？然后这个时候就开始吐槽国光了（内心 OS：国光 非要强迫症升级 pip 版本，这下好了吧！）</p><p>国光：不要慌 问题不大，我们可以手动查看当前有哪些可执行的 pip 文件，使用如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /data/data/com.termux/files/usr/bin|grep pip</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200418/15872207482231.jpg" alt="原来我们的pip3变成了pip3.8了啊"></p><p>接下来分别查看对应 pip 可执行文件的版本：</p><p><img src="https://image.3001.net/images/20200418/15872208776206.jpg" alt="img"></p><p>现在全都是最新版的 pip 了哦</p><h3 id="11-5-iPython">11.5 iPython</h3><p>iPython 是一个 Python 的增强版本的交互式 shell，支持变量自动补全，自动缩进，支持 shell 命令等，内置了许多很有用的功能和函数。iPython 可以提高我们的学习效率！</p><blockquote><p>先安装 <code>clang</code>, 否则直接使用 <code>pip</code> 安装 <code>ipython</code> 会失败报错。没有安装的话使用 <code>pkg install clang</code> 安装</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -i 手动指定国内清华 pip 源 提高下载速度</span></span><br><span class="line">pip install ipython -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br><span class="line">pip3.8 install ipython -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br></pre></td></tr></table></figure><p>执行完上述命令分别安装好对应版本的 <code>iPython</code> 后，然后分别查看对应版本信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipython2 -V</span><br><span class="line">ipython -V</span><br></pre></td></tr></table></figure><h3 id="11-6-Jupyter-Notebook">11.6 Jupyter Notebook</h3><p>Jupyter Notebook（此前被称为 iPython notebook）可以在 Web 端提供 Python 交互，虽然和 iPython 共享同一个内核，但是更强大。</p><blockquote><p>Jupyter notebook 相关的依赖比较多 安装起来较为耗时 国光就只用 Python3 版本来演示了，另外请务必要使用国内的 pip 源来安装</p></blockquote><p>下面官方建议安装的完整的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pkg update</span><br><span class="line">pkg install proot</span><br><span class="line">termux-chroot</span><br><span class="line">apt install git clang</span><br><span class="line">apt install pkg-config</span><br><span class="line">apt install python python3-dev </span><br><span class="line">apt install libclang libclang-dev</span><br><span class="line">apt install libzmq libzmq-dev</span><br><span class="line">apt install ipython </span><br><span class="line">pip install jupyter </span><br></pre></td></tr></table></figure><p>如果你一步步跟着本文安装顺序操作的话，发现很多工具我们都安装过了（国光我真的有先见之明…），那么直接参考如下命令安装即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -i 手动指定国内中清华 pip 源 提高下载速度</span></span><br><span class="line"><span class="comment"># 更新是个好习惯</span></span><br><span class="line">pkg update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换模拟的 root 环境</span></span><br><span class="line">termux-chroot</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装相关依赖</span></span><br><span class="line">pkg install libclang</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 jupyter</span></span><br><span class="line">pip3 install jupyter -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装完成退出 chroot</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 jupyterlab</span></span><br><span class="line">pip3 install jupyterlab -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br></pre></td></tr></table></figure><p>安装好之后查看一下版本信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter --version</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200419/15872568247791.jpg" alt="所有插件均安装完成"></p><p>Jupyter Notebook 就安装好了，这个比较强大更详细的教程大家可以自行去谷歌或者百度一下，国光这里只演示基本的功能。</p><p>先启动 notebook</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure><p>然后会看到运行的日志，我们复制出 提示的 URL：</p><p><img src="https://image.3001.net/images/20200419/15872589383675.jpg" alt="img"></p><p>复制出的这个 URL 地址 在浏览器中打开：</p><p><img src="https://image.3001.net/images/20200419/15872590622420.jpg" alt="img"></p><p>可以看到成功运行了，那我们按照图片提示走个形式，输出个 Hello World 就跑路：</p><p><img src="https://image.3001.net/images/20200419/15872592274410.jpg" alt="img"></p><p>OK 运行成功，那么回到 Termux 里面使用组合键 <code>Ctrl + C</code> -&gt; 中止当前的 Jupyter 进程。</p><hr><p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/%3Ca%20href=https:/www.sqlsec.com/2018/05/termux.html#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%3Ehttps:/www.sqlsec.com/2018/05/termux.html#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%3C/a%3E">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(<a href=https://image.3001.net/images/20200922/16007336487809.jpg>https://image.3001.net/images/20200922/16007336487809.jpg</a>)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Termux 高级终端安装使用配置教程</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div></p>]]></content>
    
    
    <summary type="html">开发环境</summary>
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="termux" scheme="https://aizhiqian.github.io/tags/termux/"/>
    
    <category term="Android" scheme="https://aizhiqian.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>【Termux】高级终端安装使用配置教程 2</title>
    <link href="https://aizhiqian.github.io/posts/38280779/"/>
    <id>https://aizhiqian.github.io/posts/38280779/</id>
    <published>2023-07-22T17:59:40.000Z</published>
    <updated>2023-07-22T17:59:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-更换国内源">1  更换国内源</h2><p>使用 <code>pkg update</code> 更新一下的时候发现默认的官方源网速有点慢，在这个喧嚣浮躁的时代，我们难以静下心等待，这个时候就得更换成国内的 <code>Termux</code> 清华大学源了，加快软件包下载速度。</p><h3 id="1-1-方法一：自动替换（推荐）">1.1 方法一：自动替换（推荐）</h3><p>可以使用如下命令自动替换官方源为 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/termux/">TUNA 清华镜像源</a></p><blockquote><p><code>pkg update</code> 卡住的话多按几次回车 不要傻乎乎的等</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s@^\(deb.*stable main\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@&#x27; $PREFIX/etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s@^\(deb.*games stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@&#x27; $PREFIX/etc/apt/sources.list.d/game.list</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s@^\(deb.*science stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@&#x27; $PREFIX/etc/apt/sources.list.d/science.list</span><br><span class="line"></span><br><span class="line">pkg update &amp;&amp; pkg upgrade</span><br></pre></td></tr></table></figure><p>更换源几秒钟就可以执行完 <code>pkg update</code> 了，心里顿时乐开了花。</p><h3 id="1-2-方法二：图形界面（TUI）替换">1.2 方法二：图形界面（TUI）替换</h3><p>在较新版的 Termux 中，官方提供了图形界面（TUI）来半自动替换镜像，推荐使用该种方式以规避其他风险。 在 Termux 中执行如下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-change-repo</span><br></pre></td></tr></table></figure><p>在图形界面引导下，使用自带方向键可上下移动。<br>第一步使用空格选择需要更换的仓库，之后在第二步选择 TUNA/BFSU 镜像源。确认无误后回车，镜像源会自动完成更换。</p><h3 id="1-3-方法三：手动修改">1.3 方法三：手动修改</h3><p>请使用内置或安装在 Termux 里的文本编辑器，例如 <code>vi</code> / <code>vim</code> / <code>nano</code> 等直接编辑源文件，<strong>不要使用 RE 管理器等其他具有 ROOT 权限的外部 APP</strong> 来修改 Termux 的文件</p><p>编辑 <code>$PREFIX/etc/apt/sources.list</code> 修改为如下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># The termux repository mirror from TUNA:</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main</span><br></pre></td></tr></table></figure><p>编辑 <code>$PREFIX/etc/apt/sources.list.d/science.list</code> 修改为如下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># The termux repository mirror from TUNA:</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable</span><br></pre></td></tr></table></figure><p>编辑 <code>$PREFIX/etc/apt/sources.list.d/game.list</code> 修改为如下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># The termux repository mirror from TUNA:</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable</span><br></pre></td></tr></table></figure><p><strong>安装基础工具</strong></p><p>更换源之后来赶紧来下载安装一些基本工具吧，这些工具基本上是 Linux 系统自带的，因为 Termux 为了体积不过大，默认是没有带这些工具的，执行下面的命令来安装:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg update</span><br><span class="line">pkg install vim curl wget git tree -y</span><br></pre></td></tr></table></figure><h2 id="2-终端配色方案">2  终端配色方案</h2><p><strong>脚本项目地址</strong>：<a href="https://github.com/Cabbagec/termux-ohmyzsh/">https://github.com/Cabbagec/termux-ohmyzsh/</a></p><p>该脚本主要使用了 <code>zsh</code> 来替代 <code>bash</code> 作为默认 shell，并且支持色彩和字体样式，同时也激活了外置存储，可以直接访问 SD 卡下的目录。主题默认为 agnoster，颜色样式默认为 Tango，字体默认为 Ubuntu。</p><blockquote><p>执行下面这个命令确保已经安装好了 curl 命令</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://github.com/Cabbagec/termux-ohmyzsh/raw/master/install.sh)&quot;</span><br></pre></td></tr></table></figure><p>如果因为不可抗力的原因，出现 <code>port 443: Connection refused</code> 网络超时的情况，那么执行下面国光迁移到国内的地址的命令即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://html.sqlsec.com/termux-install.sh)&quot;  </span><br></pre></td></tr></table></figure><p>Android6.0 以上会弹框确认是否授权访问文件，点击<code>始终允许</code>授权后 Termux 可以方便的访问 SD 卡文件。</p><p><img src="https://image.3001.net/images/20200418/1587207468173.png" alt="img"></p><p>手机 App 默认只能访问自己的数据，如果要访问手机的存储，需要请求权限，如果你刚刚不小心点了拒绝的话，那么可以执行以下命令来重新获取访问权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-setup-storage</span><br></pre></td></tr></table></figure><p>脚本允许后先后有如下两个选项:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter a number, leave blank to not to change: 14</span><br><span class="line">Enter a number, leave blank to not to change: 6</span><br></pre></td></tr></table></figure><p>分别选择<code>色彩样式</code>和<code>字体样式</code>，重启 Termux app 后生效配置。不满意刚刚的效果，想要继续更改配色方案的话，可以根据下面命令来更改对应的色彩配色方案：</p><p><strong>设置色彩样式</strong>：</p><p>输入 <code>chcolor</code> 命令更换色彩样式，或者执行 <code>~/.termux/colors.sh</code> 命令</p><p><strong>设置字体</strong></p><p>运行 <code>chfont</code> 命令更换字体，或者执行 <code>~/.termux/fonts.sh</code> 命令</p><h2 id="3-创建目录软连接">3  创建目录软连接</h2><p>执行过上面的一键配置脚本后，并且授予 Termux 文件访问权限的话，会在家目录生成 <code>storage</code> 目录，并且生成若干目录，软连接都指向外置存储卡的相应目录：</p><p><img src="https://image.3001.net/images/20200418/15872083523807.png" alt="img"></p><p><strong>创建 QQ 文件夹软连接</strong></p><p>手机上一般经常使用手机 QQ 来接收文件，这里为了方便文件传输，直接在 <code>storage</code> 目录下创建软链接.<br><strong>QQ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /data/data/com.termux/files/home/storage/shared/tencent/QQfile_recv QQ</span><br></pre></td></tr></table></figure><p><strong>TIM</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /data/data/com.termux/files/home/storage/shared/tencent/TIMfile_recv TIM</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200418/15872085834532.png" alt="img"></p><p>这样可以直接在 <code>home</code> 目录下去访问 QQ 文件夹，大大提升了文件操作的工作效率。</p><h2 id="4-定制常用按键">4  定制常用按键</h2><p>在 Termux v0.66 的版本之后我们可以通过 <code>~/.termux/termux.properties</code> 文件来定制我们的常用功能按键，默认是不存在这个文件的，我们得自己配置创建一下这个文件。</p><p>下面做尝试简单配置一下这个文件:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建并编辑配置文件</span></span><br><span class="line">vim ~/.termux/termux.properties</span><br></pre></td></tr></table></figure><p>内容为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">extra-keys = [ \</span><br><span class="line"> [<span class="string">&#x27;ESC&#x27;</span>,<span class="string">&#x27;|&#x27;</span>,<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;HOME&#x27;</span>,<span class="string">&#x27;UP&#x27;</span>,<span class="string">&#x27;END&#x27;</span>,<span class="string">&#x27;PGUP&#x27;</span>,<span class="string">&#x27;DEL&#x27;</span>], \</span><br><span class="line"> [<span class="string">&#x27;TAB&#x27;</span>,<span class="string">&#x27;CTRL&#x27;</span>,<span class="string">&#x27;ALT&#x27;</span>,<span class="string">&#x27;LEFT&#x27;</span>,<span class="string">&#x27;DOWN&#x27;</span>,<span class="string">&#x27;RIGHT&#x27;</span>,<span class="string">&#x27;PGDN&#x27;</span>,<span class="string">&#x27;BKSP&#x27;</span>] \</span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>如果无法创建这个文件，那么得首先新建一下这个目录 <code>mkdir ~/.termux</code></p></blockquote><p>修改完成保存文件后，重启 Termux app 生效配置：</p><p><img src="https://image.3001.net/images/20200420/15873594933774.jpg" alt="img"></p><p>可以直接输入特殊的字符串，例如上面的例子中的 <code>|</code> 就是一个字符串，此外 Termux 还有封装了一些特殊按键，入上面例子中的 <code>ESC</code> 就是 Termux 自带的按键，完整的特殊按键表如下：</p><table><thead><tr><th>按键</th><th>说明</th></tr></thead><tbody><tr><td><code>CTRL</code></td><td><strong><code>特殊按键</code></strong></td></tr><tr><td><code>ALT</code></td><td><strong><code>特殊按键</code></strong></td></tr><tr><td><code>FN</code></td><td><strong><code>特殊按键</code></strong></td></tr><tr><td>ESC</td><td>退出键</td></tr><tr><td>TAB</td><td>表格键</td></tr><tr><td>HOME</td><td>原位键</td></tr><tr><td>END</td><td>结尾键</td></tr><tr><td>PGUP</td><td>上翻页键</td></tr><tr><td>PGDN</td><td>下翻页键</td></tr><tr><td>INS</td><td>插入键</td></tr><tr><td>DEL</td><td>删除键</td></tr><tr><td>BKSP</td><td>退格键</td></tr><tr><td>UP</td><td>方向键 上</td></tr><tr><td>LEFT</td><td>方向键 左</td></tr><tr><td>RIGHT</td><td>方向键 右</td></tr><tr><td>DOWN</td><td>方向键 下</td></tr><tr><td>ENTER</td><td>回车键</td></tr><tr><td>BACKSLASH</td><td>反斜杠 <code>\</code></td></tr><tr><td>QUOTE</td><td>双引号键</td></tr><tr><td>APOSTROPHE</td><td>单引号键</td></tr><tr><td>F1~F12</td><td>F1-F12 按键</td></tr></tbody></table><p>上面列出的三个<strong>特殊键</strong>中的每一个最多只能在附加键定义中列出一次，超过次数将会报错。</p><p>下面是国光我自用的按键表：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">extra-keys = [ \</span><br><span class="line"> [<span class="string">&#x27;ESC&#x27;</span>,<span class="string">&#x27;|&#x27;</span>,<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;`&#x27;</span>,<span class="string">&#x27;UP&#x27;</span>,<span class="string">&#x27;QUOTE&#x27;</span>,<span class="string">&#x27;APOSTROPHE&#x27;</span>], \</span><br><span class="line"> [<span class="string">&#x27;TAB&#x27;</span>,<span class="string">&#x27;CTRL&#x27;</span>,<span class="string">&#x27;~&#x27;</span>,<span class="string">&#x27;LEFT&#x27;</span>,<span class="string">&#x27;DOWN&#x27;</span>,<span class="string">&#x27;RIGHT&#x27;</span>,<span class="string">&#x27;ENTER&#x27;</span>] \</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>实际效果如下：</p><p><img src="https://image.3001.net/images/20200420/15873610423256.jpg" alt="img"></p><h2 id="5-zsh-主题配色">5  zsh 主题配色</h2><p>编辑家目录下的<code>.zshrc</code> 配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim .zshrc</span><br></pre></td></tr></table></figure><p>第一行可以看到，默认的主题是 <code>agnoster</code> 主题:</p><p><img src="https://image.3001.net/images/20200418/15872087339756.png" alt="img"></p><p>实际上这个主题也蛮酷的，如果你还想更换其他主题的话，那么在<code>.oh-my-zsh/themes</code> 目录下放着 <code>oh-my-zsh</code> 所有的主题配置文件，只要将默认的 agnoster 更换为其他的主题文件名即可。<br>下面是国光认为还不错的几款主题</p><p><img src="https://image.3001.net/images/20200418/15872089685912.png" alt="agnoster"></p><p><img src="https://image.3001.net/images/20200418/15872091524140.png" alt="ys"></p><p><img src="https://image.3001.net/images/20200418/15872092946550.png" alt="robbyrussell"></p><p>主题比较多，国光这里就不列举了，感兴趣大家可以一个个尝试去看看。 当然如果你是个变态的话，可以尝试 <code>random</code> 主题，每打开一个会话配色主题都是随机的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME=<span class="string">&quot;random&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>如果 oh-my-zsh 主题满足不了你们的话，Github 上还有很多高度定制的主题，感兴趣的朋友可以自己去折腾研究看看。</p></blockquote><h2 id="6-zsh-插件推荐">6  zsh 插件推荐</h2><p>zsh 之所以受欢迎除了好看的配色以为，另一个原因就是强大的插件了。下面国光列举一款比较实用的插件的安装方法，更多强大的插件等待大家自己去探索。</p><h3 id="6-1-autosuggestions">6.1 autosuggestions</h3><p>根据用户的平时使用习惯，终端会自动提示接下来可能要输入的命令，这个实际使用效率还是比较高的：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拷贝到 plugins 目录下</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$ZSH_CUSTOM</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure><p>在 <code>~/.zshrc</code> 中配置：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>=(其他的插件 zsh-autosuggestions)</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200418/15872114762117.png" alt="img"></p><p>输入 <code>zsh</code> 命令生效配置：</p><p><img src="https://image.3001.net/images/20200419/15872692273991.png" alt="效果图"></p><p>可以看到国光我只敲了一个 <code>v</code> 后面的命令就自动提示补全了，这时候只要按<code>右方向键</code>，在 Termux 里面的快捷键是 <code>音量加 + D</code>，就可以直接补全命令了。</p><h2 id="7-修改启动问候语">7  修改启动问候语</h2><p>默认的启动问候语如下：</p><p><img src="https://image.3001.net/images/20200418/15872126727686.jpg" alt="img"></p><p>这个启动问候语在前期对于初学者有一定的帮助，但是随着你们 Termux 的熟悉，这个默认的问候语就会显得比较臃肿。编辑问候语文件可以直接修改启动显示的问候语:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/etc/motd</span><br></pre></td></tr></table></figure><p>修改完的效果如下:</p><p><img src="https://image.3001.net/images/20200418/1587213178823.jpg" alt="本文版本归国光所有 转载注明出处哦"></p><p>这样启动新的会话的时候看上去就会简洁很多。什么你也想要这个效果？ 呐～下面是国光自己生成的，可以直接复制粘贴：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> _____                              </span><br><span class="line">|_   _|__ _ __ _ __ ___  _   ___  __</span><br><span class="line">  | |/ _ \ &#x27;__| &#x27;_ ` _ \| | | \ \/ /</span><br><span class="line">  | |  __/ |  | | | | | | |_| |&gt;  &lt; </span><br><span class="line">  |_|\___|_|  |_| |_| |_|\__,_/_/\_\</span><br></pre></td></tr></table></figure><h2 id="8-超级管理员身份">8  超级管理员身份</h2><p>实际上 Termux 不需要 root 权限也可以折腾各种各样的操作的，大家不必对 root 抱有啥幻想，本文的操作基本上没有涉及到手机要用到 root 的地步。</p><h3 id="8-1-手机没有-root">8.1 手机没有 root</h3><p>利用 <code>proot</code> 可以为手机没有 root 的用户来模拟一个 root 的环境，这里主要是经典的 Linux 文件系统布局上的模拟。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install proot -y</span><br></pre></td></tr></table></figure><p>然后终端下面输入:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-chroot</span><br></pre></td></tr></table></figure><p>即可模拟 <code>root</code> 环境，该环境模仿 Termux 中的常规 Linux 文件系统，但是不是真正的 root。</p><p><img src="https://image.3001.net/images/20200418/15872139633024.jpg" alt="img"></p><p>输入 <code>exit</code> 可回到普通用户的文件系统。</p><h3 id="8-2-手机已经-root">8.2 手机已经 root</h3><p>安装 <code>tsu</code>，这是一个 <code>su</code> 的 Termux 版本，是一个真正的 root 权限，用来在 Termux 上替代 <code>su</code>，操作不慎可能对手机有安全风险，因为官方封装了，所以安装也很简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install tsu -y</span><br></pre></td></tr></table></figure><p>然后终端下面输入:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsu</span><br></pre></td></tr></table></figure><p>即可切换 <code>root</code> 用户，这个时候会弹出 <code>root</code> 授权提示，给予其 <code>root</code> 权限，效果图如下:</p><p><img src="https://image.3001.net/images/20180501/15251567018423.png" alt="18年的老图了 将就着看吧"></p><p>在管理员身份下，输入 <code>exit</code> 可回到普通用户身份。不过本文没有设计到 root 权限的操作，一些底层的工具可能才会需要，考虑到 root 的不安全性 和 那些工具的冷门性，国光这里就没有继续拓展。</p><h2 id="9-备份与恢复">9  备份与恢复</h2><p>评论区有网友提问 Termux 有办法打个镜像或者快照吗？😂 怕折腾坏了。也有网友分享了官方 WiKi 已经更新了备份和恢复的方法了，原文是：<a href="https://wiki.termux.com/wiki/Backing_up_Termux">https://wiki.termux.com/wiki/Backing_up_Termux</a></p><p>下面国光简单搬运过来：</p><p>强烈建议在复制粘贴之前了解对应命令的作用。误操作可能会不可挽回地损坏您的数据，数据无价，谨慎操作。</p><h3 id="9-1-备份">9.1 备份</h3><p>确保已经获取了存储访问的权限，如果没有获取的话，执行以下命令来重新获取访问权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-setup-storage</span><br></pre></td></tr></table></figure><p>然后去 Termux 根目录下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /data/data/com.termux/files</span><br></pre></td></tr></table></figure><p>备份配置文件为 termux-backup.tar.gz：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zcf /sdcard/termux-backup.tar.gz home usr</span><br></pre></td></tr></table></figure><p>备份应该完成，没有任何错误。除非用户滥用 root 权限，否则不应有任何权限拒绝。</p><blockquote><p><strong>警告</strong>：不要将备份文件存储在 Termux 私有目录中，因为从设置中清除 Termux 数据后，这些目录也将被删除。（类似于 Windows 准备重新安装系统，却把资料备份存储在 C 盘一个道理）</p></blockquote><p>这些私有目录看上去类似如下的目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/data/data/com.termux </span><br><span class="line">/sdcard/Android/data/com.termux</span><br><span class="line">/storage/XXXX-XXXX/Android/data/com.termux</span><br><span class="line"><span class="variable">$&#123;HOME&#125;</span>/storage/external-1</span><br></pre></td></tr></table></figure><p>珍爱数据，远离私有目录。</p><h3 id="9-2-恢复">9.2 恢复</h3><p>这里假设您已将 Termu 之前备份的 home 和 usr 目录备份到同一个备份文件中。请注意，在此过程中所有文件都将被覆盖现有的配置：</p><p>确保已经获取了存储访问的权限，如果没有获取的话，执行以下命令来重新获取访问权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-setup-storage</span><br></pre></td></tr></table></figure><p>然后去 Termux 根目录下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /data/data/com.termux/files</span><br></pre></td></tr></table></figure><p>解压提取之前备份的内容，覆盖现存的文件并删除之前的备份文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxf /sdcard/termux-backup.tar.gz --recursive-unlink --preserve-permissions</span><br></pre></td></tr></table></figure><p>操作完成重启 Termux 即可恢复数据。</p><hr><p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/%3Ca%20href=https:/www.sqlsec.com/2018/05/termux.html#%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE%3Ehttps:/www.sqlsec.com/2018/05/termux.html#%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE%3C/a%3E">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(<a href=https://image.3001.net/images/20200922/16007336487809.jpg>https://image.3001.net/images/20200922/16007336487809.jpg</a>)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Termux 高级终端安装使用配置教程</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div></p>]]></content>
    
    
    <summary type="html">进阶配置</summary>
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="termux" scheme="https://aizhiqian.github.io/tags/termux/"/>
    
    <category term="Android" scheme="https://aizhiqian.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>【Termux】高级终端安装使用配置教程 1</title>
    <link href="https://aizhiqian.github.io/posts/97199c1b/"/>
    <id>https://aizhiqian.github.io/posts/97199c1b/</id>
    <published>2023-07-22T17:58:20.000Z</published>
    <updated>2023-07-22T17:58:20.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://image.3001.net/images/20180501/15251875958364.png" alt="img"></p><div class="note green icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  Termux 高级终端安装使用配置教程，希望本文可以帮助到更多对 Termux 感兴趣的朋友，发挥 Android 平台更大的 DIY 空间。<br>🦋  仅供参考！</p></div><h1>1  学习资源</h1><p>考虑到手机用户体验和离线观看教程的需求，国光打包了几种风格的 PDF 版本，并且已经插入好目录，阅读体验会比较友好。</p><p><strong>黑色背景的 PDF</strong> : <a href="https://sqlsec.lanzoux.com/ibuzvna">Termux 入门指南（Vue 黑）</a></p><p><strong>白色背景的 PDF</strong> : <a href="https://sqlsec.lanzoux.com/ibuztyj">Termux 入门指南（Github 白）</a></p><p><strong>macOS light 风格</strong> : <a href="https://sqlsec.lanzoux.com/ibuzuxe">Termux 入门指南（macOS 白）</a></p><p><strong>Gothic 风格</strong> : <a href="https://sqlsec.lanzoux.com/ibuztch">Termux 入门指南（简约线条）</a></p><p>因为本文内容超级长，也包含了大量的图片，手机浏览起来难免会卡顿，而且如果你浏览比较拮据的话，还是建议看 PDF 版本的，国光还是比较建议有条件的同学使用 PC 端观看本文。</p><p>早期我的信息安全交流群里面陆陆续续加了很多 Temux 玩家，然而那是一个信息安全交流群，Termux 的提问经常没有人回答，所以后来我就把博客所有的加群链接给去了。现在国光我单独建立了 1 个 Temux 群，加群链接藏在本文当中，是一个<strong>彩蛋</strong>，缘妙不可言，随缘入群吧。好了话不多说，教程开始了，希望本文可以帮助到大家。</p><h1>2  Termux 简介</h1><p><strong>文档相关</strong></p><ul><li><a href="https://termux.dev/">Termux 官网</a></li><li><a href="https://github.com/termux/termux-app">Github 项目地址</a></li><li><a href="https://wiki.termux.com/wiki/Main_Page">官方英文 WiKi 文档</a></li></ul><p><strong>下载地址</strong></p><ul><li><p><a href="https://github.com/termux/termux-app/releases">Github下载地址</a></p></li><li><p><a href="https://f-droid.org/zh_Hans/packages/com.termux/">F-Droid 下载地址</a></p></li><li><p><a href="https://play.google.com/store/apps/details?id=com.termux">Google Play 下载地址</a></p></li><li><p><s><a href="https://www.coolapk.com/apk/com.termux">酷安 下载地址</a></s></p></li></ul><blockquote><p>Github、F-Droid 市场版本下载的版本比 Google Play （貌似 1 年多没有更新了）下载的要新，而且插件这块安装也很方便，有能力的朋友建议首先考虑下载 F-Droid 版本的，然后考虑 Github 版本，最后再考虑Google Play的版本。</p></blockquote><p>Termux 是一个 Android 下一个高级的终端模拟器，开源且不需要 root，支持 apt 管理软件包，十分方便安装软件包，完美支持 Python、 PHP、 Ruby、 Nodejs、 MySQL 等。随着智能设备的普及和性能的不断提升，如今的手机、平板等的硬件标准已达到了初级桌面计算机的硬件标准，用心去打造 DIY 的话完全可以把手机变成一个强大的极客工具。</p><p><strong>初始化</strong></p><p>第一次启动 Termux 的时候需要从远程服务器加载数据，然而可能会遇到这种问题：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Ubable to install</span><br><span class="line">Termux was unable to install the bootstrap packages.</span><br><span class="line">Check your network connection <span class="keyword">and</span> try again.</span><br></pre></td></tr></table></figure><p>这里的 Termux 官方远程的服务器地址是: <a href="http://termux.net/bootstrap/">http://termux.net/bootstrap/</a></p><p><img src="https://image.3001.net/images/20200418/15871943464391.png" alt="img"></p><p>目前解决方法有两种：</p><ol><li>VPN 全局代理 （成功率很高）</li><li>如果你是 WiFi 的话尝试切换到运营商流量 （有一定成功率）</li><li>① F-Droid &gt; ② Github &gt; ③ Google Play 根据这个顺序尝试安装，如果不行再重复 1、2 步骤操作</li></ol><h1>3  基本操作</h1><p>基本操作还是要学习一下的，可以事半功倍。</p><h2 id="3-1-缩放文本">3.1 缩放文本</h2><p>可以使用缩放手势来调整其字体大小。 对就是 「双指放大缩小」照片那样操作。</p><p><img src="https://image.3001.net/images/20200418/15872024914185.png" alt="img"></p><h2 id="3-2-长按屏幕">3.2 长按屏幕</h2><p>长按屏幕会调出显示菜单项（包括复制、粘贴、更多），方便我们进行复制或者粘贴：</p><p><img src="https://image.3001.net/images/20200418/15872022768181.png" alt="img"></p><p><code>More</code> 菜单的说明如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">长按屏幕</span><br><span class="line">├── COPY:    <span class="comment"># 复制</span></span><br><span class="line">├── PASTE:   <span class="comment"># 粘贴</span></span><br><span class="line">├── More:    <span class="comment"># 更多</span></span><br><span class="line">   ├── Select URL:             <span class="comment"># 提取屏幕所有网址</span></span><br><span class="line">   └── Share transcipt:        <span class="comment"># 分享命令脚本</span></span><br><span class="line">   └── Reset:                  <span class="comment"># 重置</span></span><br><span class="line">   └── Kill process:           <span class="comment"># 杀掉当前会话进程</span></span><br><span class="line">   └── Style:                  <span class="comment"># 风格配色 需要自行安装</span></span><br><span class="line">   └── Keep screen on:         <span class="comment"># 保持屏幕常亮</span></span><br><span class="line">   └── Help:                   <span class="comment"># 帮助文档</span></span><br></pre></td></tr></table></figure><h2 id="3-3-会话管理">3.3 会话管理</h2><p>显示隐藏式导航栏，可以新建、切换、重命名会话 session 和调用弹出输入法：</p><p><img src="https://image.3001.net/images/20200418/15872022029549.png" alt="img"></p><p>同时在 Android 的通知栏中也可以看到当前 Termux 运行的会话数：</p><p><img src="https://image.3001.net/images/20200418/15872026639062.png" alt="img"></p><h2 id="3-4-常用按键">3.4 常用按键</h2><p>常用键是 PC 端常用的按键如: ESC 键、Tab 键、CTR 键、ALT 键，有了这些按键后可以提高我们日常操作的效率，所以 Termux 后面的版本默认都是显示这个扩展功能按键的。</p><p><img src="https://image.3001.net/images/20200418/15872018464605.png" alt="img"></p><p>打开和隐藏这个扩展功能按键目前有下面两种方法：</p><p><strong>方法一</strong></p><p>从左向右滑动，显示隐藏式导航栏，长按左下角的 <code>KEYBOARD</code></p><p><strong>方法二</strong></p><p>使用 <code>Termux</code> 快捷键: <code>音量+</code>+<code>Q</code> 键 或者 <code>音量+</code>+<code>K</code> 键</p><p>当然这个常用按键在 Termux 后面的版本也支持自定义的，详情见本文的「进阶配置」-「定制常用按键」这一小节。</p><h1>4  基础知识</h1><p>这些基础知识简单了解一下就可以了，Linux 用的多了就会慢慢熟悉理解了。</p><h2 id="4-1-快捷键表">4.1 快捷键表</h2><p><code>Ctrl</code> 键是终端用户常用的按键，但大多数触摸键盘都没有这个按键，因此 Termux 使用<code>音量减小按钮</code>来模拟 <code>Ctrl</code> 键。<br>例如，在触摸键盘上按<code>音量减小</code> + <code>L</code> 就相当于是键盘上按 <code>Ctrl + L</code> 的效果一样，达到清屏的效果。</p><ul><li><code>Ctrl + A</code> -&gt; 将光标移动到行首</li><li><code>Ctrl + C</code> -&gt; 中止当前进程</li><li><code>Ctrl + D</code> -&gt; 注销终端会话</li><li><code>Ctrl + E</code> -&gt; 将光标移动到行尾</li><li><code>Ctrl + K</code> -&gt; 从光标删除到行尾</li><li><code>Ctrl + U</code> -&gt; 从光标删除到行首</li><li><code>Ctrl + L</code> -&gt; 清除终端</li><li><code>Ctrl + Z</code> -&gt; 挂起（发送 SIGTSTP 到）当前进程</li><li><code>Ctrl + alt + C</code> -&gt; 打开新会话（仅适用于 黑客键盘）</li></ul><p><code>音量加键</code>也可以作为产生特定输入的<code>特殊键</code>.</p><ul><li><code>音量加 + E</code> -&gt; Esc 键</li><li><code>音量加 + T</code> -&gt; Tab 键</li><li><code>音量加 + 1</code> -&gt; F1（<code>音量增加 + 2</code> → F2… 以此类推）</li><li><code>音量加 + 0</code> -&gt; F10</li><li><code>音量加 + B</code> -&gt; Alt + B，使用 readline 时返回一个单词</li><li><code>音量加 + F</code> -&gt; Alt + F，使用 readline 时转发一个单词</li><li><code>音量加 + X</code> -&gt; Alt+X</li><li><code>音量加 + W</code> -&gt; 向上箭头键</li><li><code>音量加 + A</code> -&gt; 向左箭头键</li><li><code>音量加 + S</code> -&gt; 向下箭头键</li><li><code>音量加 + D</code> -&gt; 向右箭头键</li><li><code>音量加 + L</code> -&gt; | （管道字符）</li><li><code>音量加 + H</code> -&gt; 〜（波浪号字符）</li><li><code>音量加 + U</code> -&gt; _ (下划线字符)</li><li><code>音量加 + P</code> -&gt; 上一页</li><li><code>音量加 + N</code> -&gt; 下一页</li><li><code>音量加 + .</code> -&gt; Ctrl + \（SIGQUIT）</li><li><code>音量加 + V</code> -&gt; 显示音量控制</li><li><code>音量加 + Q</code> -&gt; 切换显示的功能键视</li><li><code>音量加 + K</code> -&gt; 切换显示的功能键视图</li></ul><p>快捷键用的熟悉的话也可以极大提高操作的效率。</p><h2 id="4-2-基本命令">4.2 基本命令</h2><p>Termux 除了支持 <code>apt</code> 命令外，还在此基础上封装了 <code>pkg</code> 命令，<code>pkg</code> 命令向下兼容 <code>apt</code> 命令。<code>apt</code> 命令大家应该都比较熟悉了，这里直接简单的介绍下 <code>pkg</code> 命令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pkg search &lt;query&gt;              <span class="comment"># 搜索包</span></span><br><span class="line">pkg install &lt;package&gt;           <span class="comment"># 安装包</span></span><br><span class="line">pkg uninstall &lt;package&gt;         <span class="comment"># 卸载包</span></span><br><span class="line">pkg reinstall &lt;package&gt;         <span class="comment"># 重新安装包</span></span><br><span class="line">pkg update                      <span class="comment"># 更新源</span></span><br><span class="line">pkg upgrade                     <span class="comment"># 升级软件包</span></span><br><span class="line">pkg list-all                    <span class="comment"># 列出可供安装的所有包</span></span><br><span class="line">pkg list-installed              <span class="comment"># 列出已经安装的包</span></span><br><span class="line">pkg show &lt;package&gt;              <span class="comment"># 显示某个包的详细信息</span></span><br><span class="line">pkg files &lt;package&gt;             <span class="comment"># 显示某个包的相关文件夹路径</span></span><br></pre></td></tr></table></figure><blockquote><p>国光建议大家使用 pkg 命令，因为 pkg 命令每次安装的时候自动执行 apt update 命令，还是比较方便的。</p></blockquote><h2 id="4-3-软件安装">4.3 软件安装</h2><p>除了通过上述的 <code>pkg</code> 命令安装软件以外，如果我们有 <code>.deb</code> 软件包文件，也可以使用 <code>dpkg</code> 进行安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i ./package.de         <span class="comment"># 安装 deb 包</span></span><br><span class="line">dpkg --remove [package name] <span class="comment"># 卸载软件包</span></span><br><span class="line">dpkg -l                      <span class="comment"># 查看已安装的包</span></span><br><span class="line">man dpkg                     <span class="comment"># 查看详细文档</span></span><br></pre></td></tr></table></figure><h2 id="4-4-目录结构">4.4 目录结构</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$HOME</span></span><br><span class="line">/data/data/com.termux/files/home</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PREFIX</span></span><br><span class="line">/data/data/com.termux/files/usr</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$TMPPREFIX</span></span><br><span class="line">/data/data/com.termux/files/usr/tmp/zsh</span><br></pre></td></tr></table></figure><p>长期使用 Linux 的朋友可能会发现，这个 HOME 路径看上去和我们电脑端的不太一样，这是为了方便 Termux 提供的特殊的环境变量。</p><p><img src="https://image.3001.net/images/20180502/15252398558622.png" alt="img"></p><h2 id="4-5-端口查看">4.5 端口查看</h2><h3 id="4-5-1-Android-10-以下版本">4.5.1 Android 10 以下版本</h3><p>Andorid 10 以下的版本是可以正常使用 netstat 命令的，这样可以方便的查看端口开放信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有端口</span></span><br><span class="line">netstat -an</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看3306端口的开放情况</span></span><br><span class="line">netstat -an|grep 3306</span><br></pre></td></tr></table></figure><p><img src="https://image.3001.net/images/20200420/15873514956494.jpg" alt="img"></p><h3 id="4-5-2-Android-10-版本">4.5.2 Android 10 版本</h3><p>Andorid 10 版本的 Termux 下无法正常使用 netstat -an 命令，国光的解决方法是安装一个 nmap，然后扫描本地端口（弯道超车）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装nmap端口扫描神器</span></span><br><span class="line">pkg install nmap</span><br><span class="line"></span><br><span class="line"><span class="comment"># 扫描本地端口</span></span><br><span class="line">nmap 127.0.0.1</span><br></pre></td></tr></table></figure><p>使用 nmap 操作 纯属无奈之举，但是又不是不能用（源于：罗永浩名言 :-)）</p><p><img src="https://image.3001.net/images/20200420/15873522318400.jpg" alt="img"></p><hr><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://www.sqlsec.com/2018/05/termux.html">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://image.3001.net/images/20200922/16007336487809.jpg)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Termux 高级终端安装使用配置教程</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div>]]></content>
    
    
    <summary type="html">基础操作</summary>
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="termux" scheme="https://aizhiqian.github.io/tags/termux/"/>
    
    <category term="Android" scheme="https://aizhiqian.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】用gulp压缩静态资源</title>
    <link href="https://aizhiqian.github.io/posts/49b73b87/"/>
    <id>https://aizhiqian.github.io/posts/49b73b87/</id>
    <published>2023-07-22T17:54:57.000Z</published>
    <updated>2023-07-22T17:54:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-写在最前">1  写在最前</h2><p><a href="https://www.gulpjs.com.cn/">gulp</a>能够帮助用户自动压缩静态资源，配合各类下属插件，能够压缩包括css、js、html乃至各类格式的图片文件。（图片文件的压缩往往只能节省几十KB，效果远远不如imagine、tinypng等压缩方式，所以此处不再写使用gulp压缩图片的内容）。</p><h2 id="2-配置教程">2  配置教程</h2><ol><li><p>安装Gulp插件：在博客根目录<code>[Blogroot]</code>打开终端，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --global gulp-cli <span class="comment">#全局安装gulp指令集</span></span><br><span class="line">npm install gulp --save <span class="comment">#安装gulp插件</span></span><br></pre></td></tr></table></figure></li><li><p>安装各个下属插件以实现对各类静态资源的压缩。在此高呼卓越科技NB！</p><ul><li><p>压缩HTML：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-htmlclean --save-dev</span><br><span class="line">npm install gulp-html-minifier-terser --save-dev</span><br><span class="line"><span class="comment"># 用gulp-html-minifier-terser可以压缩HTML中的ES6语法</span></span><br></pre></td></tr></table></figure></li><li><p>压缩CSS：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-clean-css --save-dev</span><br></pre></td></tr></table></figure></li><li><p>压缩JS</p><p><a href="https://github.com/duan602728596/gulp-terser">gulp-terser</a>只会直接压缩js代码，不存在因为语法变动导致的错误。事实上，当我们使用<code>jsdelivr</code>的<code>CDN</code>服务时，只需要在<code>css</code>或者<code>js</code>的后缀前添加<code>.min</code>,例如<code>example.js-&gt;example.min.js</code>,<code>JsDelivr</code>就会自动使用<code>terser</code>帮我们压缩好代码。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-terser --save-dev</span><br></pre></td></tr></table></figure></li><li><p>压缩字体包</p><p>字体文件作为最让人又爱又恨的静态资源，为了保证站点文字匹配，全字库字体包往往超过15MB，这对博客的加载速度造成了巨大压力。fontmin可以遍历博客内用到的字符，并将字体包内这些字符的字体样式提取出来输出为新的字体包。</p><p>font-min仅支持压缩<code>ttf</code>格式的字体包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-fontmin --save-dev</span><br></pre></td></tr></table></figure></li></ul></li><li><p>为Gulp创建<code>gulpfile.js</code>任务脚本。在博客根目录<code>[Blogroot]</code>下新建<code>gulpfile.js</code>,打开<code>[Blogroot]\gulpfile.js</code>,输入以下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用到的各个插件</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> cleanCSS = <span class="built_in">require</span>(<span class="string">&#x27;gulp-clean-css&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-html-minifier-terser&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fontmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-fontmin&#x27;</span>);</span><br><span class="line"><span class="comment">// gulp-tester</span></span><br><span class="line"><span class="keyword">var</span> terser = <span class="built_in">require</span>(<span class="string">&#x27;gulp-terser&#x27;</span>);</span><br><span class="line"><span class="comment">// 压缩js</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;compress&#x27;</span>, <span class="title function_">async</span>() =&gt;&#123;</span><br><span class="line">  gulp.<span class="title function_">src</span>([<span class="string">&#x27;./public/**/*.js&#x27;</span>, <span class="string">&#x27;!./public/**/*.min.js&#x27;</span>])</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">terser</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//压缩css</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-css&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>([<span class="string">&#x27;./public/**/*.css&#x27;</span>])</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">cleanCSS</span>(&#123;</span><br><span class="line">            <span class="attr">compatibility</span>: <span class="string">&#x27;ie11&#x27;</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//压缩html</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-html&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.html&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">htmlclean</span>())</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">htmlmin</span>(&#123;</span><br><span class="line">            <span class="attr">removeComments</span>: <span class="literal">true</span>, <span class="comment">//清除html注释</span></span><br><span class="line">            <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>, <span class="comment">//压缩html</span></span><br><span class="line">            <span class="attr">collapseBooleanAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//省略布尔属性的值，例如：&lt;input checked=&quot;true&quot;/&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">            <span class="attr">removeEmptyAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//删除所有空格作属性值，例如：&lt;input id=&quot;&quot; /&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">            <span class="attr">removeScriptTypeAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//删除&lt;script&gt;的type=&quot;text/javascript&quot;</span></span><br><span class="line">            <span class="attr">removeStyleLinkTypeAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//删除&lt;style&gt;和&lt;link&gt;的 type=&quot;text/css&quot;</span></span><br><span class="line">            <span class="attr">minifyJS</span>: <span class="literal">true</span>, <span class="comment">//压缩页面 JS</span></span><br><span class="line">            <span class="attr">minifyCSS</span>: <span class="literal">true</span>, <span class="comment">//压缩页面 CSS</span></span><br><span class="line">            <span class="attr">minifyURLs</span>: <span class="literal">true</span>  <span class="comment">//压缩页面URL</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//压缩字体</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">minifyFont</span>(<span class="params">text, cb</span>) &#123;</span><br><span class="line">  gulp</span><br><span class="line">    .<span class="title function_">src</span>(<span class="string">&#x27;./public/fonts/*.ttf&#x27;</span>) <span class="comment">//原字体所在目录</span></span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">fontmin</span>(&#123;</span><br><span class="line">      <span class="attr">text</span>: text</span><br><span class="line">    &#125;))</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public/fontsdest/&#x27;</span>)) <span class="comment">//压缩后的输出目录</span></span><br><span class="line">    .<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, cb);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;mini-font&#x27;</span>, <span class="function">(<span class="params">cb</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> buffers = [];</span><br><span class="line">  gulp</span><br><span class="line">    .<span class="title function_">src</span>([<span class="string">&#x27;./public/**/*.html&#x27;</span>]) <span class="comment">//HTML文件所在目录请根据自身情况修改</span></span><br><span class="line">    .<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">file</span>) &#123;</span><br><span class="line">      buffers.<span class="title function_">push</span>(file.<span class="property">contents</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> text = <span class="title class_">Buffer</span>.<span class="title function_">concat</span>(buffers).<span class="title function_">toString</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">      <span class="title function_">minifyFont</span>(text, cb);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 运行gulp命令时依次执行以下任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, gulp.<span class="title function_">parallel</span>(</span><br><span class="line">  <span class="string">&#x27;compress&#x27;</span>, <span class="string">&#x27;minify-css&#x27;</span>, <span class="string">&#x27;minify-html&#x27;</span>,<span class="string">&#x27;mini-font&#x27;</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure></li><li><p>在每次运行完<code>hexo generate</code>生成静态页面后，运行<code>gulp</code>对其进行压缩。指令流程如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">gulp</span><br><span class="line">hexo server 或 hexo deploy</span><br></pre></td></tr></table></figure></li><li><p>关于font-min的补充说明，在本文中，是通过读取所有编译好的html文件（<code>./public/**/*.html</code>）中的字符，然后匹配原有字体包内<code>./public/fonts/*.ttf</code>字体样式，输出压缩后的字体包到<code>./public/fontsdest/</code>目录。所以最终引用字体的相对路径应该是<code>/fontsdest/*.ttf</code>。而本地测试时，如果没有运行gulp，自然也就不会输出压缩字体包到public目录，也就看不到字体样式。</p></li></ol><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://akilar.top/posts/49b73b87">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://jihulab.com/ainiz/img1/-/raw/main/Safari.webp)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">添加对随机图片api的支持</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-写在最前&quot;&gt;1  写在最前&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.gulpjs.com.cn/&quot;&gt;gulp&lt;/a&gt;能够帮助用户自动压缩静态资源，配合各类下属插件，能够压缩包括css、js、html乃至各类格式的图片文件。（图片文件的压缩往往</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>【收藏】CDN服务</title>
    <link href="https://aizhiqian.github.io/posts/40b835fa/"/>
    <id>https://aizhiqian.github.io/posts/40b835fa/</id>
    <published>2023-07-22T17:52:11.000Z</published>
    <updated>2023-07-22T17:52:11.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-背景">1  背景</h2><p>目前国内有很多 NPM 的 CDN，可以高速支持相关包文件的访问下载，如：</p><ul><li>BootCDN: <a href="https://www.bootcdn.cn">www.bootcdn.cn</a></li><li>七牛云: <a href="https://www.staticfile.org/">www.staticfile.org</a></li><li>75CDN: <a href="https://cdn.baomitu.com/">cdn.baomitu.com</a></li><li>字节跳动: <a href="https://cdn.bytedance.com/">cdn.bytedance.com</a></li></ul><p>但这些 CDN 并不全，很多 NPM 上的包 在这些 CDN 上是找不到的。原因是，它们都是从 <a href="https://cdnjs.com/">CDNJS</a> 上同步的数据，CDNJS 并不会把所有的 NPM 包进行同步，所以当你需要的一些 NPM 包没有在 CDNJS 上面，你就用不了上面这些国内 CDN 了。</p><p>解决可以访问所有 NPM 包的问题，可以使用 <a href="https://unpkg.com/">unpkg</a>，但它的访问速度在国内并不佳：</p><!-- ![image](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307171602385.png) --><p><img src="https://p0.meituan.net/csc/57e38dbadadbae4203d65ab88fd99056133485.jpg" alt="image"></p><p>和它相同功能的 <a href="https://www.jsdelivr.com/">jsdelivr</a>，在国内的速度也不佳：</p><!-- ![image](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307171603916.png) --><p><img src="https://p0.meituan.net/csc/747fe094800f544290ba7fce96145314135527.jpg" alt="image"></p><p>于是就整理了下，国内的 Unpkg 替代品。</p><h2 id="2-CDN-npm资源">2  CDN npm资源</h2><p>【<a href="https://cdn.cbd.int/#/">unpkg自建</a>】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.cbd.int/:package@:version/:file</span><br></pre></td></tr></table></figure><p>【饿了么】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://npm.elemecdn.com/:package@:version/:file</span><br><span class="line">https://github.elemecdn.com/:package@:version/:file</span><br></pre></td></tr></table></figure><p>【知乎】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://unpkg.zhimg.com/:package@:version/:file</span><br></pre></td></tr></table></figure><p>【<a href="https://cdn.onmicrosoft.cn/">渺软公益 CDN</a>】</p><p>【<a href="https://cdn.chuqis.com/">初七云</a>】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.chuqis.com/npm/:package@:version/:file</span><br></pre></td></tr></table></figure><p>【ChinaJsDelivr】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://jsd.cdn.zzko.cn/npm/:package@:version/:file</span><br></pre></td></tr></table></figure><p>【<a href="https://www.jsdelivr.com/">jsDelivr(慢)</a>】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.jsdelivr.net/npm/:package@:version/:file</span><br><span class="line">https://fastly.jsdelivr.net/npm/:package@:version/:file</span><br></pre></td></tr></table></figure><p>【crazywong】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://file.crazywong.com/npm/:package@:version/:file</span><br></pre></td></tr></table></figure><h2 id="3-CDN-gh资源">3  CDN gh资源</h2><p>【<a href="https://cdn.onmicrosoft.cn/">渺软公益 CDN</a>】</p><p>【crazywong】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://jsd.012700.xyz/gh/:user/:repo@:version或branch/:file</span><br></pre></td></tr></table></figure><p>【<a href="https://cdn.chuqis.com/">初七云</a>】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.chuqis.com/gh/:user/:repo@:version或branch/:file</span><br></pre></td></tr></table></figure><p>【ChinaJsDelivr】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://jsd.cdn.zzko.cn/gh/:user/:repo@:version或branch/:file</span><br></pre></td></tr></table></figure><p>【<a href="https://www.jsdelivr.com/">jsDelivr(慢)</a>】</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.jsdelivr.net/gh/:user/:repo@:version或branch/:file</span><br><span class="line">https://fastly.jsdelivr.net/gh/:user/:repo@:version或branch/:file</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-背景&quot;&gt;1  背景&lt;/h2&gt;
&lt;p&gt;目前国内有很多 NPM 的 CDN，可以高速支持相关包文件的访问下载，如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BootCDN: &lt;a href=&quot;https://www.bootcdn.cn&quot;&gt;www.bootcdn.cn&lt;/a&gt;&lt;</summary>
      
    
    
    
    <category term="资源分享" scheme="https://aizhiqian.github.io/categories/%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="CDN" scheme="https://aizhiqian.github.io/tags/CDN/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】标签外挂</title>
    <link href="https://aizhiqian.github.io/posts/54667693/"/>
    <id>https://aizhiqian.github.io/posts/54667693/</id>
    <published>2023-07-22T17:50:39.000Z</published>
    <updated>2023-07-22T17:50:39.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-Tabs">1  Tabs</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一个Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字为第一个Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有图标 没有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">第一个Tab</button><button type="button" class="tab " data-href="test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button><button type="button" class="tab " data-href="test4-3"><i class="fas fa-bomb"></i>炸弹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字为第一个Tab</strong></p></div><div class="tab-item-content" id="test4-2"><p><strong>只有图标 没有Tab名字</strong></p></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><h2 id="2-Note">2  Note</h2><h3 id="2-1-方法1">2.1 方法1</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note default flat %&#125;</span><br><span class="line">default 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;</span><br><span class="line">primary 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;</span><br><span class="line">success 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;</span><br><span class="line">info 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;</span><br><span class="line">warning 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;</span><br><span class="line">danger 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note default flat"><p>default 提示块标签</p></div><div class="note primary flat"><p>primary 提示块标签</p></div><div class="note success flat"><p>success 提示块标签</p></div><div class="note info flat"><p>info 提示块标签</p></div><div class="note warning flat"><p>warning 提示块标签</p></div><div class="note danger flat"><p>danger 提示块标签</p></div><h3 id="2-2-方法2-自定义图标">2.2 方法2(自定义图标)</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">小心开车 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">这是三片呢？还是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 还是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">剪刀石头布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">前端最讨厌的浏览器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><h2 id="3-tag-hide">3  tag-hide</h2><div class="note warning flat"><p>请注意，tag-hide内的标签外挂content内都不建议有h1 - h6 等标题。因为Toc会把隐藏内容标题也显示出来，而且当滚动屏幕时，如果隐藏内容没有显示出来，会导致Toc的滚动出现异常。</p></div><p>如果你想把一些文字、内容隐藏起来，并提供按钮让用户点击显示。可以使用这个标签外挂。</p><div class="tabs" id="tag-hide"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="tag-hide-1">Inline</button><button type="button" class="tab " data-href="tag-hide-2">Block</button><button type="button" class="tab " data-href="tag-hide-3">Toggle</button></ul><div class="tab-contents"><div class="tab-item-content active" id="tag-hide-1"><p><code>inline</code> 在文本里面添加按钮隐藏内容，只限文字</p><p>( content不能包含英文逗号，可用<code>&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideInline content,display,bg,color %&#125;</span><br></pre></td></tr></table></figure><ul><li><p>content: 文本内容</p></li><li><p>display: 按钮显示的文字(可选)</p></li><li><p>bg: 按钮的背景颜色(可选)</p></li><li><p>color: 按钮文字的颜色(可选)</p></li></ul><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">哪个英文字母最酷？ &#123;% hideInline 因为西装裤(C装酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">门里站着一个人? &#123;% hideInline 闪 %&#125;</span><br></pre></td></tr></table></figure><p>哪个英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案<br></button><span class="hide-content">因为西装裤(C装酷)</span></span></p><p>门里站着一个人? <span class="hide-inline"><button type="button" class="hide-button" style="">Click<br></button><span class="hide-content">闪</span></span></p></div><div class="tab-item-content" id="tag-hide-2"><p><code>block</code>独立的block隐藏内容，可以隐藏很多内容，包括图片，代码块等等</p><p>( display 不能包含英文逗号，可用<code>&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: 文本内容</li><li>display: 按钮显示的文字(可选)</li><li>bg: 按钮的背景颜色(可选)</li><li>color: 按钮文字的颜色(可选)</li></ul><blockquote><p>Demo</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查看答案</span><br><span class="line">&#123;% hideBlock 查看答案 %&#125;</span><br><span class="line">傻子，怎么可能有答案</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><p>查看答案</p><div class="hide-block"><button type="button" class="hide-button" style="">查看答案    </button><div class="hide-content"><p>傻子，怎么可能有答案</p></div></div></div><div class="tab-item-content" id="tag-hide-3"><p>如果你需要展示的内容太多，可以把它隐藏在收缩框里，需要时再把它展开。</p><p>( display 不能包含英文逗号，可用<code>&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideToggle display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideToggle Butterfly安装方法 %&#125;</span><br><span class="line">在你的博客根目录里</span><br><span class="line"></span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">如果想要安装比较新的dev分支，可以</span><br><span class="line"></span><br><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">&#123;% endhideToggle %&#125;。</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">Butterfly安裝方法</summary><div class="toggle-content"><p>在你的博客根目录里</p><p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p><p>如果想要安裝比较新的dev分支，可以</p><p>git clone -b dev <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p></div></details></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><h2 id="4-链接卡片">4  链接卡片</h2><p>详见：<a href="https://b.leonus.cn/2022/link-card.html">语雀同款链接卡片</a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link 链接,标题,图标,介绍 %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例如下:</span><br><span class="line">&#123;% link https://blog.leonus.cn/,Leonus,https://blog.leonus.cn/favicon.ico,进一寸有进一寸的欢喜。 %&#125;</span><br><span class="line">你也可以什么都不填，将会全部使用默认值，如下：</span><br><span class="line">&#123;% card %&#125;</span><br><span class="line">你也可以省略部分内容，如下：</span><br><span class="line">&#123;% link https://blog.leonus.cn/ %&#125;</span><br><span class="line">位置在后面的参数不填的话可以直接省略，但是如果中间的不想填必须留空，如下：</span><br><span class="line">&#123;% link https://blog.leonus.cn/,,,进一寸有进一寸的欢喜。 %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>其中标题默认为：点击直达链接<br>图标默认为：iPhone浏览器图标</p></blockquote><h2 id="5-常用">5  常用</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock 预览效果,#39C5BB,#FFFFFF %&#125;</span><br><span class="line">text</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% hideToggle 点击查看教程,#e8fafe,#444444 %&#125;</span><br><span class="line">text</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% hideToggle 点击查看教程,#e8fafe,#444444 %&#125;</span><br><span class="line">&#123;% hideBlock 预览效果,#39C5BB,#FFFFFF %&#125;</span><br><span class="line">可以隐藏照片、代码块等</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br><span class="line">text</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><p>test</p></div></div><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>test</p></div></details><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><p>可以隐藏照片、代码块等</p></div></div>text</div></details>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-Tabs&quot;&gt;1  Tabs&lt;/h2&gt;
&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>【脚本】阿里云盘自动签到</title>
    <link href="https://aizhiqian.github.io/posts/d36cb6f7/"/>
    <id>https://aizhiqian.github.io/posts/d36cb6f7/</id>
    <published>2023-07-22T17:47:03.000Z</published>
    <updated>2024-04-27T10:12:15.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-执行思路">1  执行思路</h2><p>使用金山文档的每日定时任务，执行阿里云盘签到接口。</p><p>无需部署，无需服务器，每个月更新一次token。</p><p>先看本人的自动签到效果：</p><p><img src="https://pic4.zhimg.com/80/v2-981c98c914211e0fef5a17f5cd6a3baf_1440w.webp" alt="img"></p><p>废话不多说，方法如下：</p><h2 id="2-进入金山文档网页版">2  进入<a href="https://www.kdocs.cn/">金山文档</a>网页版</h2><p><img src="https://pic1.zhimg.com/80/v2-96190f7fe4323322121b7af0e784b6b8_1440w.webp" alt="img"></p><h2 id="3-新建">3  新建</h2><p>随便新建一个空表格，点击【效率】-【高级开发】-【AirScript脚本编辑器】</p><p><img src="https://pic3.zhimg.com/80/v2-d01c8b0764844128e7d4106ce8c2bf06_1440w.webp" alt="img"></p><h2 id="4-创建脚本">4  创建脚本</h2><p>点击【创建脚本】-【文档共享脚本】</p><p><img src="https://pic1.zhimg.com/80/v2-0dc26214837e0d12b5c846de261d47c4_1440w.webp" alt="img"></p><h2 id="5-命名">5  命名</h2><p>创建成功后随便命名，我这里命名为：阿里云盘签到</p><p><img src="https://pic4.zhimg.com/80/v2-69d857dbdbe3a1f25d064b965430910b_1440w.webp" alt="img"></p><h2 id="6-添加服务">6  添加服务</h2><p>点击【服务】-【添加服务】</p><p><img src="https://pic3.zhimg.com/80/v2-2eacf2cbffbe3311e655e3f0883b5de6_1440w.webp" alt="img"></p><p>将三个服务全部添加</p><p><img src="https://pic4.zhimg.com/80/v2-13864c098691acee9905d7105cb1f38f_1440w.webp" alt="img"></p><h2 id="7-添加代码">7  添加代码</h2><p>将以下代码复制到编辑器中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> data_time = myDate.<span class="title function_">toLocaleDateString</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sleep</span>(<span class="params">d</span>)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> t = <span class="title class_">Date</span>.<span class="title function_">now</span>();<span class="title class_">Date</span>.<span class="title function_">now</span>() - t &lt;= d;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> value= <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> ii = <span class="number">2</span>; ii &lt;= <span class="number">20</span>; ii++)&#123;</span><br><span class="line">  dyg = <span class="string">&quot;A&quot;</span>+ii</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> refresh_token = <span class="title class_">Application</span>.<span class="title class_">Range</span>(dyg).<span class="property">Text</span></span><br><span class="line">  <span class="keyword">if</span>(refresh_token != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">    <span class="comment">// 发起网络请求-获取token</span></span><br><span class="line">    <span class="keyword">let</span> data = <span class="variable constant_">HTTP</span>.<span class="title function_">post</span>(<span class="string">&quot;https://auth.aliyundrive.com/v2/account/token&quot;</span>,</span><br><span class="line">          <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">          <span class="string">&quot;grant_type&quot;</span>: <span class="string">&quot;refresh_token&quot;</span>,</span><br><span class="line">          <span class="string">&quot;refresh_token&quot;</span>:refresh_token</span><br><span class="line">          &#125;)</span><br><span class="line">    )</span><br><span class="line">    data = data.<span class="title function_">json</span>()</span><br><span class="line">    <span class="keyword">var</span> access_token = data[<span class="string">&#x27;access_token&#x27;</span>]</span><br><span class="line">    <span class="keyword">var</span> phone = data[<span class="string">&quot;user_name&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>  (access_token == <span class="literal">undefined</span>)&#123;</span><br><span class="line">      <span class="keyword">var</span> value =<span class="string">&quot;单元格【&quot;</span>+dyg+<span class="string">&quot;】内的token值错误，程序执行失败，请重新复制正确的token值&quot;</span>+<span class="string">&quot;\n&quot;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> access_token2 = <span class="string">&#x27;Bearer &#x27;</span>+access_token</span><br><span class="line">        <span class="comment">// 签到</span></span><br><span class="line">        <span class="keyword">let</span> data2 = <span class="variable constant_">HTTP</span>.<span class="title function_">post</span>(<span class="string">&quot;https://member.aliyundrive.com/v1/activity/sign_in_list&quot;</span>,</span><br><span class="line">              <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="string">&quot;_rx-s&quot;</span>: <span class="string">&quot;mobile&quot;</span>&#125;),</span><br><span class="line">              &#123;<span class="attr">headers</span>:&#123;<span class="string">&quot;Authorization&quot;</span>:access_token2&#125;&#125;</span><br><span class="line">        )</span><br><span class="line">        data2=data2.<span class="title function_">json</span>()</span><br><span class="line">        <span class="keyword">var</span> signin_count = data2[<span class="string">&#x27;result&#x27;</span>][<span class="string">&#x27;signInCount&#x27;</span>]</span><br><span class="line">        <span class="keyword">var</span> value =value+ <span class="string">&quot;账号：&quot;</span>+data[<span class="string">&quot;user_name&quot;</span>]+<span class="string">&quot;-签到成功, 本月累计签到&quot;</span>+ signin_count+<span class="string">&quot;天&quot;</span>+<span class="string">&quot;\n&quot;</span></span><br><span class="line"></span><br><span class="line">      &#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value =<span class="string">&quot;单元格【&quot;</span>+dyg+<span class="string">&quot;】内的token签到失败&quot;</span>+<span class="string">&quot;\n&quot;</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">sleep</span>(<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> sflq = <span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;B&quot;</span>+ii).<span class="property">Text</span></span><br><span class="line">      <span class="keyword">if</span> (sflq == <span class="string">&quot;是&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">          <span class="comment">// 领取奖励</span></span><br><span class="line">          <span class="keyword">let</span> data3 = <span class="variable constant_">HTTP</span>.<span class="title function_">post</span>(</span><br><span class="line">            <span class="string">&quot;https://member.aliyundrive.com/v1/activity/sign_in_reward?_rx-s=mobile&quot;</span>,</span><br><span class="line">            <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="string">&quot;signInDay&quot;</span>: signin_count&#125;),</span><br><span class="line">            &#123;<span class="attr">headers</span>:&#123;<span class="string">&quot;Authorization&quot;</span>:access_token2&#125;&#125;</span><br><span class="line">          )</span><br><span class="line">          data3=data3.<span class="title function_">json</span>()</span><br><span class="line">          <span class="keyword">var</span> value = value +<span class="string">&quot;本次签到获得&quot;</span>+data3[<span class="string">&quot;result&quot;</span>][<span class="string">&quot;name&quot;</span>] +<span class="string">&quot;,&quot;</span>+data3[<span class="string">&quot;result&quot;</span>][<span class="string">&quot;description&quot;</span>]+<span class="string">&quot;\n&quot;</span></span><br><span class="line">        &#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">              <span class="keyword">var</span> value = value+ <span class="string">&quot;账号：&quot;</span>+data[<span class="string">&quot;user_name&quot;</span>]+<span class="string">&quot;-领取奖励失败&quot;</span>+<span class="string">&quot;\n&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        value = value +<span class="string">&quot;   奖励待领取&quot;</span>+<span class="string">&quot;\n&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line"><span class="keyword">var</span> sftz = <span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;E&quot;</span>+<span class="number">1</span>).<span class="property">Text</span></span><br><span class="line"><span class="keyword">if</span> (sftz==<span class="string">&quot;是&quot;</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> jsyx = <span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;E&quot;</span>+<span class="number">2</span>).<span class="property">Text</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> zdyfs = <span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;H&quot;</span>+<span class="number">1</span>).<span class="property">Text</span></span><br><span class="line">  <span class="keyword">if</span> (zdyfs == <span class="string">&quot;是&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> zdy_host = <span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;H&quot;</span>+<span class="number">2</span>).<span class="property">Text</span></span><br><span class="line">    <span class="keyword">var</span> zdy_post =<span class="title class_">Number</span>(<span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;H&quot;</span>+<span class="number">3</span>).<span class="property">Text</span>)</span><br><span class="line">    <span class="keyword">var</span> zdy_username = <span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;H&quot;</span>+<span class="number">4</span>).<span class="property">Text</span></span><br><span class="line">    <span class="keyword">var</span> zdy_pasd = <span class="title class_">Application</span>.<span class="title class_">Range</span>(<span class="string">&quot;H&quot;</span>+<span class="number">5</span>).<span class="property">Text</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> zdy_host = <span class="string">&quot;smtp.163.com&quot;</span></span><br><span class="line">    <span class="keyword">var</span> zdy_post = <span class="number">465</span></span><br><span class="line">    <span class="keyword">var</span> zdy_username = <span class="string">&quot;fs8484848@163.com&quot;</span></span><br><span class="line">    <span class="keyword">var</span> zdy_pasd = <span class="string">&quot;QADSEMPKDHDAVWVD&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置发送邮箱</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> mailer = <span class="variable constant_">SMTP</span>.<span class="title function_">login</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: zdy_host, <span class="comment">// 邮箱 的SMTP服务器的域名</span></span><br><span class="line">    <span class="attr">port</span>: zdy_post,</span><br><span class="line">    <span class="attr">username</span>: zdy_username, <span class="comment">// 邮箱地址</span></span><br><span class="line">    <span class="attr">password</span>:zdy_pasd, <span class="comment">// 邮箱的SMTP密码，非密码</span></span><br><span class="line">    <span class="attr">secure</span>: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(jsyx != <span class="string">&quot;fs8484848@163.com&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      mailer.<span class="title function_">send</span>(&#123;</span><br><span class="line">          <span class="attr">from</span>: <span class="string">&quot;阿里云盘签到&lt;&quot;</span>+zdy_username+<span class="string">&quot;&gt;&quot;</span>, <span class="comment">// 发件人</span></span><br><span class="line">          <span class="attr">to</span>: jsyx, <span class="comment">// 收件人</span></span><br><span class="line">          <span class="attr">subject</span>: <span class="string">&quot;阿里云盘签到通知-&quot;</span>+data_time, <span class="comment">// 主题</span></span><br><span class="line">          <span class="attr">text</span>: value, <span class="comment">// 文本</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送邮件失败&quot;</span>+error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;不可发送至该邮箱&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-获取-refresh-token">8  获取 refresh_token</h2><p>从浏览器中获取 refresh_token 的值：浏览器登录阿里云盘</p><p><img src="https://pic2.zhimg.com/80/v2-27500b4fb6e5329f783f79ebe7dfa159_1440w.webp" alt="img"></p><h2 id="9-填写-refresh-token">9  填写 refresh_token</h2><p>将refresh_token 的值复制到表格中，（A2-A20）可以写入多个账号的refresh_token</p><p><img src="https://pic4.zhimg.com/80/v2-01da416c049ca3b826fda8fbfc298783_1440w.webp" alt="img"></p><h2 id="10-填写表格内容">10  填写表格内容</h2><p>1、填写是否领取奖励（是的话会自动领取签到奖励，为否的话只签到，需要用的时候自己手动领取签到奖励）</p><p>2、填写是否发送邮箱通知，发送邮箱通知的话，要写入接收邮箱的地址，不发送就不用写</p><p>3、填写是否自定义发送邮箱，这里推荐会弄SMTP的人自己填写自己的发送邮箱配置（发送和接收的邮箱可以相同），不会弄的人就写否或者不写就好了，我在代码里写了一个发送邮箱，但是邮箱有每日限制发送数量，可能会有接收不到邮件的情况。</p><p><img src="https://pic3.zhimg.com/80/v2-a242dfe6cdccb83200036495f76df68e_1440w.webp" alt="img"></p><p>上面表格中，代码只读取框住的部分，位置写对就行，其他地方无所谓</p><h2 id="11-保存运行">11  保存运行</h2><p>脚本中，点击上方的【保存】按钮，再点击【运行】按钮</p><p><img src="https://pic1.zhimg.com/80/v2-7fa256ad98c37209b3c0b315fdf31e74_1440w.webp" alt="img"></p><p>确保下方日志是成功的后进行下一步</p><h2 id="12-创建定时任务">12  创建定时任务</h2><p>关闭代码编辑框，点击【效率】-【高级开发】-【定时任务】</p><p><img src="https://pic4.zhimg.com/80/v2-fdf1dabcd5e8360e0a4728eb1b72284f_1440w.webp" alt="img"></p><p>点击【创建任务】</p><p><img src="https://pic3.zhimg.com/80/v2-8f63cb13f5a4066835dd53c02b7fb966_1440w.webp" alt="img"></p><h2 id="13-设置定时任务">13  设置定时任务</h2><p>设置每天运行的时间，选择刚刚选择的脚本，保存，大功告成</p><p><img src="https://pic3.zhimg.com/80/v2-67e5c7e200003588dca214bc3b35ae5e_1440w.webp" alt="img"></p><h2 id="14-成品展示">14  成品展示</h2><p><img src="https://pic4.zhimg.com/80/v2-69bca82e6f82252e1670cff76752f8c7_1440w.webp" alt="img"></p><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>再次建议：发送邮箱的SMTP填写自己的邮箱配置，原本没想到会有这么多人用，但现在有点出乎意料，我那个邮箱的每日发送额度不够哇。</p></div><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://zhuanlan.zhihu.com/p/629476969">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.81060cab.png)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">转载来源直达</div>            <div class="tag-link-sitename"> 阿里云盘自动签到</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div>]]></content>
    
    
    <summary type="html">使用金山文档，无需部署，无需服务器</summary>
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="签到" scheme="https://aizhiqian.github.io/tags/%E7%AD%BE%E5%88%B0/"/>
    
    <category term="脚本" scheme="https://aizhiqian.github.io/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】文章封面添加随机图API</title>
    <link href="https://aizhiqian.github.io/posts/ecf98aaa/"/>
    <id>https://aizhiqian.github.io/posts/ecf98aaa/</id>
    <published>2023-07-22T17:41:55.000Z</published>
    <updated>2023-07-22T17:41:55.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-前言">1  前言</h2><p>在配置 butterfly 主题的时候发现一个问题，如果将主頁、文章封面的默认 top_img 配置为同一个随机图片 api 时会出现所有图片都相同的情况：</p><p><img src="https://p0.meituan.net/csc/db99a462757b342adc0fb35409ddc81c184661.jpg" alt="image"></p><h2 id="2-如何解决">2  如何解决</h2><p>最开始我的解决方案是配置多个随机图片 api：</p><p><img src="https://p0.meituan.net/csc/e08ba25af5ed84a112b0a95a95d4841a33672.jpg" alt="image (1)"></p><p>用了一段时间后对随机的图片不是很满意，<s>为了符合自己的 XP</s> 就自己弄了个随机图片 api。然后就又回到了最开始的问题，刚好之前在浏览 Issues 的时候发现有人提交了个 <a href="https://github.com/jerryc127/hexo-theme-butterfly/pull/1054">PR</a> 可惜并未通过。详细配置方法如下：</p><ol><li>打开 <code>hexo根目录\themes\butterfly\scripts</code> 新建一个 random_img.js 文件。</li></ol><p><img src="https://p0.meituan.net/csc/64d0fe48534fab0cf9f21ea109390f4749348.jpg" alt="image (2)"></p><ol start="2"><li>将以下代码复制进 random_img.js 文件并保存。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Butterfly</span></span><br><span class="line"><span class="comment"> * ramdom cover</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;before_post_render&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; config &#125; = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">if</span> (config.<span class="property">post_asset_folder</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> imgTestReg = <span class="regexp">/\.(png|jpe?g|gif|svg|webp)(\?.*)?$/</span></span><br><span class="line">    <span class="keyword">const</span> topImg = data.<span class="property">top_img</span></span><br><span class="line">    <span class="keyword">const</span> cover = data.<span class="property">cover</span></span><br><span class="line">    <span class="keyword">if</span> (topImg &amp;&amp; topImg.<span class="title function_">indexOf</span>(<span class="string">&#x27;/&#x27;</span>) === -<span class="number">1</span> &amp;&amp; imgTestReg.<span class="title function_">test</span>(topImg)) data.<span class="property">top_img</span> = data.<span class="property">path</span> + topImg</span><br><span class="line">    <span class="keyword">if</span> (cover &amp;&amp; cover.<span class="title function_">indexOf</span>(<span class="string">&#x27;/&#x27;</span>) === -<span class="number">1</span>) data.<span class="property">cover</span> = data.<span class="property">path</span> + cover</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">cover</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">    data.<span class="property">randomcover</span> = <span class="title function_">randomCover</span>()</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  data.<span class="property">cover</span> = data.<span class="property">cover</span> || <span class="title function_">randomCover</span>()</span><br><span class="line">  <span class="keyword">return</span> data</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomCover</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = hexo.<span class="property">theme</span>.<span class="property">config</span></span><br><span class="line">  <span class="keyword">let</span> cover</span><br><span class="line">  <span class="keyword">let</span> num</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (theme.<span class="property">cover</span> &amp;&amp; theme.<span class="property">cover</span>.<span class="property">default_cover</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(theme.<span class="property">cover</span>.<span class="property">default_cover</span>)) &#123;</span><br><span class="line">      cover = theme.<span class="property">cover</span>.<span class="property">default_cover</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * theme.<span class="property">cover</span>.<span class="property">default_cover</span>.<span class="property">length</span>)</span><br><span class="line">      cover = theme.<span class="property">cover</span>.<span class="property">default_cover</span>[num]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    cover = theme.<span class="property">default_top_img</span> || <span class="string">&#x27;data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(theme.<span class="property">cover</span>.<span class="property">suffix</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(theme.<span class="property">cover</span>.<span class="property">suffix</span> == <span class="number">1</span>)</span><br><span class="line">      cover = cover + (<span class="string">&quot;?&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">10000</span>))</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(theme.<span class="property">cover</span>.<span class="property">suffix</span> == <span class="number">2</span>)</span><br><span class="line">      cover = cover + (<span class="string">&quot;&amp;&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">10000</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cover</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>打开 butterfly 主题配置文件：在 cover: 插入 <code>suffix: 1</code> 并保存（目的是在链接后面加入后缀 <code>?spm=&#123;随机数&#125;</code> 0 是不使用后缀、1 是？加随机数；2 是 &amp; 加随机数）</li></ol><p><img src="https://p0.meituan.net/csc/b1c8b2e620881ceac7862b4c13a228ef34298.jpg" alt="image (3)"></p><ol start="4"><li>最后运行以下命令查看是否生效：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p><img src="https://p0.meituan.net/csc/ffc058f709bde4d9a612ce3eca461c48152154.jpg" alt="image (4)"></p><p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/%3Ca%20href=https:/blog.mitsumune.top/2023/02/13/hexo_butterfly%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E5%AF%B9%E9%9A%8F%E6%9C%BA%E5%9B%BE%E7%89%87api%E7%9A%84%E6%94%AF%E6%8C%81/%3Ehttps:/blog.mitsumune.top/2023/02/13/hexo_butterfly%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E5%AF%B9%E9%9A%8F%E6%9C%BA%E5%9B%BE%E7%89%87api%E7%9A%84%E6%94%AF%E6%8C%81/%3C/a%3E">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(<a href=https://jihulab.com/ainiz/img1/-/raw/main/Safari.webp>https://jihulab.com/ainiz/img1/-/raw/main/Safari.webp</a>)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">添加对随机图片api的支持</div>            <div class="tag-link-sitename"> 转载自</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-前言&quot;&gt;1  前言&lt;/h2&gt;
&lt;p&gt;在配置 butterfly 主题的时候发现一个问题，如果将主頁、文章封面的默认 top_img 配置为同一个随机图片 api 时会出现所有图片都相同的情况：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p0.meitu</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】美化教程合集 2</title>
    <link href="https://aizhiqian.github.io/posts/9a08f1e0/"/>
    <id>https://aizhiqian.github.io/posts/9a08f1e0/</id>
    <published>2023-07-22T17:40:40.000Z</published>
    <updated>2023-07-22T17:40:40.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><ol><li>鉴于每个人的根目录名称都不一样，本帖<strong>博客根目录</strong>一律以<code>[BlogRoot]</code>指代。</li><li>本贴魔改均基于<code>butterfly</code>主题。</li><li>本帖涉及魔改源码的内容，会使用<strong>diff代码块</strong>标识，复制时请<strong>不要忘记删除</strong>前面的<code>+、-</code>符号。</li><li>因为<code>.pug</code>和<code>.styl</code>以及<code>.yml</code>等对缩进要求较为严格，请尽量<strong>不要使用记事本等无法提供语法高亮的文本编辑器</strong>进行修改。</li><li>本帖基于<code>Butterfly主题</code>进行魔改方案编写，因此请读者优先掌握<a href="https://butterfly.js.org/">Butterfly主题官方文档</a>的内容后再来进行魔改。</li><li>魔改会过程常常引入<strong>自定义的css与js文件</strong>，方法见<a href="/posts/2e57d1d6/" title="【Hexo】添加自定义css和js文件">【Hexo】添加自定义css和js文件</a></li></ol></div><h2 id="1-打赏按钮菜单-店长微调">1  打赏按钮菜单(店长微调)</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>参考教程：<a href="https://www.fomal.cc/posts/d1927166.html#%E6%89%93%E8%B5%8F%E6%8C%89%E9%92%AE%E8%8F%9C%E5%8D%95-%E5%BA%97%E9%95%BF%E5%BE%AE%E8%B0%83">打赏按钮菜单(店长微调)</a><br>教程参考自店长的糖果屋微调集合，但是做完之后发现有些bug，悬浮鼠标显示的二维码是竖向的，于是做了一些调整，还有更换了一些旧的CDN等，可以放心食用。</p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307202252728.gif style="zoom:67%" /></div></div><ol><li><p>修改<code>[BlogRoot]\themes\butterfly\layout\includes\post\reward.pug</code>,整体替换为以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">link(rel=&#x27;stylesheet&#x27; href=url_for(theme.CDN.option.coin_css) media=&quot;defer&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;)</span><br><span class="line">.post-reward</span><br><span class="line">  button.tip-button.reward-button</span><br><span class="line">    span.tip-button__text= _p(&#x27;donate&#x27;)  //- 可以修改 donate 为按钮显示内容</span><br><span class="line">    .coin-wrapper</span><br><span class="line">      .coin</span><br><span class="line">        .coin__middle</span><br><span class="line">        .coin__back</span><br><span class="line">        .coin__front</span><br><span class="line">    .reward-main</span><br><span class="line">      ul.reward-all</span><br><span class="line">        each item in theme.reward.QR_code</span><br><span class="line">          - var clickTo = (item.itemlist||item).link ? (item.itemlist||item).link : (item.itemlist||item).img</span><br><span class="line">          li.reward-item</span><br><span class="line">            a(href=clickTo target=&#x27;_blank&#x27;)</span><br><span class="line">              img.post-qr-code-img(src=url_for((item.itemlist||item).img) alt=(item.itemlist||item).text)</span><br><span class="line">            .post-qr-code-desc=(item.itemlist||item).text</span><br><span class="line">if theme.reward.coinAudio</span><br><span class="line">  - var coinAudio = theme.reward.coinAudio ? url_for(theme.reward.coinAudio) : &#x27;https://cdn.cbd.int/akilar-candyassets@1.0.36/audio/coin.mp3&#x27;</span><br><span class="line">  audio#coinAudio(src=coinAudio)</span><br><span class="line">script(defer src=url_for(theme.CDN.option.coin_js))</span><br></pre></td></tr></table></figure></li><li><p>修改主题配置文件<code>_config.butterfly.yml</code>,添加音频文件配置项以及CDN配置项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  # Sponsor/reward</span><br><span class="line">  reward:</span><br><span class="line">    enable: true</span><br><span class="line"><span class="addition">+   coinAudio: https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a</span></span><br><span class="line">    QR_code:</span><br><span class="line">...</span><br><span class="line">  CDN:</span><br><span class="line">     option:</span><br><span class="line">      # main_css:</span><br><span class="line">       # main:</span><br><span class="line">       # utils:</span><br><span class="line"><span class="addition">+      # 打赏按钮投币效果</span></span><br><span class="line"><span class="addition">+      coin_js: https://npm.elemecdn.com/hexo_resources@latest/js/coin.min.js</span></span><br><span class="line"><span class="addition">+      coin_css: https://npm.elemecdn.com/hexo_resources@latest/css/coin.min.css</span></span><br><span class="line">      # translate:</span><br><span class="line">      # local_search:</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[BlogRoot]\themes\butterfly\source\css\_layout\reward.styl</code>，整体替换为以下内容：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-reward</span></span><br><span class="line">  <span class="attribute">position</span>: relative</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">3rem</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">  <span class="attribute">text-align</span>: center</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reward-button</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">2rem</span> <span class="number">1.2rem</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--btn-bg)</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--btn-color)</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">4s</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">30px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">box-shadow</span>: inset <span class="number">20em</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">var</span>(--btn-hover-color)</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.reward-main</span></span><br><span class="line">        <span class="attribute">display</span>: flex</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.reward-main</span></span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">bottom</span>: <span class="number">40px</span></span><br><span class="line">      <span class="attribute">left</span>: -<span class="number">55%</span></span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">100</span></span><br><span class="line">      <span class="attribute">display</span>: none</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">150%</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.reward-all</span></span><br><span class="line">        <span class="attribute">display</span>: flex</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">1rem</span> .<span class="number">5rem</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">var</span>(--reward-pop)</span><br><span class="line"></span><br><span class="line">        <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">          <span class="attribute">position</span>: absolute</span><br><span class="line">          <span class="attribute">bottom</span>: -<span class="number">10px</span></span><br><span class="line">          <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">          <span class="attribute">height</span>: <span class="number">20px</span></span><br><span class="line">          <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">          <span class="attribute">position</span>: absolute</span><br><span class="line">          <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">bottom</span>: <span class="number">2px</span></span><br><span class="line">          <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">margin</span>: <span class="number">0</span> auto</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">height</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">border-top</span>: <span class="number">13px</span> solid <span class="built_in">var</span>(--reward-pop)</span><br><span class="line">          <span class="attribute">border-right</span>: <span class="number">13px</span> solid transparent</span><br><span class="line">          <span class="attribute">border-left</span>: <span class="number">13px</span> solid transparent</span><br><span class="line">          <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.reward-item</span></span><br><span class="line">          <span class="attribute">display</span>: inline-block</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8px</span></span><br><span class="line">          <span class="attribute">list-style-type</span>: none</span><br><span class="line">          <span class="attribute">vertical-align</span>: top</span><br><span class="line"></span><br><span class="line">          <span class="selector-tag">img</span></span><br><span class="line">            <span class="attribute">width</span>: <span class="number">130px</span></span><br><span class="line">            <span class="attribute">height</span>: <span class="number">130px</span></span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.post-qr-code-desc</span></span><br><span class="line">            <span class="attribute">padding-top</span>: .<span class="number">4rem</span></span><br><span class="line">            <span class="attribute">width</span>: <span class="number">130px</span></span><br><span class="line">            <span class="attribute">color</span>: <span class="variable">$reward</span>-pop-up-color</span><br></pre></td></tr></table></figure></li><li><p>到这里基本就完成了，这里需要微调的是步骤5中的第16、24和28行，根据自己的二维码宽度进行调节，然后重启项目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="2-页面样式调节">2  页面样式调节</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/5389e93f.html">页面样式调节</a></p><p>这个教程是通过css样式调节各个页面透明度、模糊度（亚克力效果）、圆角、边框样式等，看起来会更加舒适。</p><ol><li><p>复制以下代码进去自定义的<code>custom.css</code>文件</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--trans-light</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--trans-dark</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--border-style</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">  <span class="attr">--backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章页、归档页、普通页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航栏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式遮罩 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#archive</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式页脚页头遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 阅读模式 */</span></span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式下的阅读模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>参数说明：</p><ul><li><code>--trans-light</code>：白天模式带透明度的背景色，如<code>rgba(255, 255, 255, 0.88)</code>底色是纯白色，其中0.88就透明度，在0-1之间调节，值越大越不透明；</li><li><code>--trans-dark</code>: 夜间模式带透明度的背景色，如<code>rgba(25, 25, 25, 0.88)</code>底色是柔和黑色，其中0.88就透明度，在0-1之间调节，值越大越不透明;</li><li><code>--border-style</code>: 边框样式，<code>1px solid rgb(169, 169, 169)</code>指宽度为1px的灰色实体边框;</li><li><code>--backdrop-filter</code>: 背景过滤器，如<code>blur(5px) saturate(150%)</code>表示饱和度为150%的、高斯模糊半径为5px的过滤器，这是亚克力效果的一种实现方法;</li><li>大家可以根据自己喜好进行调节，不用拘泥于我的样式！</li></ul></li><li><p>记住在主题配置文件<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入该css文件：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line"><span class="addition">+    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>重启项目即可看见效果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="3-导航栏居中">3  导航栏居中</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://blog.leonus.cn/2022/hexoCenter.html">导航栏魔改</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307211902085.png) --><p><img src="https://p1.meituan.net/csc/2c262947068c1fc46cbeeccf3806b5b017627.jpg" alt=""></p></div></div><p>在<code>[BlogRoot]\source\css\custom.css</code>中引入如下css代码，然后在主题配置文件<code>_config.butterfly.yml</code>中引入该文件：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 一级菜单居中 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: fit-content <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 子菜单横向展示 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */</span></span><br><span class="line"><span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">80px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">75px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此处的<code>css</code>实现了两个作用：菜单栏居中、子菜单横向显示。其中子菜单横向显示要根据自己的实际情况来改，例如你的以及菜单的第2个选项中有子菜单，那就要加一项调节第2个选项中的子菜单，这个具体调节多少要根据你的具体情况为准，可以自己慢慢调到中间。</p><p>优点是可以把每一个子菜单调到我们满意的位置。<br>缺点就是如果你新增菜单，需要修改一下css，不过一般来说菜单我们很少修改。</p><p>我们在调子菜单的时候，有个小功能对我们很有用，如下：<br><img src=https://cdn.leonus.cn/img/2022-07-05_08-36-23.webp style="width:400px;height:auto" ></p><p>打开这个可以让子菜单显示出来，方便我们修改样式。这里要注意，<strong>我们hover是在div上的，在其他地方hover是没效果的。</strong></p></div></details><h2 id="4-黑夜霓虹灯">4  黑夜霓虹灯</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/eec9786.html">黑夜霓虹灯2.0（纯CSS实现）</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- <img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307212026564.png style="zoom:50%"> --><img src=https://p0.meituan.net/csc/f0f9ac41e9f427db5809d3bccf764bc520882.jpg style="zoom:50%"></div></div><ol><li><p>在自定义的<code>[BlogRoot]\source\css\custom.css</code>中添加如下代码，实现的原理就是关键帧线性插值，然后一直循环，这里默认是左上角标题、中间标题和副标题，还有文章页头的标题和信息有循环霓虹灯，菜单的文字实现起来要改一下源码，个人觉得没必要了，这样就够了，多了反而花里胡哨：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 日间模式不生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-title</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-subtitle</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-title</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-subtitle</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_10px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_5px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 关键帧描述 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> light_15px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_10px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_5px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>刷新页面即可看到效果，默认是夜间模式才开启的，因为白天模式开启霓虹灯会显得很奇怪</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="5-添加侧边栏电子钟">5  添加侧边栏电子钟</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://blog.anheyu.com/posts/fc18.html">给butterfly添加侧边栏电子钟</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307212050998.png) --><p><img src="https://p0.meituan.net/csc/c179d0fd8d65f0b8e578e3f3c89ecfa524823.jpg" alt=""></p></div></div><ol><li><p>如果有安装店长的插件版侧边栏电子钟（与店长的电子钟冲突），在博客根目录<code>[Blogroot]</code>下打开终端，运行以下指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-butterfly-clock</span><br></pre></td></tr></table></figure></li><li><p>安装插件,在博客根目录<code>[Blogroot]</code>下打开终端，运行以下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-clock-anzhiyu --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置信息，以下为写法示例在站点配置文件<code>_config.yml</code>或者主题配置文件<code>_config.butterfly.yml</code>中添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># electric_clock</span></span><br><span class="line"><span class="comment"># see https://anheyu.com/posts/fc18.html</span></span><br><span class="line"><span class="attr">electric_clock:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">  <span class="comment"># - /posts/</span></span><br><span class="line">  <span class="comment"># - /about/</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">class</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">sticky_layout</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">loading:</span> <span class="string">https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif</span> <span class="comment">#加载动画自定义</span></span><br><span class="line">  <span class="attr">clock_css:</span> <span class="string">https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css</span></span><br><span class="line">  <span class="attr">clock_js:</span> <span class="string">https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js</span></span><br><span class="line">  <span class="attr">ip_api:</span> <span class="string">https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0</span></span><br><span class="line">  <span class="attr">qweather_key:</span> <span class="comment"># 和风天气key</span></span><br><span class="line">  <span class="attr">gaud_map_key:</span> <span class="comment"># 高得地图web服务key</span></span><br><span class="line">  <span class="attr">default_rectangle:</span> <span class="literal">false</span> <span class="comment"># 开启后将一直显示rectangle位置的天气，否则将获取访问者的地理位置与天气</span></span><br><span class="line">  <span class="attr">rectangle:</span> <span class="number">112.982279</span><span class="string">,28.19409</span> <span class="comment"># 获取访问者位置失败时会显示该位置的天气，同时该位置为开启default_rectangle后的位置</span></span><br></pre></td></tr></table></figure><blockquote><p>其中 <code>qweather_key</code> 和 <code>gaud_map_key</code> 最好自己去申请对应的 api key，默认使用我自己的，可能会被限制，不保证可靠性</p></blockquote></li></ol><div class="tabs" id="key"><ul class="nav-tabs no-default"><button type="button" class="tab " data-href="key-1">qweather_key</button><button type="button" class="tab " data-href="key-2">gaud_map_key</button></ul><div class="tab-contents"><div class="tab-item-content" id="key-1"><p>申请地址: <a href="https://id.qweather.com/#/login">https://id.qweather.com/#/login</a></p><!-- 1. 登录后进入控制台![和风天气控制台](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307241814189.webp) --><!-- 2. 创建应用![创建和风天气应用](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307241815346.webp) --><!-- 3. 填写应用名称和 key 名称随意 --><!-- 4. 选择 WebApi![选择WebApi](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307241815905.webp) --><!-- 5. 复制 key![复制key](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307241815322.webp) --><ol><li>登录后进入控制台<img src="https://p0.meituan.net/csc/fa743f9a75d77ca82d4516f90ec70b0462871.jpg" alt="和风天气控制台"></li><li>创建应用<img src="https://p1.meituan.net/csc/8a716d5b1797d360661c037a7ead36de42092.jpg" alt="创建和风天气应用"></li><li>填写应用名称和 key 名称随意</li><li>选择 WebApi<img src="https://p1.meituan.net/csc/497de6529114a14b674e385d7617f93537969.jpg" alt="选择WebApi"></li><li>复制 key<img src="https://p0.meituan.net/csc/6a1fa136460578e390cde98de0a50a4c32506.jpg" alt="复制key"></li></ol></div><div class="tab-item-content" id="key-2"><p>申请地址: <a href="https://lbs.amap.com/">https://lbs.amap.com/</a></p><ol><li>登录后进入控制台</li></ol><!-- 2. 创建应用，名称随意，类型选其他![创建应用](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307241815907.webp) --><!-- 3. 点击添加, `key`名称随意，`服务平台`选择`Web服务`,点击提交![Web服务](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307241815491.webp) --><!-- 4.  复制 key![复制key](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307241816879.webp) --><ol start="2"><li>创建应用，名称随意，类型选其他<img src="https://p0.meituan.net/csc/8db443fa8f2429b251daa0c989b5fcd342372.jpg" alt="创建应用"></li><li>点击添加, <code>key</code>名称随意，<code>服务平台</code>选择<code>Web服务</code>,点击提交<img src="https://p0.meituan.net/csc/1d5c660571606ad7fbc66808c7c254c796030.jpg" alt="Web服务"></li><li>复制 key<img src="https://p1.meituan.net/csc/309cb89dfe8afa27952cebaf0297b9ca35383.jpg" alt="复制key"></li></ol></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><ol><li><p>参数释义</p><table><thead><tr><th>参数</th><th>备选值/类型</th><th>释义</th></tr></thead><tbody><tr><td>priority</td><td>number</td><td>【可选】过滤器优先级，数值越小，执行越早，默认为 10，选填</td></tr><tr><td>enable</td><td>true/false</td><td>【必选】控制开关</td></tr><tr><td>enable_page</td><td>path/all</td><td>【可选】填写想要应用的页面的相对路径（即路由地址）,如根目录就填’/‘,分类页面就填’/categories/‘。若要应用于所有页面，就填’all’，默认为 all</td></tr><tr><td>exclude</td><td>path</td><td>【可选】填写想要屏蔽的页面，可以多个。写法见示例。原理是将屏蔽项的内容逐个放到当前路径去匹配，若当前路径包含任一屏蔽项，则不会挂载。</td></tr><tr><td>layout.type</td><td>id/class</td><td>【可选】挂载容器类型，填写 id 或 class，不填则默认为 id</td></tr><tr><td><a href="http://layout.name">layout.name</a></td><td>text</td><td>【必选】挂载容器名称</td></tr><tr><td>layout.index</td><td>0 和正整数</td><td>【可选】前提是 layout.type 为 class，因为同一页面可能有多个 class，此项用来确认究竟排在第几个顺位</td></tr><tr><td>loading</td><td>URL</td><td>【可选】电子钟加载动画的图片</td></tr><tr><td>clock_css</td><td>URL</td><td>【可选】电子钟样式 CDN 资源</td></tr><tr><td>clock_js</td><td>URL</td><td>【可选】电子钟执行脚本 CDN 资源</td></tr><tr><td>ip_api</td><td>URL</td><td>【可选】获取时钟 IP 的 API</td></tr><tr><td>qweather_key</td><td>text</td><td>【可选】和风天气 key</td></tr><tr><td>gaud_map_key</td><td>text</td><td>【可选】高得地图 web 服务 key</td></tr><tr><td>default_rectangle</td><td>text</td><td>【可选】开启后将一直显示 rectangle 位置的天气，否则将获取访问者的地理位置与天气</td></tr><tr><td>rectangle</td><td>text</td><td>【可选】获取访问者位置失败时会显示该位置的天气，同时该位置为开启 default_rectangle 后的位置</td></tr></tbody></table></li></ol></div></details><h2 id="6-文章标题小风车转动效果">6  文章标题小风车转动效果</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/5389e93f.html#%E6%96%87%E7%AB%A0H1-H6%E6%A0%87%E9%A2%98%E5%B0%8F%E9%A3%8E%E8%BD%A6%E8%BD%AC%E5%8A%A8%E6%95%88%E6%9E%9C">文章H1~H6标题小风车转动效果</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><p>看本博客效果</p></div></div><ol><li><p>修改主题配置文件<code>_config.butterfly.yml</code>文件的<code>beautify</code>配置项：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># site/post</span></span><br><span class="line">  <span class="comment"># title-prefix-icon: &#x27;\f0c1&#x27; 原内容</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="string">&#x27;\f863&#x27;</span></span><br><span class="line">  <span class="attr">title-prefix-icon-color:</span> <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>在<code>[BlogRoot]\source\css\custom.css</code> 中加入以下代码，可以自己调节一下转速:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 文章页H1-H6图标样式效果 */</span></span><br><span class="line"><span class="comment">/* 控制风车转动速度 4s那里可以自己调节快慢 */</span></span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-tag">h2</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-tag">h3</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-tag">h4</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-tag">h5</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: ccc <span class="number">4s</span> linear infinite;</span><br><span class="line">  <span class="attribute">animation</span>: ccc <span class="number">4s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 控制风车转动方向 -1turn 为逆时针转动，1turn 为顺时针转动，相同数字部分记得统一修改 */</span></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> ccc &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> ccc &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 设置风车颜色 */</span></span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ef50a8</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">1.55rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.3rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">0.23rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fb7061</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">1.35rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">0.12rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffbf00</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">1.22rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.95rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">0.09rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#a9e000</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">1.05rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">0.09rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#57c850</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">0.9rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#5ec1e0</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">0.9rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.66rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* s设置风车hover动效 6s那里可以自己调节快慢*/</span></span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--theme-color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--theme-color);</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: ccc <span class="number">6s</span> linear infinite;</span><br><span class="line">  <span class="attribute">animation</span>: ccc <span class="number">6s</span> linear infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>的<code>inject</code>配置项进行引入（不再赘述）。</p></li></ol></div></details><h2 id="7-分享链接按钮">7  分享链接按钮</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/2d7ac914.html#%E5%88%86%E4%BA%AB%E9%93%BE%E6%8E%A5%E6%8C%89%E9%92%AE">分享链接按钮</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><img src=https://p0.meituan.net/csc/853913bb87a19ac1c58ae406b7eaea5b6576.jpg style="zoom:50%" ></div></div><div class="note info flat"><p>注意：分享按钮提醒依赖Vue弹窗和防抖计时器，请完成前面的前置教程！<a href="https://aizhiqian.github.io/posts/672b4a87/#Vue-Element%E6%A0%B7%E5%BC%8F%E5%BC%B9%E7%AA%97">点击直达</a></p></div><ol><li><p>引入<code>ClipboardJS</code>依赖：在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>中</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>添加分享按钮，在<code>[BlogRoot]\themes\butterfly\layout\includes\rightside.pug</code>做以下修改：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+      when &#x27;share&#x27;</span></span><br><span class="line"><span class="addition">+        button.share(type=&quot;button&quot; title=&#x27;分享链接&#x27; onclick=&quot;share()&quot;)</span></span><br><span class="line"><span class="addition">+          i.fas.fa-share-nodes</span></span><br><span class="line"></span><br><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;]</span><br><span class="line"><span class="deletion">-  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;chat&#x27;,&#x27;comment&#x27;,&#x27;hideAside&#x27;,&#x27;toc&#x27;]</span></span><br><span class="line"><span class="addition">+  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;chat&#x27;,&#x27;share&#x27;,&#x27;comment&#x27;,&#x27;hideAside&#x27;,&#x27;toc&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>新建文件<code>[BlogRoot]\source\js\share.js</code>，写入如下代码（再说一次，记住完成前置教程！！！）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分享本页</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">share_</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">origin</span> + <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 截取标题</span></span><br><span class="line">        <span class="keyword">var</span> title = <span class="variable language_">document</span>.<span class="property">title</span>;</span><br><span class="line">        <span class="keyword">var</span> subTitle = title.<span class="title function_">endsWith</span>(<span class="string">&quot;| Fomalhaut🥝&quot;</span>) ? title.<span class="title function_">substring</span>(<span class="number">0</span>, title.<span class="property">length</span> - <span class="number">14</span>) : title;</span><br><span class="line">        navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(<span class="string">&#x27;Fomalhaut🥝的站内分享\n标题：&#x27;</span> + subTitle + <span class="string">&#x27;\n链接：&#x27;</span> + url + <span class="string">&#x27;\n欢迎来访！🍭🍭🍭&#x27;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">            <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&quot;成功复制分享信息🎉&quot;</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&quot;您现在可以通过粘贴直接跟小伙伴分享了！&quot;</span>,</span><br><span class="line">                    <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                    <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                    <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                    <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="comment">// return &#123; visible: false &#125;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;复制失败！&#x27;</span>, err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// new ClipboardJS(&quot;.share&quot;, &#123; text: function () &#123; return &#x27;标题：&#x27; + document.title + &#x27;\n链接：&#x27; + url &#125; &#125;);</span></span><br><span class="line">    <span class="comment">// btf.snackbarShow(&quot;本页链接已复制到剪切板，快去分享吧~&quot;)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 防抖</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">share</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">debounce</span>(share_, <span class="number">300</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里我的页面名字截取了后面的重复段，你要截取的话就将<code>| Fomalhaut🥝</code>换成<code>| 你的网站名字</code>，或者保留也行，就是直接复制！</p></li><li><p>在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>中引入该js文件</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script src=&quot;/js/share.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>清理并重启项目即可看到变更</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="8-Hexo自定义字体">8  Hexo自定义字体</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见本博客文章：<a href="/posts/ca2ce3bc/" title="【Hexo】自定义字体">【Hexo】自定义字体</a></p></div></details><h2 id="9-博客一图流">9  博客一图流</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见本博客文章：<a href="/posts/75895afb/" title="【Hexo】博客一图流">【Hexo】博客一图流</a></p></div></details><h2 id="10-文章置顶滚动栏">10  文章置顶滚动栏</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见本博客文章：<a href="/posts/be246de6/" title="【Hexo】文章置顶滚动栏">【Hexo】文章置顶滚动栏</a></p></div></details>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note blue icon-padding flat&quot;&gt;&lt;i class=&quot;note-icon fas fa-bullhorn&quot;&gt;&lt;/i&gt;&lt;ol&gt;
&lt;li&gt;鉴于每个人的根目录名称都不一样，本帖&lt;strong&gt;博客根目录&lt;/strong&gt;一律以&lt;code&gt;</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】美化教程合集 1</title>
    <link href="https://aizhiqian.github.io/posts/35396a82/"/>
    <id>https://aizhiqian.github.io/posts/35396a82/</id>
    <published>2023-07-22T17:38:56.000Z</published>
    <updated>2023-07-22T17:38:56.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><ol><li>鉴于每个人的根目录名称都不一样，本帖<strong>博客根目录</strong>一律以<code>[BlogRoot]</code>指代。</li><li>本贴魔改均基于<code>butterfly</code>主题。</li><li>本帖涉及魔改源码的内容，会使用<strong>diff代码块</strong>标识，复制时请<strong>不要忘记删除</strong>前面的<code>+、-</code>符号。</li><li>因为<code>.pug</code>和<code>.styl</code>以及<code>.yml</code>等对缩进要求较为严格，请尽量<strong>不要使用记事本等无法提供语法高亮的文本编辑器</strong>进行修改。</li><li>本帖基于<code>Butterfly主题</code>进行魔改方案编写，因此请读者优先掌握<a href="https://butterfly.js.org/">Butterfly主题官方文档</a>的内容后再来进行魔改。</li><li>魔改会过程常常引入<strong>自定义的css与js文件</strong>，方法见<a href="/posts/2e57d1d6/" title="【Hexo】添加自定义css和js文件">【Hexo】添加自定义css和js文件</a></li></ol></div><h2 id="1-直达底部按钮">1  直达底部按钮</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>在<code>[BlogRoot]\themes\butterfly\layout\includes\rightside.pug</code>做以下修改:</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">button#go-up(type=&quot;button&quot; title=_p(&quot;rightside.back_to_top&quot;))</span><br><span class="line">  i.fas.fa-arrow-up</span><br><span class="line"></span><br><span class="line"><span class="addition">+button#go-down(type=&quot;button&quot; title=&quot;直达底部&quot; onclick=&quot;btf.scrollToDest(document.body.scrollHeight, 500)&quot;)</span></span><br><span class="line"><span class="addition">+  i.fas.fa-arrow-down</span></span><br></pre></td></tr></table></figure></div></details><h2 id="2-网站恶搞标题">2  网站恶搞标题</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- ![](https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271613876.webp) --><p><img src="https://p0.meituan.net/csc/32c0bc404b39a95c4cd01770739c21f72763.jpg" alt=""></p></div></div><ol><li><p>新建文件<code>[BlogRoot]\source\js\title.js</code>，写入以下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态标题</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OriginTitile</span> = <span class="variable language_">document</span>.<span class="property">title</span>;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">hidden</span>) &#123;</span><br><span class="line">    <span class="comment">//离开当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;👀跑哪里去了~&#x27;</span>;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(titleTime);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//返回当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;🐖抓到你啦～&#x27;</span>;</span><br><span class="line">    <span class="comment">//两秒后变回正常标题</span></span><br><span class="line">    titleTime = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">title</span> = <span class="title class_">OriginTitile</span>;</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>引入该文件：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script async src=&quot;/js/title.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>重启项目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="3-随机壁纸API汇总">3  随机壁纸API汇总</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>网上可以查到很多随机壁纸的API，但是很多都用不了或者是图片质量比较低，于是今天汇总了一些目前可以用的随机壁纸API，其中列出来的图片质量都是比较高的，可以放心食用，本站随机壁纸API模块用的都是这部分API。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IMGAPI</span></span><br><span class="line"><span class="attr">https</span>:<span class="comment">//imgapi.cn/api.php</span></span><br><span class="line"><span class="comment">//如诗 - API</span></span><br><span class="line"><span class="attr">https</span>:<span class="comment">//api.likepoems.com/</span></span><br><span class="line"><span class="comment">// 必应每日壁纸</span></span><br><span class="line"><span class="keyword">let</span> bingDayBg = screen.<span class="property">width</span> &lt;= <span class="number">768</span> ? <span class="string">&quot;url(https://bing.img.run/m.php)&quot;</span> : <span class="string">&quot;url(https://bing.img.run/1920x1080.php)&quot;</span>;</span><br><span class="line"><span class="comment">// 必应历史壁纸</span></span><br><span class="line"><span class="keyword">let</span> bingHistoryBg = screen.<span class="property">width</span> &lt;= <span class="number">768</span> ? <span class="string">&quot;url(https://bing.img.run/rand_m.php)&quot;</span> : <span class="string">&quot;url(https://bing.img.run/rand.php)&quot;</span>;</span><br><span class="line"><span class="comment">// EEE.DOG动漫壁纸</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">EEEDog</span> = <span class="string">&quot;url(https://api.yimian.xyz/img?type=moe&amp;size=1920x1080)&quot;</span>;</span><br><span class="line"><span class="comment">// seovx随机美图</span></span><br><span class="line"><span class="keyword">let</span> seovx = <span class="string">&quot;url(https://cdn.seovx.com/?mom=302)&quot;</span>;</span><br><span class="line"><span class="comment">// picsum随机壁纸</span></span><br><span class="line"><span class="keyword">let</span> picsum = <span class="string">&quot;url(https://picsum.photos/1920/1080.webp)&quot;</span>;</span><br><span class="line"><span class="comment">// 博天随机壁纸</span></span><br><span class="line"><span class="keyword">let</span> btstu = <span class="string">&quot;url(http://api.btstu.cn/sjbz/?lx=suiji)&quot;</span>;</span><br><span class="line"><span class="comment">// tuapi动漫壁纸</span></span><br><span class="line"><span class="keyword">let</span> tuapi = <span class="string">&quot;url(https://tuapi.eees.cc/api.php?category=dongman)&quot;</span>;</span><br><span class="line"><span class="comment">// unsplash随机壁纸 https://source.unsplash.com/random/1920x1080/daily (weekly)</span></span><br><span class="line"><span class="keyword">let</span> unsplash = <span class="string">&quot;url(https://source.unsplash.com/random/1920x1080/)&quot;</span>;</span><br></pre></td></tr></table></figure><p>API链接就是引号引着的部分，具体的参数可以到相应官网查看API文档，这部分已经通过测试，到目前为止都是可用的，并且壁纸质量比较高；尤其是<code>必应</code>、<code>unsplash</code>、<code>picsum</code>这几个API的图片质量十分高，赶紧给你的网站换上随机壁纸吧！</p></div></details><h2 id="4-语雀同款链接卡片">4  语雀同款链接卡片</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- ![](https://jihulab.com/aini/img/-/raw/main/2024/04/27/202404271617340.png) --><p><img src="https://p0.meituan.net/csc/060b066a73125d2ebe1c8b593a0ba7377217.jpg" alt=""></p></div></div><ol><li>在 <code>[BlogRoot]\themes\butterfly\scripts\tag</code> 文件夹下面新建 <code>link.js</code> 并粘贴如下代码：</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * link</span></span><br><span class="line"><span class="comment"> * &#123;% link url,title,favicon,desc %&#125;</span></span><br><span class="line"><span class="comment"> * &#123;% link 链接,标题,图标,介绍 %&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> defaultIcon = <span class="string">&#x27;&lt;svg t=&quot;1670307855063&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;19066&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;path d=&quot;M504.064 516.608m-384.256 0a384.256 384.256 0 1 0 768.512 0 384.256 384.256 0 1 0-768.512 0Z&quot; fill=&quot;#009CF5&quot; p-id=&quot;19068&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M746.112 270.464L472.448 485.12l63.104 63.104L750.08 274.56c2.304-2.688-1.28-6.144-3.968-4.096z&quot; fill=&quot;#FF4C3A&quot; p-id=&quot;19069&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M262.016 762.752l273.664-214.528-63.104-63.104-214.656 273.536c-2.176 2.688 1.28 6.144 4.096 4.096z&quot; fill=&quot;#FFFFFF&quot; p-id=&quot;19070&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M505.216 155.136c-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.56 5.888 5.888 5.888s5.888-2.56 5.888-5.888v-53.504c-0.128-3.2-2.688-5.888-5.888-5.888zM442.368 160.512c-3.2 0.512-5.376 3.584-4.736 6.784l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736zM396.288 234.368c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552l-18.304-50.304c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552l18.304 50.304zM348.928 257.408c1.664 2.816 5.248 3.712 7.936 2.176s3.712-5.248 2.176-7.936l-26.752-46.336c-1.664-2.816-5.248-3.712-7.936-2.176-2.816 1.664-3.712 5.248-2.176 7.936l26.752 46.336zM306.304 288.256c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.432 2.048-2.816 5.76-0.768 8.192l34.432 40.96zM269.696 326.144c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-2.048 2.432-1.792 6.144 0.768 8.192l40.96 34.432zM193.792 342.912l46.336 26.752c2.816 1.664 6.4 0.64 7.936-2.176 1.664-2.816 0.64-6.4-2.176-8.064L199.552 332.8c-2.816-1.664-6.4-0.64-7.936 2.176-1.664 2.688-0.64 6.272 2.176 7.936zM168.32 399.488l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM207.872 457.344l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784zM201.984 509.568H148.48c-3.2 0-5.888 2.56-5.888 5.888 0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888zM205.44 562.176l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.376 6.784 4.736l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784s-3.584-5.248-6.784-4.736zM217.856 613.376l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 3.072 4.48 4.608 7.552 3.456l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456zM238.976 661.504l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.816 5.248 3.712 8.064 2.176l46.336-26.752c2.816-1.664 3.712-5.248 2.176-8.064-1.664-2.816-5.248-3.712-8.064-2.176zM268.16 705.408l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.432 5.76 2.816 8.192 0.768l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-1.92-2.56-5.632-2.816-8.192-0.768zM304.512 743.424l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.304-1.92-6.016-1.664-8.192 0.768zM347.008 774.656l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.664 6.4 0.64 8.064-2.176l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.536-6.4-0.64-8.064 2.176zM394.24 798.08l-18.304 50.304c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.152 6.4-0.512 7.552-3.456l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.528 0.384-7.552 3.456zM440.192 872.32c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.64 3.2 1.536 6.272 4.736 6.784zM502.912 878.08c3.2 0 5.888-2.56 5.888-5.888v-53.504c0-3.2-2.56-5.888-5.888-5.888-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.688 5.888 5.888 5.888zM549.632 815.232l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736-3.2 0.512-5.248 3.584-4.736 6.784zM600.832 802.816l18.304 50.304c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552L611.84 798.72c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552zM649.088 781.696l26.752 46.336c1.664 2.816 5.248 3.712 8.064 2.176 2.816-1.664 3.712-5.248 2.176-8.064l-26.88-46.336c-1.664-2.816-5.248-3.712-8.064-2.176-2.816 1.664-3.712 5.248-2.048 8.064zM692.864 752.384l34.432 40.96c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.56 2.048-2.816 5.76-0.768 8.192zM730.88 716.032l40.96 34.432c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-1.92 2.432-1.664 6.144 0.768 8.192zM762.112 673.664l46.336 26.752c2.816 1.664 6.4 0.64 8.064-2.176 1.664-2.816 0.64-6.4-2.176-7.936L768 663.552c-2.816-1.664-6.4-0.64-8.064 2.176-1.536 2.688-0.64 6.272 2.176 7.936zM785.536 626.432l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM800.256 575.872l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784zM800.256 517.76c0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888h-53.504c-3.328 0-5.888 2.56-5.888 5.888zM802.688 471.04l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784-0.512-3.2-3.584-5.376-6.784-4.736l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.248 6.784 4.736zM790.272 419.84l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 2.944 4.48 4.608 7.552 3.456zM769.152 371.584l46.336-26.752c2.816-1.664 3.712-5.248 2.176-7.936-1.664-2.816-5.248-3.712-8.064-2.176l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.688 5.248 3.712 8.064 2.048zM739.84 327.808l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-2.048-2.432-5.76-2.816-8.192-0.768l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.56 5.76 2.816 8.192 0.768zM703.488 289.664l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.432-2.048-6.144-1.792-8.192 0.768l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768zM661.12 258.56l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.664-6.4-0.64-8.064 2.176l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.536 6.4 0.64 8.064-2.176zM613.888 235.136l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.4 0.512-7.552 3.456L602.88 231.168c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.024 6.4-0.512 7.552-3.584zM556.544 225.152c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.512 3.2 1.536 6.144 4.736 6.784zM273.536 290.432c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96l21.12 21.12zM237.824 333.824c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536s-1.28 6.912 1.536 8.832l24.448 17.152zM183.04 370.176l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 7.04 3.072 8.448zM194.688 423.68l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.152 6.912 4.48 7.808l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808zM183.168 478.72l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.456 2.304 6.656 5.76 6.912l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.384-3.456-2.176-6.528-5.76-6.912zM181.504 535.04l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.456 6.144 6.912 5.76l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.328-6.016-6.912-5.76zM191.36 590.72l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.352 5.376 7.808 4.48l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.328-4.352-5.376-7.808-4.48zM207.232 644.224l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.2 5.248 4.608 8.448 3.072l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.408-3.2-5.248-4.48-8.448-3.072zM233.984 693.888l-24.448 17.152c-2.944 2.048-3.584 6.016-1.536 8.832 2.048 2.944 6.016 3.584 8.832 1.536l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536zM310.912 775.552L293.76 800c-2.048 2.944-1.28 6.912 1.536 8.832 2.944 2.048 6.912 1.28 8.832-1.536l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.816-2.048-6.912-1.408-8.832 1.536zM349.184 840.704c3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.536-3.2 0.128-7.04-3.072-8.448-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.408 3.2-0.128 6.912 3.072 8.448zM407.808 862.72c3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c0.896-3.456-1.152-6.912-4.48-7.808-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.328 1.152 6.912 4.48 7.808zM469.376 874.112c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.584 2.304 6.656 5.76 6.912zM522.496 839.168l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.456-6.144-6.912-5.76-3.456 0.256-6.016 3.328-5.76 6.912zM578.176 830.976l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928c-0.896-3.456-4.352-5.376-7.808-4.48-3.328 0.896-5.376 4.48-4.48 7.808zM631.68 813.312l12.672 27.136c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.248 3.072-8.448l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.48 5.248-3.072 8.448zM681.344 786.688l17.152 24.448c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 1.92-3.584 5.888-1.536 8.832zM725.504 751.744l21.12 21.12c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96zM763.008 709.76l24.448 17.152c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536-2.048 2.816-1.408 6.784 1.536 8.832zM792.576 661.888l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 6.912 3.072 8.448zM813.44 609.536l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.024 6.912 4.48 7.808zM824.832 554.368l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.256-3.456-2.304-6.656-5.76-6.912l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.584 2.304 6.656 5.76 6.912zM826.624 498.176l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.456-6.144-6.912-5.76l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.328 6.016 6.912 5.76zM818.432 442.368l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.456-4.352-5.376-7.808-4.48l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.48 5.376 7.808 4.48zM800.768 388.992l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.536-3.2-5.248-4.608-8.448-3.072l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.072 5.248 4.48 8.448 3.072zM774.144 339.328l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536L766.848 328.96c-2.944 2.048-3.584 6.016-1.536 8.832 1.92 2.816 5.888 3.584 8.832 1.536zM697.216 257.664l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.944-2.048-6.912-1.28-8.832 1.536l-17.152 24.448c-2.048 2.944-1.28 6.912 1.536 8.832 2.816 2.048 6.784 1.408 8.832-1.536zM658.944 192.512c-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.536 3.2-0.128 7.04 3.072 8.448 3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.408-3.2 0-7.04-3.072-8.448zM600.192 170.496c-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.456 1.152 6.912 4.48 7.808 3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c1.024-3.328-1.024-6.912-4.48-7.808zM534.912 201.6c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.456 2.304 6.528 5.76 6.912zM476.032 158.464c-3.456 0.256-6.144 3.456-5.76 6.912l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.328-6.016-6.912-5.76zM422.144 173.312c-0.896-3.456-4.352-5.376-7.808-4.48-3.456 0.896-5.376 4.352-4.48 7.808l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928zM376.448 219.776l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.608 5.248-3.072 8.448L364.8 225.28c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.376 3.2-8.576zM316.416 253.824c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 2.048-3.584 6.016-1.536 8.832l17.152 24.448z&quot; fill=&quot;#FFFFFF&quot; p-id=&quot;19071&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">link</span>(<span class="params">args</span>) &#123;</span><br><span class="line">    args = args.<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    <span class="comment">// 获取参数</span></span><br><span class="line">    <span class="keyword">let</span> url = (args[<span class="number">0</span>] || <span class="string">&#x27;&#x27;</span>).<span class="title function_">trim</span>(),</span><br><span class="line">        title = (args[<span class="number">1</span>] || <span class="string">&#x27;点击直达链接&#x27;</span>).<span class="title function_">trim</span>(),</span><br><span class="line">        favicon = (args[<span class="number">2</span>] ? <span class="string">`&lt;img src=&quot;<span class="subst">$&#123;args[<span class="number">2</span>]&#125;</span>&quot; class=&quot;no-lightbox&quot;&gt;`</span> : defaultIcon).<span class="title function_">trim</span>(),</span><br><span class="line">        desc = (args[<span class="number">3</span>] || <span class="string">&#x27;&#x27;</span>).<span class="title function_">trim</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;a href=&quot;<span class="subst">$&#123;url&#125;</span>&quot; <span class="subst">$&#123;url.includes(<span class="string">&#x27;http&#x27;</span>)?<span class="string">&#x27;target=&quot;_blank&quot;&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span> title=&quot;<span class="subst">$&#123;title&#125;</span>&quot; referrerPolicy=&quot;no-referrer&quot; class=&quot;link_card&quot;&gt;&lt;div class=&quot;link_icon&quot;&gt;<span class="subst">$&#123;favicon&#125;</span>&lt;/div&gt;&lt;div class=&quot;link_content&quot;&gt;&lt;div class=&quot;link_title&quot;&gt;<span class="subst">$&#123;title&#125;</span>&lt;/div&gt;<span class="subst">$&#123;desc?<span class="string">`&lt;div class=&quot;link_desc&quot;&gt;<span class="subst">$&#123;desc&#125;</span>&lt;/div&gt;`</span>:<span class="string">&#x27;&#x27;</span>&#125;</span>&lt;/div&gt;&lt;/a&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">tag</span>.<span class="title function_">register</span>(<span class="string">&#x27;link&#x27;</span>, link, &#123; <span class="attr">ends</span>: <span class="literal">false</span> &#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>在 <code>[BlogRoot]\themes\butterfly\source\css\_tags</code> 文件夹下面新建 <code>link.styl</code> 并粘贴如下代码：</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.link_card</span></span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color) <span class="meta">!important</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: none <span class="meta">!important</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--reward-pop)</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">12px</span></span><br><span class="line">  <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#4976f5</span></span><br><span class="line">    <span class="attribute">color</span>: white <span class="meta">!important</span></span><br><span class="line">  <span class="selector-class">.link_icon</span>,<span class="selector-class">.link_content</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4rem</span></span><br><span class="line">  <span class="selector-class">.link_icon</span></span><br><span class="line">    <span class="selector-tag">img</span>,svg</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">4rem</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">4rem</span></span><br><span class="line">  <span class="selector-class">.link_content</span></span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">1rem</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">6rem</span>)</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span></span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">    <span class="attribute">flex-direction</span>: column</span><br><span class="line">    <span class="attribute">justify-content</span>: center</span><br><span class="line">    <span class="selector-class">.link_title</span></span><br><span class="line">      <span class="attribute">font-weight</span>: bold</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">1.2rem</span></span><br><span class="line">    <span class="selector-class">.link_title</span>,<span class="selector-class">.link_desc</span></span><br><span class="line">      <span class="attribute">word-break</span>: break-all</span><br><span class="line">      <span class="attribute">overflow</span>:hidden</span><br><span class="line">      <span class="attribute">text-overflow</span>: ellipsis</span><br><span class="line">    <span class="selector-pseudo">&amp;:not</span>(<span class="selector-pseudo">:has</span>(.link_desc)) <span class="selector-class">.link_title</span></span><br><span class="line">      <span class="attribute">display</span>:-webkit-box</span><br><span class="line">      -webkit-box-orient:vertical</span><br><span class="line">      -webkit-line-clamp:<span class="number">2</span></span><br><span class="line">    <span class="selector-class">.link_desc</span></span><br><span class="line">      <span class="attribute">opacity</span>: .<span class="number">6</span></span><br><span class="line">    <span class="selector-class">.link_desc</span>,<span class="selector-pseudo">&amp;:has</span>(.link_desc) <span class="selector-class">.link_title</span></span><br><span class="line">      <span class="attribute">white-space</span>: nowrap</span><br></pre></td></tr></table></figure><ol start="3"><li>注意：<code>内容不能有英文逗号</code>，不然会出bug</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用html是为了高亮代码，不必在意 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 参数如下： --&gt;</span></span><br><span class="line">&#123;% link 链接,标题,图标,介绍 %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 示例如下： --&gt;</span></span><br><span class="line">&#123;% link https://blog.leonus.cn/,Leonus,https://blog.leonus.cn/favicon.ico,进一寸有进一寸的欢喜。 %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 你也可以什么都不填，将会全部使用默认值，如下： --&gt;</span></span><br><span class="line">&#123;% card %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 你也可以省略部分内容，如下： --&gt;</span></span><br><span class="line">&#123;% link https://blog.leonus.cn/ %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 位置在后面的参数不填的话可以直接省略，但是如果中间的不想填必须留空，如下： --&gt;</span></span><br><span class="line">&#123;% link https://blog.leonus.cn/,,,进一寸有进一寸的欢喜。 %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td>链接</td><td>如果连接中包含http则新标签打开，否则本标签页打开</td><td>无</td></tr><tr><td>标题</td><td>网站的标题</td><td>点击直达链接</td></tr><tr><td>图标</td><td>网站favicon<code>链接</code></td><td><svg t="1670307855063" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19066" width="40px" height="40px"><path d="M504.064 516.608m-384.256 0a384.256 384.256 0 1 0 768.512 0 384.256 384.256 0 1 0-768.512 0Z" fill="#009CF5" p-id="19068"></path><path d="M746.112 270.464L472.448 485.12l63.104 63.104L750.08 274.56c2.304-2.688-1.28-6.144-3.968-4.096z" fill="#FF4C3A" p-id="19069"></path><path d="M262.016 762.752l273.664-214.528-63.104-63.104-214.656 273.536c-2.176 2.688 1.28 6.144 4.096 4.096z" fill="#FFFFFF" p-id="19070"></path><path d="M505.216 155.136c-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.56 5.888 5.888 5.888s5.888-2.56 5.888-5.888v-53.504c-0.128-3.2-2.688-5.888-5.888-5.888zM442.368 160.512c-3.2 0.512-5.376 3.584-4.736 6.784l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736zM396.288 234.368c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552l-18.304-50.304c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552l18.304 50.304zM348.928 257.408c1.664 2.816 5.248 3.712 7.936 2.176s3.712-5.248 2.176-7.936l-26.752-46.336c-1.664-2.816-5.248-3.712-7.936-2.176-2.816 1.664-3.712 5.248-2.176 7.936l26.752 46.336zM306.304 288.256c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.432 2.048-2.816 5.76-0.768 8.192l34.432 40.96zM269.696 326.144c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-2.048 2.432-1.792 6.144 0.768 8.192l40.96 34.432zM193.792 342.912l46.336 26.752c2.816 1.664 6.4 0.64 7.936-2.176 1.664-2.816 0.64-6.4-2.176-8.064L199.552 332.8c-2.816-1.664-6.4-0.64-7.936 2.176-1.664 2.688-0.64 6.272 2.176 7.936zM168.32 399.488l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM207.872 457.344l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784zM201.984 509.568H148.48c-3.2 0-5.888 2.56-5.888 5.888 0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888zM205.44 562.176l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.376 6.784 4.736l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784s-3.584-5.248-6.784-4.736zM217.856 613.376l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 3.072 4.48 4.608 7.552 3.456l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456zM238.976 661.504l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.816 5.248 3.712 8.064 2.176l46.336-26.752c2.816-1.664 3.712-5.248 2.176-8.064-1.664-2.816-5.248-3.712-8.064-2.176zM268.16 705.408l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.432 5.76 2.816 8.192 0.768l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-1.92-2.56-5.632-2.816-8.192-0.768zM304.512 743.424l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.304-1.92-6.016-1.664-8.192 0.768zM347.008 774.656l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.664 6.4 0.64 8.064-2.176l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.536-6.4-0.64-8.064 2.176zM394.24 798.08l-18.304 50.304c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.152 6.4-0.512 7.552-3.456l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.528 0.384-7.552 3.456zM440.192 872.32c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.64 3.2 1.536 6.272 4.736 6.784zM502.912 878.08c3.2 0 5.888-2.56 5.888-5.888v-53.504c0-3.2-2.56-5.888-5.888-5.888-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.688 5.888 5.888 5.888zM549.632 815.232l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736-3.2 0.512-5.248 3.584-4.736 6.784zM600.832 802.816l18.304 50.304c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552L611.84 798.72c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552zM649.088 781.696l26.752 46.336c1.664 2.816 5.248 3.712 8.064 2.176 2.816-1.664 3.712-5.248 2.176-8.064l-26.88-46.336c-1.664-2.816-5.248-3.712-8.064-2.176-2.816 1.664-3.712 5.248-2.048 8.064zM692.864 752.384l34.432 40.96c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.56 2.048-2.816 5.76-0.768 8.192zM730.88 716.032l40.96 34.432c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-1.92 2.432-1.664 6.144 0.768 8.192zM762.112 673.664l46.336 26.752c2.816 1.664 6.4 0.64 8.064-2.176 1.664-2.816 0.64-6.4-2.176-7.936L768 663.552c-2.816-1.664-6.4-0.64-8.064 2.176-1.536 2.688-0.64 6.272 2.176 7.936zM785.536 626.432l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM800.256 575.872l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784zM800.256 517.76c0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888h-53.504c-3.328 0-5.888 2.56-5.888 5.888zM802.688 471.04l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784-0.512-3.2-3.584-5.376-6.784-4.736l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.248 6.784 4.736zM790.272 419.84l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 2.944 4.48 4.608 7.552 3.456zM769.152 371.584l46.336-26.752c2.816-1.664 3.712-5.248 2.176-7.936-1.664-2.816-5.248-3.712-8.064-2.176l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.688 5.248 3.712 8.064 2.048zM739.84 327.808l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-2.048-2.432-5.76-2.816-8.192-0.768l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.56 5.76 2.816 8.192 0.768zM703.488 289.664l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.432-2.048-6.144-1.792-8.192 0.768l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768zM661.12 258.56l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.664-6.4-0.64-8.064 2.176l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.536 6.4 0.64 8.064-2.176zM613.888 235.136l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.4 0.512-7.552 3.456L602.88 231.168c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.024 6.4-0.512 7.552-3.584zM556.544 225.152c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.512 3.2 1.536 6.144 4.736 6.784zM273.536 290.432c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96l21.12 21.12zM237.824 333.824c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536s-1.28 6.912 1.536 8.832l24.448 17.152zM183.04 370.176l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 7.04 3.072 8.448zM194.688 423.68l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.152 6.912 4.48 7.808l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808zM183.168 478.72l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.456 2.304 6.656 5.76 6.912l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.384-3.456-2.176-6.528-5.76-6.912zM181.504 535.04l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.456 6.144 6.912 5.76l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.328-6.016-6.912-5.76zM191.36 590.72l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.352 5.376 7.808 4.48l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.328-4.352-5.376-7.808-4.48zM207.232 644.224l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.2 5.248 4.608 8.448 3.072l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.408-3.2-5.248-4.48-8.448-3.072zM233.984 693.888l-24.448 17.152c-2.944 2.048-3.584 6.016-1.536 8.832 2.048 2.944 6.016 3.584 8.832 1.536l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536zM310.912 775.552L293.76 800c-2.048 2.944-1.28 6.912 1.536 8.832 2.944 2.048 6.912 1.28 8.832-1.536l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.816-2.048-6.912-1.408-8.832 1.536zM349.184 840.704c3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.536-3.2 0.128-7.04-3.072-8.448-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.408 3.2-0.128 6.912 3.072 8.448zM407.808 862.72c3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c0.896-3.456-1.152-6.912-4.48-7.808-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.328 1.152 6.912 4.48 7.808zM469.376 874.112c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.584 2.304 6.656 5.76 6.912zM522.496 839.168l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.456-6.144-6.912-5.76-3.456 0.256-6.016 3.328-5.76 6.912zM578.176 830.976l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928c-0.896-3.456-4.352-5.376-7.808-4.48-3.328 0.896-5.376 4.48-4.48 7.808zM631.68 813.312l12.672 27.136c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.248 3.072-8.448l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.48 5.248-3.072 8.448zM681.344 786.688l17.152 24.448c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 1.92-3.584 5.888-1.536 8.832zM725.504 751.744l21.12 21.12c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96zM763.008 709.76l24.448 17.152c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536-2.048 2.816-1.408 6.784 1.536 8.832zM792.576 661.888l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 6.912 3.072 8.448zM813.44 609.536l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.024 6.912 4.48 7.808zM824.832 554.368l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.256-3.456-2.304-6.656-5.76-6.912l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.584 2.304 6.656 5.76 6.912zM826.624 498.176l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.456-6.144-6.912-5.76l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.328 6.016 6.912 5.76zM818.432 442.368l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.456-4.352-5.376-7.808-4.48l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.48 5.376 7.808 4.48zM800.768 388.992l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.536-3.2-5.248-4.608-8.448-3.072l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.072 5.248 4.48 8.448 3.072zM774.144 339.328l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536L766.848 328.96c-2.944 2.048-3.584 6.016-1.536 8.832 1.92 2.816 5.888 3.584 8.832 1.536zM697.216 257.664l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.944-2.048-6.912-1.28-8.832 1.536l-17.152 24.448c-2.048 2.944-1.28 6.912 1.536 8.832 2.816 2.048 6.784 1.408 8.832-1.536zM658.944 192.512c-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.536 3.2-0.128 7.04 3.072 8.448 3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.408-3.2 0-7.04-3.072-8.448zM600.192 170.496c-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.456 1.152 6.912 4.48 7.808 3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c1.024-3.328-1.024-6.912-4.48-7.808zM534.912 201.6c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.456 2.304 6.528 5.76 6.912zM476.032 158.464c-3.456 0.256-6.144 3.456-5.76 6.912l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.328-6.016-6.912-5.76zM422.144 173.312c-0.896-3.456-4.352-5.376-7.808-4.48-3.456 0.896-5.376 4.352-4.48 7.808l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928zM376.448 219.776l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.608 5.248-3.072 8.448L364.8 225.28c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.376 3.2-8.576zM316.416 253.824c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 2.048-3.584 6.016-1.536 8.832l17.152 24.448z" fill="#FFFFFF" p-id="19071"></path></svg></td></tr><tr><td>介绍</td><td>网站的description</td><td>无</td></tr></tbody></table></div></details><h2 id="5-渐变色版权美化">5  渐变色版权美化</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/5389e93f.html">渐变色版权美化（店长+微调）</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307201633210.png) --><p><img src="https://p1.meituan.net/csc/5d8eebdf64478393f114552640ddcd7127626.jpg" alt=""></p></div></div><ol><li><p>修改<code>[BlogRoot]\themes\butterfly\layout\includes\post\post-copyright.pug</code>,直接复制以下内容替换原文件内容。此处多次用到了三元运算符作为默认项设置，在确保有主题配置文件的默认项的情况下，也可以在相应文章的<code>front-matter</code>中重新定义作者，原文链接，开源许可协议等内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">if theme.post_copyright.enable &amp;&amp; page.copyright !== false</span><br><span class="line">  - let author = page.copyright_author ? page.copyright_author : config.author</span><br><span class="line">  - let url = page.copyright_url ? page.copyright_url : page.permalink</span><br><span class="line">  - let license = page.license ? page.license : theme.post_copyright.license</span><br><span class="line">  - let license_url = page.license_url ? page.license_url : theme.post_copyright.license_url</span><br><span class="line">  .post-copyright</span><br><span class="line">    .post-copyright__title</span><br><span class="line">      span.post-copyright-info</span><br><span class="line">        h #[=page.title]</span><br><span class="line">    .post-copyright__type</span><br><span class="line">      span.post-copyright-info</span><br><span class="line">        a(href=url_for(url))= theme.post_copyright.decode ? decodeURI(url) : url</span><br><span class="line">    .post-copyright-m</span><br><span class="line">      .post-copyright-m-info</span><br><span class="line">        .post-copyright-a</span><br><span class="line">            h 作者</span><br><span class="line">            .post-copyright-cc-info</span><br><span class="line">                h=author</span><br><span class="line">        .post-copyright-c</span><br><span class="line">            h 发布于</span><br><span class="line">            .post-copyright-cc-info</span><br><span class="line">                h=date(page.date, config.date_format)</span><br><span class="line">        .post-copyright-u</span><br><span class="line">            h 更新于</span><br><span class="line">            .post-copyright-cc-info</span><br><span class="line">                h=date(page.updated, config.date_format)</span><br><span class="line">        .post-copyright-c</span><br><span class="line">            h 许可协议</span><br><span class="line">            .post-copyright-cc-info</span><br><span class="line">                a.icon(rel=&#x27;noopener&#x27; target=&#x27;_blank&#x27; title=&#x27;Creative Commons&#x27; href=&#x27;https://creativecommons.org/&#x27;)</span><br><span class="line">                  i.fab.fa-creative-commons</span><br><span class="line">                a(rel=&#x27;noopener&#x27; target=&#x27;_blank&#x27; title=license href=url_for(license_url))=license</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[BlogRoot]\themes\butterfly\source\css\_layout\post.styl</code>,直接复制以下内容，替换原文件，这个文件就是自己调节样式的。其中，<code>184</code>行是白天模式的背景色，这里默认是我网站的渐变色，大家可以根据自己的喜好调节；<code>253</code>行是夜间模式的发光光圈颜色，大家也可以自行替换成自己喜欢的颜色：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">beautify</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">headStyle</span>(fontsize)</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="built_in">unit</span>(fontsize + <span class="number">12</span>, <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">margin-left</span>: <span class="built_in">unit</span>((<span class="built_in">-</span>(fontsize + <span class="number">6</span>)), <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="built_in">unit</span>(fontsize, <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">padding-left</span>: <span class="built_in">unit</span>(fontsize + <span class="number">18</span>, <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h1</span>,</span><br><span class="line">  <span class="selector-tag">h2</span>,</span><br><span class="line">  <span class="selector-tag">h3</span>,</span><br><span class="line">  <span class="selector-tag">h4</span>,</span><br><span class="line">  <span class="selector-tag">h5</span>,</span><br><span class="line">  <span class="selector-tag">h6</span></span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-out</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">7px</span>)</span><br><span class="line">      <span class="attribute">color</span>: <span class="variable">$title</span>-prefix-icon-color</span><br><span class="line">      <span class="attribute">content</span>: <span class="variable">$title</span>-prefix-icon</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">1</span></span><br><span class="line">      <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-out</span><br><span class="line">      <span class="keyword">@extend</span> <span class="selector-class">.fontawesomeIcon</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$light</span>-blue</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h1</span></span><br><span class="line">    <span class="built_in">headStyle</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h2</span></span><br><span class="line">    <span class="built_in">headStyle</span>(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h3</span></span><br><span class="line">    <span class="built_in">headStyle</span>(<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h4</span></span><br><span class="line">    <span class="built_in">headStyle</span>(<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h5</span></span><br><span class="line">    <span class="built_in">headStyle</span>(<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h6</span></span><br><span class="line">    <span class="built_in">headStyle</span>(<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">ol</span>,</span><br><span class="line">  <span class="selector-tag">ul</span></span><br><span class="line">    <span class="selector-tag">p</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">li</span></span><br><span class="line">    <span class="selector-pseudo">&amp;::marker</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="variable">$light</span>-blue</span><br><span class="line">      <span class="attribute">font-weight</span>: <span class="number">600</span></span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">1.05em</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="selector-pseudo">&amp;::marker</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--pseudo-hover)</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span></span><br><span class="line">    <span class="attribute">list-style-type</span>: circle</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article-container</span></span><br><span class="line">  <span class="attribute">word-wrap</span>: break-word</span><br><span class="line">  <span class="attribute">overflow-wrap</span>: break-word</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">a</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$theme</span>-link-color</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">text-decoration</span>: underline</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">img</span></span><br><span class="line">    <span class="attribute">display</span>: block</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">20px</span></span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">transition</span>: filter <span class="number">375ms</span> ease-in .<span class="number">2s</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">p</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">16px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">iframe</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;anchor&#x27;</span>)</span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-class">.headerlink</span></span><br><span class="line">      <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">        <span class="keyword">@extend</span> <span class="selector-class">.fontawesomeIcon</span></span><br><span class="line">        <span class="attribute">float</span>: right</span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--headline-presudo)</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&#x27;\f0c1&#x27;</span></span><br><span class="line">        <span class="attribute">font-size</span>: .<span class="number">95em</span></span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">3s</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">        <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--pseudo-hover)</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">h1</span>,</span><br><span class="line">    <span class="selector-tag">h2</span>,</span><br><span class="line">    <span class="selector-tag">h3</span>,</span><br><span class="line">    <span class="selector-tag">h4</span>,</span><br><span class="line">    <span class="selector-tag">h5</span>,</span><br><span class="line">    <span class="selector-tag">h6</span></span><br><span class="line">      <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">        <span class="selector-tag">a</span><span class="selector-class">.headerlink</span></span><br><span class="line">          <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">            <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">ol</span>,</span><br><span class="line">  <span class="selector-tag">ul</span></span><br><span class="line">    <span class="selector-tag">ol</span>,</span><br><span class="line">    <span class="selector-tag">ul</span></span><br><span class="line">      <span class="attribute">padding-left</span>: <span class="number">20px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">li</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">p</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;beautify.enable&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;beautify.field&#x27;</span>) == <span class="string">&#x27;site&#x27;</span></span><br><span class="line">      <span class="built_in">beautify</span>()</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;beautify.field&#x27;</span>) == <span class="string">&#x27;post&#x27;</span></span><br><span class="line">      &amp;<span class="selector-class">.post-content</span></span><br><span class="line">        <span class="built_in">beautify</span>()</span><br><span class="line"></span><br><span class="line">  &gt; <span class="selector-pseudo">:last-child</span></span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span> <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post</span></span><br><span class="line">  <span class="selector-class">.tag_share</span></span><br><span class="line">    <span class="selector-class">.post-meta</span></span><br><span class="line">      &amp;__tag-list</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line"></span><br><span class="line">      &amp;__tags</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span></span><br><span class="line">        <span class="attribute">width</span>: fit-content</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">font-size</span>: .<span class="number">85em</span></span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out</span><br><span class="line"></span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">          <span class="attribute">background</span>: <span class="variable">$light</span>-blue</span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--white)</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.post_share</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">      <span class="attribute">float</span>: right</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span>: fit-content</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.social-share</span></span><br><span class="line">        <span class="attribute">font-size</span>: .<span class="number">85em</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.social-share-icon</span></span><br><span class="line">          <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">4px</span></span><br><span class="line">          <span class="attribute">width</span>: w = <span class="number">1.85em</span></span><br><span class="line">          <span class="attribute">height</span>: w</span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">1.2em</span></span><br><span class="line">          <span class="attribute">line-height</span>: w</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.post-copyright</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">40px</span> <span class="number">0</span> <span class="number">10px</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">16px</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--light-grey)</span><br><span class="line">    <span class="attribute">transition</span>: box-shadow .<span class="number">3s</span> ease-in-out</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span><span class="meta">!important</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#f6d8f5</span>, <span class="number">#c2f1f0</span>, <span class="number">#f0debf</span>);</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">background</span> <span class="built_in">var</span>(--heo-post-blockquote-bg)</span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">right</span> -<span class="number">26px</span></span><br><span class="line">      <span class="attribute">top</span> -<span class="number">120px</span></span><br><span class="line">      <span class="attribute">content</span> <span class="string">&#x27;\f25e&#x27;</span></span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">200px</span></span><br><span class="line">      <span class="attribute">font-family</span> <span class="string">&#x27;Font Awesome 5 Brands&#x27;</span></span><br><span class="line">      <span class="attribute">opacity</span> .<span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">232</span>, <span class="number">237</span>, <span class="number">250</span>, .<span class="number">6</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">232</span>, <span class="number">237</span>, <span class="number">250</span>, .<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.post-copyright</span></span><br><span class="line">      &amp;-meta</span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">font-weight</span>: bold</span><br><span class="line"></span><br><span class="line">      &amp;-info</span><br><span class="line">        <span class="attribute">padding-left</span>: <span class="number">6px</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">a</span></span><br><span class="line">          <span class="attribute">text-decoration</span>: none</span><br><span class="line">          <span class="attribute">word-break</span>: break-word</span><br><span class="line"></span><br><span class="line">          <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">            <span class="attribute">text-decoration</span>: none</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.post-copyright-cc-info</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$theme</span>-color;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.post-outdate-notice</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span></span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">5em</span> <span class="number">1.2em</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="variable">$noticeOutdate</span>-bg</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$noticeOutdate</span>-color</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;noticeOutdate.style&#x27;</span>) == <span class="string">&#x27;flat&#x27;</span></span><br><span class="line">      <span class="attribute">padding</span>: .<span class="number">5em</span> <span class="number">1em</span> .<span class="number">5em</span> <span class="number">2.6em</span></span><br><span class="line">      <span class="attribute">border-left</span>: <span class="number">5px</span> solid <span class="variable">$noticeOutdate</span>-border</span><br><span class="line"></span><br><span class="line">      <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">        <span class="keyword">@extend</span> <span class="selector-class">.fontawesomeIcon</span></span><br><span class="line">        <span class="attribute">position</span>: absolute</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">50%</span></span><br><span class="line">        <span class="attribute">left</span>: .<span class="number">9em</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$noticeOutdate</span>-border</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&#x27;\f071&#x27;</span></span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.ads-wrap</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">40px</span> <span class="number">0</span></span><br><span class="line"><span class="selector-class">.post-copyright-m-info</span></span><br><span class="line">  <span class="selector-class">.post-copyright-a</span>,</span><br><span class="line">  <span class="selector-class">.post-copyright-c</span>,</span><br><span class="line">  <span class="selector-class">.post-copyright-u</span></span><br><span class="line">    <span class="attribute">display</span> inline-block</span><br><span class="line">    <span class="attribute">width</span> fit-content</span><br><span class="line">    <span class="attribute">padding</span> <span class="number">2px</span> <span class="number">5px</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span></span><br><span class="line">  <span class="selector-id">#post</span></span><br><span class="line">    <span class="selector-class">.post-copyright</span></span><br><span class="line">      <span class="attribute">background</span> <span class="number">#07080a</span></span><br><span class="line">      <span class="attribute">text-shadow</span> <span class="number">#bfbeb8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span></span><br><span class="line">      <span class="attribute">border</span> <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">19</span> <span class="number">18</span> <span class="number">18</span> / <span class="number">35%</span>)</span><br><span class="line">      <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">var</span>(--theme-color)</span><br><span class="line">      <span class="attribute">animation</span> flashlight <span class="number">1s</span> linear infinite alternate</span><br><span class="line">  <span class="selector-class">.post-copyright-info</span></span><br><span class="line">    <span class="attribute">color</span> <span class="number">#e0e0e4</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post</span></span><br><span class="line">  <span class="selector-class">.post-copyright__title</span></span><br><span class="line">    <span class="attribute">font-size</span> <span class="number">22px</span></span><br><span class="line">  <span class="selector-class">.post-copyright__notice</span></span><br><span class="line">    <span class="attribute">font-size</span> <span class="number">15px</span></span><br><span class="line">  <span class="selector-class">.post-copyright</span></span><br><span class="line">    <span class="attribute">box-shadow</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span></span><br></pre></td></tr></table></figure></li><li><p>默认项的配置</p><ul><li><p>作者：<code>[BlogRoot]\_config.yml</code>中的<code>author</code>配置项</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Akilarの糖果屋</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">Akilar.top</span></span><br><span class="line"><span class="attr">description:</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Akilar</span> <span class="comment">#默认作者</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>许可协议：<code>[BlogRoot]\_config.butterfly.yml</code>中的<code>license</code>和<code>license_url</code>配置项</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">decode:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>页面覆写配置项，修改对应文章的<code>front-matter</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Copyright-beautify # 文章名称</span><br><span class="line">date: 2021-03-02 13:52:46 # 文章发布日期</span><br><span class="line">updated: 2023-11-25 12:27:56 # 文章更新日期</span><br><span class="line">copyright<span class="emphasis">_author: Nesxc # 作者覆写</span></span><br><span class="line"><span class="emphasis">copyright_</span>url: https://www.nesxc.com/post/hexocc.html # 原文链接覆写</span><br><span class="line">license: # 许可协议名称覆写</span><br><span class="line"><span class="section">license<span class="emphasis">_url: # 许可协议链接覆写</span></span></span><br><span class="line"><span class="emphasis"><span class="section">---</span></span></span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="6-评论表情包放大">6  评论表情包放大</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://blog.leonus.cn/2022/owo-big.html">评论表情包放大功能，超实用</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307201707217.png) --><p><img src="https://p0.meituan.net/csc/609e909792f0ca64238447a85e08050923829.jpg" alt=""></p></div></div><div class="note info flat"><p>其实实现的原理很简单，就是创建一个盒子，将表情包的内容放在盒子里面，然后控制盒子位置和显示隐藏即可。</p></div><ol><li><p>新建文件<code>[BlogRoot]\source\js\emoji.js</code>，写入如下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果当前页有评论就执行函数</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;post-comment&#x27;</span>)) <span class="title function_">owoBig</span>();</span><br><span class="line"><span class="comment">// 表情放大</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">owoBig</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="number">1</span>, <span class="comment">// 设置节流阀</span></span><br><span class="line">        owo_time = <span class="string">&#x27;&#x27;</span>, <span class="comment">// 设置计时器</span></span><br><span class="line">        m = <span class="number">3</span>; <span class="comment">// 设置放大倍数</span></span><br><span class="line">    <span class="comment">// 创建盒子</span></span><br><span class="line">    <span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>),</span><br><span class="line">        body = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">    <span class="comment">// 设置ID</span></span><br><span class="line">    div.<span class="property">id</span> = <span class="string">&#x27;owo-big&#x27;</span>;</span><br><span class="line">    <span class="comment">// 插入盒子</span></span><br><span class="line">    body.<span class="title function_">appendChild</span>(div)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造observer</span></span><br><span class="line">    <span class="keyword">let</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function"><span class="params">mutations</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; mutations.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> dom = mutations[i].<span class="property">addedNodes</span>,</span><br><span class="line">                owo_body = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (dom.<span class="property">length</span> == <span class="number">2</span> &amp;&amp; dom[<span class="number">1</span>].<span class="property">className</span> == <span class="string">&#x27;OwO-body&#x27;</span>) owo_body = dom[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// 如果需要在评论内容中启用此功能请解除下面的注释</span></span><br><span class="line">            <span class="comment">// else if (dom.length == 1 &amp;&amp; dom[0].className == &#x27;tk-comment&#x27;) owo_body = dom[0];</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 禁用右键（手机端长按会出现右键菜单，为了体验给禁用掉）</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span> &lt;= <span class="number">768</span>) owo_body.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> e.<span class="title function_">preventDefault</span>());</span><br><span class="line">            <span class="comment">// 鼠标移入</span></span><br><span class="line">            owo_body.<span class="property">onmouseover</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (flag &amp;&amp; e.<span class="property">target</span>.<span class="property">tagName</span> == <span class="string">&#x27;IMG&#x27;</span>) &#123;</span><br><span class="line">                        flag = <span class="number">0</span>;</span><br><span class="line">                        <span class="comment">// 移入300毫秒后显示盒子</span></span><br><span class="line">                        owo_time = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                            <span class="keyword">let</span> height = e.<span class="property">path</span>[<span class="number">0</span>].<span class="property">clientHeight</span> * m, <span class="comment">// 盒子高</span></span><br><span class="line">                                width = e.<span class="property">path</span>[<span class="number">0</span>].<span class="property">clientWidth</span> * m, <span class="comment">// 盒子宽</span></span><br><span class="line">                                left = (e.<span class="property">x</span> - e.<span class="property">offsetX</span>) - (width - e.<span class="property">path</span>[<span class="number">0</span>].<span class="property">clientWidth</span>) / <span class="number">2</span>, <span class="comment">// 盒子与屏幕左边距离</span></span><br><span class="line">                                top = e.<span class="property">y</span> - e.<span class="property">offsetY</span>; <span class="comment">// 盒子与屏幕顶部距离</span></span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> ((left + width) &gt; body.<span class="property">clientWidth</span>) left -= ((left + width) - body.<span class="property">clientWidth</span> + <span class="number">10</span>); <span class="comment">// 右边缘检测，防止超出屏幕</span></span><br><span class="line">                            <span class="keyword">if</span> (left &lt; <span class="number">0</span>) left = <span class="number">10</span>; <span class="comment">// 左边缘检测，防止超出屏幕</span></span><br><span class="line">                            <span class="comment">// 设置盒子样式</span></span><br><span class="line">                            div.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">`display:flex; height:<span class="subst">$&#123;height&#125;</span>px; width:<span class="subst">$&#123;width&#125;</span>px; left:<span class="subst">$&#123;left&#125;</span>px; top:<span class="subst">$&#123;top&#125;</span>px;`</span>;</span><br><span class="line">                            <span class="comment">// 在盒子中插入图片</span></span><br><span class="line">                            div.<span class="property">innerHTML</span> = <span class="string">`&lt;img src=&quot;<span class="subst">$&#123;e.target.src&#125;</span>&quot;&gt;`</span></span><br><span class="line">                        &#125;, <span class="number">300</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            <span class="comment">// 鼠标移出隐藏盒子</span></span><br><span class="line">            owo_body.<span class="property">onmouseout</span> = <span class="function">() =&gt;</span> &#123; div.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>, flag = <span class="number">1</span>, <span class="built_in">clearTimeout</span>(owo_time); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;post-comment&#x27;</span>), &#123; <span class="attr">subtree</span>: <span class="literal">true</span>, <span class="attr">childList</span>: <span class="literal">true</span> &#125;) <span class="comment">// 监听的 元素 和 配置项</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>新建文件<code>[BlogRoot]\source\css\emoji.css</code>，写入如下内容（更推荐全部写在<code>custom.css</code>）：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#owo-big</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#aaa</span> solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9999</span>;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0</span>, -<span class="number">105%</span>);</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">animation</span>: owoIn <span class="number">0.3s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.42</span>, <span class="number">0</span>, <span class="number">0.3</span>, <span class="number">1.11</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-id">#owo-big</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#4a4a4a</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#owo-big</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 动画效果代码由 Heo：https://blog.zhheo.com/ 提供 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> owoIn &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0</span>, -<span class="number">95%</span>);</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0</span>, -<span class="number">105%</span>);</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>引入<code>css</code>和<code>js</code>文件，略</p></li><li><p>重启项目，略</p></li></ol></div></details><h2 id="7-Vue-Element样式弹窗">7  Vue+Element样式弹窗</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/2d7ac914.html#Vue-Element%E6%A0%B7%E5%BC%8F%E5%BC%B9%E7%AA%97">Vue+Element样式弹窗</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- <img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307201716546.png style="zoom:67%" /> --><img src=https://p0.meituan.net/csc/af31dcc033e34347ed2e554c73db742214436.jpg style="zoom:67%" /></div></div><ol><li><p>在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>中 引入<code>Vue</code>和<code>Element</code>相关依赖：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line"><span class="addition">+    - &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css&quot;&gt; # 引入组件库(f12)</span></span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script async src=&quot;https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js&quot;&gt;&lt;/script&gt; # 引入VUE(f12)</span></span><br><span class="line"><span class="addition">+    - &lt;script async src=&quot;https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js&quot;&gt;&lt;/script&gt; # 引入ElementUI(f12)</span></span><br></pre></td></tr></table></figure></li><li><p>在你想要弹出弹窗的js代码中加入如下代码即可触发弹窗：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&quot;你已被发现😜&quot;</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&quot;小伙子，扒源记住要遵循GPL协议！&quot;</span>,</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">            <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">            <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><p><code>notify</code>：弹窗类型，可以替换为<code>message</code>（信息提示）和<code>confirm</code>（二次确认提示）</p></li><li><p><code>title</code>：弹窗标题，可以改为自定义标题</p></li><li><p><code>message</code>:弹窗信息，可以改为自定义内容</p></li><li><p><code>position</code>：弹出位置，bottom、top和left、right两两组合</p></li><li><p><code>offset</code>：偏移量，简单可以理解为与边界的距离</p></li><li><p><code>showClose</code>：是否显示关闭按钮</p></li><li><p><code>type</code>：提示类型，可选success/warning/info/error等</p></li><li><p><code>duration</code>：停留时间，弹出停留至消失的时间，单位ms</p><p>详见：<a href="https://blog.csdn.net/weixin_53791978/article/details/124169067">Vue中常用的提示信息</a></p></li></ul></li></ol></div></details><h2 id="8-按键防抖">8  按键防抖</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><div class="note info flat"><p>我们的博客按钮非常多，可能你平时并不在意，如果你为f12按钮绑定了一个弹窗，那当你长按f12可能会无限触发弹窗，这就是没有做按键防抖的后果，我们的是静态博客，所以只消耗本地的资源，如果是有后端服务的，频繁触发某个逻辑可能会消耗服务器资源，因此我们必须在前端过滤这些非法操作，不能让其跑到后端！我这里用的是最初等的计时器对象来防抖，原理就是延迟某个时间再触发逻辑(例如300ms)，如果这段时间内按键再次按下直接忽略。</p></div><ol><li><p>在任意一个js文件引入以下代码(我是在<code>[BlogRoot]\source\js\custom.js</code>引入的)，这个js文件的引入最好在前面，否则可能不能及时生效</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 防抖全局计时器</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">TT</span> = <span class="literal">null</span>;    <span class="comment">//time用来控制事件的触发</span></span><br><span class="line"><span class="comment">// 防抖函数:fn-&gt;逻辑 time-&gt;防抖时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, time</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable constant_">TT</span> !== <span class="literal">null</span>) <span class="built_in">clearTimeout</span>(<span class="variable constant_">TT</span>);</span><br><span class="line">    <span class="variable constant_">TT</span> = <span class="built_in">setTimeout</span>(fn, time);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>将你需要防抖的函数<code>fn()</code>用<code>debounce(fn, 300)</code>替代，防抖时间可以自定义，单位为ms，下面就是一个例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复制提醒</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;copy&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">            <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&quot;哎嘿！复制成功🍬&quot;</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&quot;若要转载最好保留原文链接哦，给你一个大大的赞！&quot;</span>,</span><br><span class="line">                    <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                    <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                    <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                    <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">300</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件引入以上js文件，具体过程略。这样写全局都是用一个计时器，考虑到我们的博客较为简单，这样做实测是没啥问题了，再也不怕手抖了！</p></li></ol></div></details><h2 id="9-夜间模式动画-店长">9  夜间模式动画(店长)</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/d739261b.html#%E5%A4%9C%E9%97%B4%E6%A8%A1%E5%BC%8F%E5%8A%A8%E7%94%BB-%E5%BA%97%E9%95%BF">夜间模式动画(店长)</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><p>见本站切换样式😋😋😋</p></div></div><ol><li><p>新建<code>[BlogRoot]\themes\butterfly\layout\includes\custom\sun_moon.pug</code>,这部分其实实质上就是一个svg文件，通过js操作它的旋转显隐，淡入淡出实现动画效果。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">svg(aria-hidden=&#x27;true&#x27;, style=&#x27;position:absolute; overflow:hidden; width:0; height:0&#x27;)</span><br><span class="line">  symbol#icon-sun(viewBox=&#x27;0 0 1024 1024&#x27;)</span><br><span class="line">    path(d=&#x27;M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z&#x27;, fill=&#x27;#FFD878&#x27;, p-id=&#x27;8420&#x27;)</span><br><span class="line">    path(d=&#x27;M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z&#x27;, fill=&#x27;#FFE4A9&#x27;, p-id=&#x27;8421&#x27;)</span><br><span class="line">    path(d=&#x27;M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z&#x27;, fill=&#x27;#4D5152&#x27;, p-id=&#x27;8422&#x27;)</span><br><span class="line">    path(d=&#x27;M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z&#x27;, fill=&#x27;#4D5152&#x27;, p-id=&#x27;8423&#x27;)</span><br><span class="line">  symbol#icon-moon(viewBox=&#x27;0 0 1024 1024&#x27;)</span><br><span class="line">    path(d=&#x27;M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z&#x27;, fill=&#x27;#FFB531&#x27;, p-id=&#x27;11345&#x27;)</span><br><span class="line">    path(d=&#x27;M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z&#x27;, fill=&#x27;#030835&#x27;, p-id=&#x27;11346&#x27;)</span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]\themes\butterfly\source\css\_layout\sun_moon.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.Cuteen_DarkSky</span>,</span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span><span class="selector-pseudo">:before</span></span><br><span class="line">  <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">right</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">bottom</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">88888888</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span></span><br><span class="line">  <span class="attribute">background</span> <span class="built_in">linear-gradient</span>(<span class="number">#feb8b0</span>, <span class="number">#fef9db</span>)</span><br><span class="line">  <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">    <span class="attribute">transition</span> <span class="number">2s</span> ease all</span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">background</span> <span class="built_in">linear-gradient</span>(<span class="number">#4c3f6d</span>, <span class="number">#6c62bb</span>, <span class="number">#93b1ed</span>)</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.DarkMode</span></span><br><span class="line">  <span class="selector-class">.Cuteen_DarkSky</span></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkPlanet</span></span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">99999999</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">left</span> -<span class="number">50%</span></span><br><span class="line">  <span class="attribute">top</span> -<span class="number">50%</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">200%</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">200%</span></span><br><span class="line">  -webkit-<span class="attribute">animation</span> CuteenPlanetMove <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="attribute">animation</span> CuteenPlanetMove <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="attribute">transform-origin</span> center bottom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> CuteenPlanetMove &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> CuteenPlanetMove &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.Cuteen_DarkPlanet</span></span><br><span class="line">  <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">left</span> <span class="number">35%</span></span><br><span class="line">    <span class="attribute">top</span> <span class="number">40%</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">9.375rem</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">9.375rem</span></span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">50%</span></span><br><span class="line">    <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attribute">background</span> <span class="built_in">linear-gradient</span>(<span class="number">#fefefe</span>, <span class="number">#fffbe8</span>)</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search</span></span><br><span class="line">  <span class="selector-tag">span</span></span><br><span class="line">    <span class="attribute">display</span> none</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.menus_item</span></span><br><span class="line">  <span class="selector-tag">a</span></span><br><span class="line">    <span class="attribute">text-decoration</span> none<span class="meta">!important</span></span><br><span class="line"><span class="comment">//按钮相关，对侧栏按钮做过魔改的可以调整这里的数值</span></span><br><span class="line"><span class="selector-class">.icon-V</span></span><br><span class="line">  <span class="attribute">padding</span> <span class="number">5px</span></span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]\themes\butterfly\source\js\sun_moon.js</code>,去除了冗余代码，去jquery</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">switchNightMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">insertAdjacentHTML</span>(<span class="string">&#x27;beforeend&#x27;</span>, <span class="string">&#x27;&lt;div class=&quot;Cuteen_DarkSky&quot;&gt;&lt;div class=&quot;Cuteen_DarkPlanet&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>),</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;DarkMode&#x27;</span>) ? (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;DarkMode&#x27;</span>), <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-moon&#x27;</span>)) : (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;DarkMode&#x27;</span>), <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, <span class="string">&#x27;1&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-sun&#x27;</span>)),</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;opacity 3s&#x27;</span>;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="title function_">remove</span>();</span><br><span class="line">          &#125;, <span class="number">1e3</span>);</span><br><span class="line">        &#125;, <span class="number">2e3</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="keyword">const</span> nowMode = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) === <span class="string">&#x27;dark&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (nowMode === <span class="string">&#x27;light&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_">activateDarkMode</span>()</span><br><span class="line">    saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span> &amp;&amp; btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>.<span class="property">day_to_night</span>)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-sun&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">activateLightMode</span>()</span><br><span class="line">    saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;DarkMode&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-moon&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// handle some cases</span></span><br><span class="line">  <span class="keyword">typeof</span> utterancesTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">utterancesTheme</span>()</span><br><span class="line">  <span class="keyword">typeof</span> <span class="variable constant_">FB</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">loadFBComment</span>()</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">DISQUS</span> &amp;&amp; <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;disqus_thread&#x27;</span>).<span class="property">children</span>.<span class="property">length</span> &amp;&amp; <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">disqusReset</span>(), <span class="number">200</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[BlogRoot]\themes\butterfly\layout\includes\head.pug</code>,在文件末位加上一行</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  //- global config</span><br><span class="line">  !=partial(&#x27;includes/head/config&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"></span><br><span class="line">  include ./head/config_site.pug</span><br><span class="line">  include ./head/noscript.pug</span><br><span class="line"></span><br><span class="line">  !=fragment_cache(&#x27;injectHeadJs&#x27;, function()&#123;return inject_head_js()&#125;)</span><br><span class="line"></span><br><span class="line">  !=fragment_cache(&#x27;injectHead&#x27;, function()&#123;return injectHtml(theme.inject.head)&#125;)</span><br><span class="line"><span class="addition">+ include ./custom/sun_moon.pug</span></span><br></pre></td></tr></table></figure></li><li><p>修改<code>[BlogRoot]\themes\butterfly\layout\includes\rightside.pug</code>,把原本的昼夜切换按钮替换掉</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  when &#x27;translate&#x27;</span><br><span class="line">    if translate.enable</span><br><span class="line">      button#translateLink(type=&quot;button&quot; title=_p(&#x27;rightside.translate_title&#x27;))= translate.default</span><br><span class="line">  when &#x27;darkmode&#x27;</span><br><span class="line">    if darkmode.enable &amp;&amp; darkmode.button</span><br><span class="line"><span class="deletion">-     button#darkmode(type=&quot;button&quot; title=_p(&#x27;rightside.night_mode_title&#x27;))</span></span><br><span class="line"><span class="deletion">-       i.fas.fa-adjust</span></span><br><span class="line"><span class="addition">+     a.icon-V.hidden(onclick=&#x27;switchNightMode()&#x27;,  title=_p(&#x27;rightside.night_mode_title&#x27;))</span></span><br><span class="line"><span class="addition">+       svg(width=&#x27;25&#x27;, height=&#x27;25&#x27;, viewBox=&#x27;0 0 1024 1024&#x27;)</span></span><br><span class="line"><span class="addition">+         use#modeicon(xlink:href=&#x27;#icon-moon&#x27;)</span></span><br></pre></td></tr></table></figure></li><li><p>修改<code>[BlogRoot]\_config.butterfly.yml</code>,引入一下js</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script async src=&quot;/js/sun_moon.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>重启项目并切换夜间模式即可看见效果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="10-夜间模式切换动画2-0">10  夜间模式切换动画2.0</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><div class="note info flat"><p>逛博客看见别人的切换动画有月亮，而且颜色也很好看，于是一顿f12操作下大概看懂原理，再结合现在的动画改进一下就是了。(注意：在做本魔改前，请先完成店长的夜间模式切换动画，同时最好也要有引入Vue+Element弹窗。本动画是基于店长的样式改进的，加入了弯月，切换到夜间模式是太阳变月亮，切换到白天模式是月亮变太阳，同时背景颜色也改为了我喜欢的。)</p></div><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307201816590.gif style="zoom:67%" /></div></div><ol><li><p>替换原来的<code>[BlogRoot]\themes\butterfly\source\js\sun_moon.js</code>为以下代码，这里主要改进是由原来的<code>after</code>遮罩换为两个元素，再通过定时器来控制各自元素的透明度达到绘制太阳和月亮的目的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">switchNightMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">insertAdjacentHTML</span>(<span class="string">&#x27;beforeend&#x27;</span>, <span class="string">&#x27;&lt;div class=&quot;Cuteen_DarkSky&quot;&gt;&lt;div class=&quot;Cuteen_DarkPlanet&quot;&gt;&lt;div id=&quot;sun&quot;&gt;&lt;/div&gt;&lt;div id=&quot;moon&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>),</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;DarkMode&#x27;</span>) ? (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;DarkMode&#x27;</span>), <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-moon&#x27;</span>)) : (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;DarkMode&#x27;</span>), <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, <span class="string">&#x27;1&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-sun&#x27;</span>)),</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;opacity 3s&#x27;</span>;</span><br><span class="line">                    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="title function_">remove</span>();</span><br><span class="line">                    &#125;, <span class="number">1e3</span>);</span><br><span class="line">                &#125;, <span class="number">2e3</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="keyword">const</span> nowMode = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) === <span class="string">&#x27;dark&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (nowMode === <span class="string">&#x27;light&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// 先设置太阳月亮透明度</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">activateDarkMode</span>()</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="comment">// GLOBAL_CONFIG.Snackbar !== undefined &amp;&amp; btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-sun&#x27;</span>)</span><br><span class="line">        <span class="comment">// 延时弹窗提醒</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">                <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                        <span class="attr">title</span>: <span class="string">&quot;关灯啦🌙&quot;</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&quot;当前已成功切换至夜间模式！&quot;</span>,</span><br><span class="line">                        <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                        <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                        <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 先设置太阳月亮透明度</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">activateLightMode</span>()</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;DarkMode&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-moon&#x27;</span>)</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">                <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                        <span class="attr">title</span>: <span class="string">&quot;开灯啦🌞&quot;</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&quot;当前已成功切换至白天模式！&quot;</span>,</span><br><span class="line">                        <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                        <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                        <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// handle some cases</span></span><br><span class="line">    <span class="keyword">typeof</span> utterancesTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">utterancesTheme</span>()</span><br><span class="line">    <span class="keyword">typeof</span> <span class="variable constant_">FB</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">loadFBComment</span>()</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">DISQUS</span> &amp;&amp; <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;disqus_thread&#x27;</span>).<span class="property">children</span>.<span class="property">length</span> &amp;&amp; <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">disqusReset</span>(), <span class="number">200</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>替换原来的<code>[BlogRoot]\themes\butterfly\source\css\_layout\sun_moon.styl</code>为以下代码，主要改变是的绘制太阳和月亮的矢量信息，还有背景颜色改进：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.Cuteen_DarkSky</span>,</span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span><span class="selector-pseudo">:before</span></span><br><span class="line">  <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">right</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">bottom</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">88888888</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span></span><br><span class="line">  <span class="attribute">background</span> <span class="built_in">linear-gradient</span>(to top, <span class="number">#f8cd71</span> <span class="number">0</span>, <span class="number">#5bfde9</span> <span class="number">80%</span>)</span><br><span class="line">  <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">    <span class="attribute">transition</span> <span class="number">2s</span> ease all</span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">background</span> <span class="built_in">linear-gradient</span>(to top, <span class="number">#30cfd0</span> <span class="number">0</span>, <span class="number">#330867</span> <span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.DarkMode</span></span><br><span class="line">  <span class="selector-class">.Cuteen_DarkSky</span></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkPlanet</span></span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">99999999</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">left</span> -<span class="number">50%</span></span><br><span class="line">  <span class="attribute">top</span> -<span class="number">50%</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">200%</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">200%</span></span><br><span class="line">  -webkit-<span class="attribute">animation</span> CuteenPlanetMove <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="attribute">animation</span> CuteenPlanetMove <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="attribute">transform-origin</span> center bottom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> CuteenPlanetMove &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> CuteenPlanetMove &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.Cuteen_DarkPlanet</span></span><br><span class="line">  <span class="selector-id">#sun</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">left</span> <span class="number">44%</span></span><br><span class="line">    <span class="attribute">top</span> <span class="number">30%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">6rem</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">6rem</span></span><br><span class="line">    <span class="attribute">background</span> <span class="number">#ffee94</span></span><br><span class="line">    <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">40px</span> <span class="number">#ffee94</span></span><br><span class="line">    <span class="comment">// opacity 0</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#moon</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">left</span> <span class="number">44%</span></span><br><span class="line">    <span class="attribute">top</span> <span class="number">30%</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">6rem</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">6rem</span></span><br><span class="line">    <span class="attribute">box-shadow</span> -<span class="number">1.8em</span> <span class="number">1.8em</span> <span class="number">0</span> <span class="number">0.2em</span> <span class="number">#fff</span></span><br><span class="line">    <span class="comment">// opacity 1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// &amp;:after</span></span><br><span class="line">  <span class="comment">//   position absolute</span></span><br><span class="line">  <span class="comment">//   left 42%</span></span><br><span class="line">  <span class="comment">//   top 30%</span></span><br><span class="line">  <span class="comment">//   width 6rem</span></span><br><span class="line">  <span class="comment">//   height 6rem</span></span><br><span class="line">  <span class="comment">//   border-radius 50%</span></span><br><span class="line">  <span class="comment">//   content &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">//   background #ffef9e</span></span><br><span class="line">  <span class="comment">//   box-shadow 0 0 30px #ffef9e</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search</span></span><br><span class="line">  <span class="selector-tag">span</span></span><br><span class="line">    <span class="attribute">display</span> none</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.menus_item</span></span><br><span class="line">  <span class="selector-tag">a</span></span><br><span class="line">    <span class="attribute">text-decoration</span> none<span class="meta">!important</span></span><br><span class="line"><span class="comment">//按钮相关，对侧栏按钮做过魔改的可以调整这里的数值</span></span><br><span class="line"><span class="comment">// .icon-V</span></span><br><span class="line"><span class="comment">//   padding 5px</span></span><br></pre></td></tr></table></figure></li><li><p>重启项目并切换夜间模式即可看到效果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="11-Heo同款loading动画">11  Heo同款loading动画</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://blog.anheyu.com/posts/52d8.html">Heo同款loading动画</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- <img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307201856273.png style="zoom:67%" /> --><img src=https://p0.meituan.net/csc/fd53b60360a7035ec6a5031244ec9aa814159.jpg style="zoom:67%" /></div></div><div class="note info flat"><ul><li>本教程适用于 Butterfly 主题 4.5 以上版本（实测为 4.7.0 版本）</li><li>增加了动画页面下有百分比数字加载的效果</li></ul></div><ol><li><p>修改 <code>themes/butterfly/layout/includes/loading/fullpage-loading.pug</code></p><blockquote><p>下方的图片链接记得换成自己的</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">- loading_img = theme.preloader.avatar</span><br><span class="line">#loading-box(onclick=&#x27;document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)&#x27;)</span><br><span class="line">  .loading-bg</span><br><span class="line">    img.loading-img(class=&#x27;nolazyload&#x27; src=loading_img ? url_for(loading_img) : &quot;https://cdn.staticaly.com/gh/HappyLeeCode/IMG@main/img/avatar.webp&quot;)</span><br><span class="line">    .loading-image-dot</span><br><span class="line">    #loading-percentage</span><br><span class="line">      | 0%</span><br><span class="line">script.</span><br><span class="line">  const loadingPercentage = document.getElementById(&quot;loading-percentage&quot;);</span><br><span class="line">  loadingPercentage.style.color = &quot;black&quot;;</span><br><span class="line">  let loadingPercentageTimer = setInterval(function() &#123;</span><br><span class="line">    var progressBar = document.querySelector(&quot;.pace-progress&quot;);</span><br><span class="line">    if (!progressBar) return</span><br><span class="line">    var currentValue = progressBar.getAttribute(&quot;data-progress-text&quot;);</span><br><span class="line">    if (currentValue !== loadingPercentage.textContent) &#123;</span><br><span class="line">      loadingPercentage.textContent = currentValue;</span><br><span class="line">      if (currentValue === &quot;100%&quot;) &#123;</span><br><span class="line">        clearInterval(loadingPercentageTimer);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, 100);</span><br><span class="line">  const preloader = &#123;</span><br><span class="line">    endLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;auto&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.add(&quot;loaded&quot;)</span><br><span class="line">    &#125;,</span><br><span class="line">    initLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.remove(&quot;loaded&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;,()=&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line"></span><br><span class="line">  if (!&#123;theme.pjax &amp;&amp; theme.pjax.enable&#125;) &#123;</span><br><span class="line">    document.addEventListener(&#x27;pjax:send&#x27;, () =&gt; &#123; preloader.initLoading() &#125;)</span><br><span class="line">    document.addEventListener(&#x27;pjax:complete&#x27;, () =&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>修改<code>themes/butterfly/layout/includes/loading/index.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if theme.preloader.source === 1</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">else if theme.preloader.source === 2</span><br><span class="line">  include ./pace.pug</span><br><span class="line">else</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">  include ./pace.pug</span><br></pre></td></tr></table></figure></li><li><p>新建<code>source/css/progress_bar.css</code>, 也可以不做这一步，那么最后一步中修改配置文件<code>pace_css_url</code>这一项就要留空, 这一步是修改 pace 加载的胶囊 💊 样式用的</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">  <span class="selector-class">.pace</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  -webkit-user-select: none;</span><br><span class="line">  -moz-user-select: none;</span><br><span class="line">  user-select: none;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eaecf2</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#e3e8f7</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace-inactive</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span> ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  -moz-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  -ms-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  -o-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  -moz-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  -o-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ee7752</span>, <span class="number">#e73c7e</span>, <span class="number">#23a6d5</span>, <span class="number">#23d5ab</span>);</span><br><span class="line">  <span class="attribute">animation</span>: gradient <span class="number">1.5s</span> ease infinite;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">200%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span><span class="selector-class">.pace-inactive</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改<code>themes/butterfly/source/css/_layout/loading.styl</code>, 注意其中 <strong>.loading-bg</strong> 那一项下的 <strong>background</strong> 可以自行修改为自己的色值。（这里其实就是在修改加载背景的颜色，例如我的颜色是浅蓝色：#B0E2FF）</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;preloader&#x27;</span>)</span><br><span class="line">  <span class="selector-class">.loading-bg</span></span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#B0E2FF</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1001</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-box</span></span><br><span class="line">    <span class="selector-class">.loading-img</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">margin</span>: auto;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#f0f0f2</span>;</span><br><span class="line">      <span class="attribute">animation-duration</span>: .<span class="number">3s</span>;</span><br><span class="line">      <span class="attribute">animation-name</span>: loadingAction;</span><br><span class="line">      <span class="attribute">animation-iteration-count</span>: infinite;</span><br><span class="line">      <span class="attribute">animation-direction</span>: alternate;</span><br><span class="line">    <span class="selector-class">.loading-image-dot</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#6bdf8f</span>;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">18px</span>, <span class="number">24px</span>);</span><br><span class="line">    <span class="selector-id">#loading-percentage</span></span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">67%</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">      <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&quot;「&quot;</span></span><br><span class="line">        <span class="attribute">margin-right</span>: <span class="number">10px</span></span><br><span class="line">      <span class="selector-pseudo">&amp;::after</span></span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&quot;」&quot;</span></span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">10px</span></span><br><span class="line">    &amp;<span class="selector-class">.loaded</span></span><br><span class="line">      <span class="selector-class">.loading-bg</span></span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: -<span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> loadingAction</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: .<span class="number">4</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>在<code>[BlogRoot]\source\css\custom.css</code>中添加以下代码，其中 background 的 url 即为 loading 的图片地址。（不会的同学参考 <a href="/posts/2e57d1d6/" title="【Hexo】添加自定义css和js文件">【Hexo】添加自定义css和js文件</a>）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loading-img</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">https://cdn.staticaly.com/gh/HappyLeeCode/IMG@main/img/avatar.webp</span>) no-repeat center center;</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>最后修改<code>_config.butterfly.yml</code>中<code>preloader</code>选项, 改完以后source: 1 为满屏加载，无 pace 胶囊；source: 2 为 pace 胶囊，无满屏动画；source: 3 是两者都启用。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Loading Animation (加載動畫)</span></span><br><span class="line"><span class="attr">preloader:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source</span></span><br><span class="line">  <span class="comment"># 1. fullpage-loading</span></span><br><span class="line">  <span class="comment"># 2. pace (progress bar)</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># pace theme (see https://codebyzach.github.io/pace/)</span></span><br><span class="line">  <span class="attr">pace_css_url:</span> <span class="string">/css/progress_bar.css</span></span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id="12-自定义右键菜单（自用）">12  自定义右键菜单（自用）</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #444444">点击查看教程</summary><div class="toggle-content"><p>详见：<a href="https://www.fomal.cc/posts/d739261b.html#%E5%A4%9C%E9%97%B4%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2%E5%8A%A8%E7%94%BB2-0">自定义右键菜单（自用）</a></p><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307201954849.png) --><p><img src="https://p0.meituan.net/csc/4a4f29d6bfcd88702395c51780e9848d25038.jpg" alt=""></p></div></div><div class="note warning flat"><p>右键菜单前置教程：按键防抖(必须)、昼夜切换动画(本站有)、<a href="https://blog.leonus.cn/2022/randomPost.html">随即文章实现</a>，请完成这两个前置教程再来做这个，或者可以注释掉pug文件中对应的功能就不会出发相应不存在的函数了。</p></div><ol><li><p>新建 <code>[BlogRoot]\themes\butterfly\layout\includes\rightmenu.pug</code>，编写以下内容：</p><p>我这里统一采用<code>font-Awesome</code>的图标，因为颜色比较统一，就没用iconfont的图标了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">#rightMenu.js-pjax</span><br><span class="line">    .rightMenu-group.rightMenu-small</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:window.history.back();&quot;)</span><br><span class="line">            i.fa.fa-arrow-left</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:window.history.forward();&quot;)</span><br><span class="line">            i.fa.fa-arrow-right</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:window.location.reload();&quot;)</span><br><span class="line">            i.fa.fa-refresh</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.scrollToTop();&quot;)</span><br><span class="line">            i.fa.fa-arrow-up</span><br><span class="line">    .rightMenu-group.rightMenu-line.hide#menu-text</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.copySelect();&quot;)</span><br><span class="line">            i.fa.fa-copy</span><br><span class="line">            span=&#x27;复制&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:window.open(\&quot;https://www.baidu.com/s?wd=\&quot;+window.getSelection().toString());window.location.reload();&quot;)</span><br><span class="line">            i.fa.fa-search</span><br><span class="line">            span=&#x27;百度搜索&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.searchinThisPage();&quot;)</span><br><span class="line">            i.fas.fa-search</span><br><span class="line">            span=&#x27;站内搜索&#x27;</span><br><span class="line">    .rightMenu-group.rightMenu-line.hide#menu-too</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:window.open(window.getSelection().toString());window.location.reload();&quot;)</span><br><span class="line">            i.fa.fa-link</span><br><span class="line">            span=&#x27;转到链接&#x27;</span><br><span class="line">    .rightMenu-group.rightMenu-line.hide#menu-paste</span><br><span class="line">        a.rightMenu-item(href=&#x27;javascript:rmf.paste()&#x27;)</span><br><span class="line">            i.fa.fa-copy</span><br><span class="line">            span=&#x27;粘贴&#x27;</span><br><span class="line">    .rightMenu-group.rightMenu-line.hide#menu-post</span><br><span class="line">        a.rightMenu-item(href=&quot;#post-comment&quot;)</span><br><span class="line">            i.fas.fa-comment</span><br><span class="line">            span=&#x27;空降评论&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.copyWordsLink()&quot;)</span><br><span class="line">            i.fa.fa-link</span><br><span class="line">            span=&#x27;复制本文地址&#x27;</span><br><span class="line">    .rightMenu-group.rightMenu-line.hide#menu-to</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.openWithNewTab()&quot;)</span><br><span class="line">            i.fa.fa-window-restore</span><br><span class="line">            span=&#x27;新窗口打开&#x27;</span><br><span class="line">        a.rightMenu-item#menu-too(href=&quot;javascript:rmf.open()&quot;)</span><br><span class="line">            i.fa.fa-link</span><br><span class="line">            span=&#x27;转到链接&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.copyLink()&quot;)</span><br><span class="line">            i.fa.fa-copy</span><br><span class="line">            span=&#x27;复制链接&#x27;</span><br><span class="line">    .rightMenu-group.rightMenu-line.hide#menu-img</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.saveAs()&quot;)</span><br><span class="line">            i.fa.fa-download</span><br><span class="line">            span=&#x27;保存图片&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.openWithNewTab()&quot;)</span><br><span class="line">            i.fa.fa-window-restore</span><br><span class="line">            span=&#x27;在新窗口打开&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.copyLink()&quot;)</span><br><span class="line">            i.fa.fa-copy</span><br><span class="line">            span=&#x27;复制图片链接&#x27;</span><br><span class="line">    .rightMenu-group.rightMenu-line</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:randomPost()&quot;)</span><br><span class="line">            i.fa.fa-paper-plane</span><br><span class="line">            span=&#x27;随便逛逛&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:switchNightMode();&quot;)</span><br><span class="line">            i.fa.fa-moon</span><br><span class="line">            span=&#x27;昼夜切换&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.translate();&quot;)</span><br><span class="line">            i.fa.fa-language</span><br><span class="line">            span=&#x27;繁简转换&#x27;</span><br><span class="line">        if is_post()||is_page()</span><br><span class="line">            a.rightMenu-item(href=&quot;javascript:rmf.switchReadMode();&quot;)</span><br><span class="line">                i.fa.fa-book</span><br><span class="line">                span=&#x27;阅读模式&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;/about/&quot;)</span><br><span class="line">            i.fa.fa-info-circle</span><br><span class="line">            span=&#x27;关于博客&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:toggleWinbox();&quot;)</span><br><span class="line">            i.fas.fa-cog</span><br><span class="line">            span=&#x27;美化设置&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:rmf.fullScreen();&quot;)</span><br><span class="line">            i.fas.fa-expand</span><br><span class="line">            span=&#x27;切换全屏&#x27;</span><br><span class="line">        a.rightMenu-item(href=&quot;javascript:window.print();&quot;)</span><br><span class="line">            i.fa-solid.fa-print</span><br><span class="line">            span=&#x27;打印页面&#x27;</span><br></pre></td></tr></table></figure></li><li><p>然后在 <code>[BlogRoot]/themes/butterfly/layout/includes/layout.pug</code>中引入（注意缩进，去掉+）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html(lang=config.language data-theme=theme.display_mode class=htmlClassHideAside)</span><br><span class="line">  head</span><br><span class="line">    include ./head.pug</span><br><span class="line">  body</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    else</span><br><span class="line">      include ./404.pug</span><br><span class="line"></span><br><span class="line">    include ./rightside.pug</span><br><span class="line">    !=partial(&#x27;includes/third-party/search/index&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"><span class="addition">+    !=partial(&#x27;includes/rightmenu&#x27;,&#123;&#125;, &#123;cache:true&#125;)</span></span><br><span class="line">    include ./additional-js.pug</span><br></pre></td></tr></table></figure></li><li><p>在自定义的<code>custom.css</code>中加入以下样式描述菜单，其中重要的颜色我都做了备注，根据自己的需要修改</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 右键菜单 */</span></span><br><span class="line"><span class="selector-id">#rightMenu</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">height</span>: fit-content;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="comment">/* 菜单面板背景色 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-bg);</span><br><span class="line">    <span class="comment">/* 菜单面板文字颜色 */</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--font-color);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">7px</span> <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:nth-last-child</span>(<span class="number">1</span>)) &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--font-color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span><span class="selector-class">.rightMenu-small</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span> <span class="selector-class">.rightMenu-item</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span><span class="selector-class">.rightMenu-line</span> <span class="selector-class">.rightMenu-item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span> <span class="selector-class">.rightMenu-item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="comment">/* 鼠标悬浮选项颜色 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--text-bg-hover);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span> <span class="selector-class">.rightMenu-item</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span> <span class="selector-class">.rightMenu-item</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#rightMenu</span> <span class="selector-class">.rightMenu-group</span><span class="selector-class">.rightMenu-line</span> <span class="selector-class">.rightMenu-item</span> * &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rightMenu-group</span><span class="selector-class">.hide</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建 <code>[BlogRoot]/themes/butterfly/source/js/rightmenu.js</code>，并写入如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setMask</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//设置遮罩</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;rmMask&quot;</span>)[<span class="number">0</span>] != <span class="literal">undefined</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;rmMask&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    mask = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    mask.<span class="property">className</span> = <span class="string">&quot;rmMask&quot;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;#fff&#x27;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;.0&#x27;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">top</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">left</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    mask.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="number">998</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(mask);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;rightMenu&quot;</span>).<span class="property">style</span>.<span class="property">zIndex</span> = <span class="number">19198</span>;</span><br><span class="line">    <span class="keyword">return</span> mask;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">insertAtCursor</span>(<span class="params">myField, myValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//IE 浏览器</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">selection</span>) &#123;</span><br><span class="line">        myField.<span class="title function_">focus</span>();</span><br><span class="line">        sel = <span class="variable language_">document</span>.<span class="property">selection</span>.<span class="title function_">createRange</span>();</span><br><span class="line">        sel.<span class="property">text</span> = myValue;</span><br><span class="line">        sel.<span class="title function_">select</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//FireFox、Chrome等</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (myField.<span class="property">selectionStart</span> || myField.<span class="property">selectionStart</span> == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> startPos = myField.<span class="property">selectionStart</span>;</span><br><span class="line">        <span class="keyword">var</span> endPos = myField.<span class="property">selectionEnd</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 保存滚动条</span></span><br><span class="line">        <span class="keyword">var</span> restoreTop = myField.<span class="property">scrollTop</span>;</span><br><span class="line">        myField.<span class="property">value</span> = myField.<span class="property">value</span>.<span class="title function_">substring</span>(<span class="number">0</span>, startPos) + myValue + myField.<span class="property">value</span>.<span class="title function_">substring</span>(endPos, myField.<span class="property">value</span>.<span class="property">length</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (restoreTop &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            myField.<span class="property">scrollTop</span> = restoreTop;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        myField.<span class="title function_">focus</span>();</span><br><span class="line">        myField.<span class="property">selectionStart</span> = startPos + myValue.<span class="property">length</span>;</span><br><span class="line">        myField.<span class="property">selectionEnd</span> = startPos + myValue.<span class="property">length</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        myField.<span class="property">value</span> += myValue;</span><br><span class="line">        myField.<span class="title function_">focus</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> rmf = &#123;&#125;;</span><br><span class="line">rmf.<span class="property">showRightMenu</span> = <span class="keyword">function</span> (<span class="params">isTrue, x = <span class="number">0</span>, y = <span class="number">0</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> $rightMenu = $(<span class="string">&#x27;#rightMenu&#x27;</span>);</span><br><span class="line">    $rightMenu.<span class="title function_">css</span>(<span class="string">&#x27;top&#x27;</span>, x + <span class="string">&#x27;px&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;left&#x27;</span>, y + <span class="string">&#x27;px&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isTrue) &#123;</span><br><span class="line">        $rightMenu.<span class="title function_">show</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $rightMenu.<span class="title function_">hide</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rmf.<span class="property">copyWordsLink</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">    <span class="keyword">let</span> txa = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line">    txa.<span class="property">value</span> = url;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(txa)</span><br><span class="line">    txa.<span class="title function_">select</span>();</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&quot;Copy&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(txa);</span><br><span class="line">&#125;</span><br><span class="line">rmf.<span class="property">switchReadMode</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> $body = <span class="variable language_">document</span>.<span class="property">body</span></span><br><span class="line">    $body.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;read-mode&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> newEle = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">    newEle.<span class="property">type</span> = <span class="string">&#x27;button&#x27;</span></span><br><span class="line">    newEle.<span class="property">className</span> = <span class="string">&#x27;fas fa-sign-out-alt exit-readmode&#x27;</span></span><br><span class="line">    $body.<span class="title function_">appendChild</span>(newEle)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">clickFn</span>(<span class="params"></span>) &#123;</span><br><span class="line">        $body.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;read-mode&#x27;</span>)</span><br><span class="line">        newEle.<span class="title function_">remove</span>()</span><br><span class="line">        newEle.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, clickFn)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    newEle.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, clickFn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//复制选中文字</span></span><br><span class="line">rmf.<span class="property">copySelect</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;Copy&#x27;</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//回到顶部</span></span><br><span class="line">rmf.<span class="property">scrollToTop</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;go-up&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line">    btf.<span class="title function_">scrollToDest</span>(<span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line">rmf.<span class="property">translate</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;translateLink&quot;</span>).<span class="title function_">click</span>();</span><br><span class="line">&#125;</span><br><span class="line">rmf.<span class="property">searchinThisPage</span>=<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(mask);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;local-search-box--input&quot;</span>)[<span class="number">0</span>].<span class="property">value</span>=<span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>()</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;search&quot;</span>)[<span class="number">0</span>].<span class="title function_">click</span>()</span><br><span class="line">    <span class="keyword">var</span> evt = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&quot;HTMLEvents&quot;</span>);evt.<span class="title function_">initEvent</span>(<span class="string">&quot;input&quot;</span>, <span class="literal">false</span>, <span class="literal">false</span>);<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;local-search-box--input&quot;</span>)[<span class="number">0</span>].<span class="title function_">dispatchEvent</span>(evt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">popupMenu</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">oncontextmenu</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="comment">// if (event.ctrlKey) return true;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当关掉自定义右键时候直接返回</span></span><br><span class="line">        <span class="keyword">if</span> (mouseMode == <span class="string">&quot;off&quot;</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        $(<span class="string">&#x27;.rightMenu-group.hide&#x27;</span>).<span class="title function_">hide</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>()) &#123;</span><br><span class="line">            $(<span class="string">&#x27;#menu-text&#x27;</span>).<span class="title function_">show</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;post&#x27;</span>)) &#123;</span><br><span class="line">            $(<span class="string">&#x27;#menu-post&#x27;</span>).<span class="title function_">show</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;page&#x27;</span>)) &#123;</span><br><span class="line">                $(<span class="string">&#x27;#menu-post&#x27;</span>).<span class="title function_">show</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> el = <span class="variable language_">window</span>.<span class="property">document</span>.<span class="property">body</span>;</span><br><span class="line">        el = event.<span class="property">target</span>;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="regexp">/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&amp;&#x27;\*\+,;=.]+$/</span></span><br><span class="line">        <span class="keyword">if</span> (a.<span class="title function_">test</span>(<span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>()) &amp;&amp; el.<span class="property">tagName</span> != <span class="string">&quot;A&quot;</span>) &#123;</span><br><span class="line">            $(<span class="string">&#x27;#menu-too&#x27;</span>).<span class="title function_">show</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (el.<span class="property">tagName</span> == <span class="string">&#x27;A&#x27;</span>) &#123;</span><br><span class="line">            $(<span class="string">&#x27;#menu-to&#x27;</span>).<span class="title function_">show</span>()</span><br><span class="line">            rmf.<span class="property">open</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (el.<span class="property">href</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;http://&quot;</span>) == -<span class="number">1</span> &amp;&amp; el.<span class="property">href</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;https://&quot;</span>) == -<span class="number">1</span> || el.<span class="property">href</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;yisous.xyz&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    pjax.<span class="title function_">loadUrl</span>(el.<span class="property">href</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    location.<span class="property">href</span> = el.<span class="property">href</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            rmf.<span class="property">openWithNewTab</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">open</span>(el.<span class="property">href</span>);</span><br><span class="line">                <span class="comment">// window.location.reload();</span></span><br><span class="line">            &#125;</span><br><span class="line">            rmf.<span class="property">copyLink</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> url = el.<span class="property">href</span></span><br><span class="line">                <span class="keyword">let</span> txa = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line">                txa.<span class="property">value</span> = url;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(txa)</span><br><span class="line">                txa.<span class="title function_">select</span>();</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&quot;Copy&quot;</span>);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(txa);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.<span class="property">tagName</span> == <span class="string">&#x27;IMG&#x27;</span>) &#123;</span><br><span class="line">            $(<span class="string">&#x27;#menu-img&#x27;</span>).<span class="title function_">show</span>()</span><br><span class="line">            rmf.<span class="property">openWithNewTab</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">open</span>(el.<span class="property">src</span>);</span><br><span class="line">                <span class="comment">// window.location.reload();</span></span><br><span class="line">            &#125;</span><br><span class="line">            rmf.<span class="property">click</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                el.<span class="title function_">click</span>()</span><br><span class="line">            &#125;</span><br><span class="line">            rmf.<span class="property">copyLink</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> url = el.<span class="property">src</span></span><br><span class="line">                <span class="keyword">let</span> txa = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line">                txa.<span class="property">value</span> = url;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(txa)</span><br><span class="line">                txa.<span class="title function_">select</span>();</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&quot;Copy&quot;</span>);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(txa);</span><br><span class="line">            &#125;</span><br><span class="line">            rmf.<span class="property">saveAs</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">                <span class="keyword">var</span> url = el.<span class="property">src</span>;</span><br><span class="line">                <span class="keyword">var</span> filename = url.<span class="title function_">split</span>(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>];</span><br><span class="line">                a.<span class="property">href</span> = url;</span><br><span class="line">                a.<span class="property">download</span> = filename;</span><br><span class="line">                a.<span class="title function_">click</span>();</span><br><span class="line">                <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.<span class="property">tagName</span> == <span class="string">&quot;TEXTAREA&quot;</span> || el.<span class="property">tagName</span> == <span class="string">&quot;INPUT&quot;</span>) &#123;</span><br><span class="line">            $(<span class="string">&#x27;#menu-paste&#x27;</span>).<span class="title function_">show</span>();</span><br><span class="line">            rmf.<span class="property">paste</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                navigator.<span class="property">permissions</span></span><br><span class="line">                    .<span class="title function_">query</span>(&#123;</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;clipboard-read&#x27;</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                    .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (result.<span class="property">state</span> == <span class="string">&#x27;granted&#x27;</span> || result.<span class="property">state</span> == <span class="string">&#x27;prompt&#x27;</span>) &#123;</span><br><span class="line">                            <span class="comment">//读取剪贴板</span></span><br><span class="line">                            navigator.<span class="property">clipboard</span>.<span class="title function_">readText</span>().<span class="title function_">then</span>(<span class="function"><span class="params">text</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="variable language_">console</span>.<span class="title function_">log</span>(text)</span><br><span class="line">                                <span class="title function_">insertAtCursor</span>(el, text)</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title class_">Snackbar</span>.<span class="title function_">show</span>(&#123;</span><br><span class="line">                                <span class="attr">text</span>: <span class="string">&#x27;请允许读取剪贴板！&#x27;</span>,</span><br><span class="line">                                <span class="attr">pos</span>: <span class="string">&#x27;top-center&#x27;</span>,</span><br><span class="line">                                <span class="attr">showAction</span>: <span class="literal">false</span>,</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> pageX = event.<span class="property">clientX</span> + <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">let</span> pageY = event.<span class="property">clientY</span>;</span><br><span class="line">        <span class="keyword">let</span> rmWidth = $(<span class="string">&#x27;#rightMenu&#x27;</span>).<span class="title function_">width</span>();</span><br><span class="line">        <span class="keyword">let</span> rmHeight = $(<span class="string">&#x27;#rightMenu&#x27;</span>).<span class="title function_">height</span>();</span><br><span class="line">        <span class="keyword">if</span> (pageX + rmWidth &gt; <span class="variable language_">window</span>.<span class="property">innerWidth</span>) &#123;</span><br><span class="line">            pageX -= rmWidth + <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pageY + rmHeight &gt; <span class="variable language_">window</span>.<span class="property">innerHeight</span>) &#123;</span><br><span class="line">            pageY -= pageY + rmHeight - <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        mask = <span class="title function_">setMask</span>();</span><br><span class="line">        <span class="comment">// 滚动消失的代码和阅读进度有冲突，因此放到readPercent.js里面了</span></span><br><span class="line">        $(<span class="string">&quot;.rightMenu-item&quot;</span>).<span class="title function_">click</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            $(<span class="string">&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;display: none&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="variable language_">window</span>).<span class="title function_">resize</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            rmf.<span class="title function_">showRightMenu</span>(<span class="literal">false</span>);</span><br><span class="line">            $(<span class="string">&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;display: none&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        mask.<span class="property">onclick</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            $(<span class="string">&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;display: none&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        rmf.<span class="title function_">showRightMenu</span>(<span class="literal">true</span>, pageY, pageX);</span><br><span class="line">        $(<span class="string">&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;display: flex&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        rmf.<span class="title function_">showRightMenu</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!(navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i</span>))) &#123;</span><br><span class="line">    <span class="title function_">popupMenu</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="property">documentElement</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addLongtabListener</span>(<span class="params">target, callback</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="number">0</span> <span class="comment">// 初始化timer</span></span><br><span class="line"></span><br><span class="line">    target.<span class="property">ontouchstart</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        timer = <span class="number">0</span> <span class="comment">// 重置timer</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">callback</span>();</span><br><span class="line">            timer = <span class="number">0</span></span><br><span class="line">        &#125;, <span class="number">380</span>) <span class="comment">// 超时器能成功执行，说明是长按</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    target.<span class="property">ontouchmove</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer) <span class="comment">// 如果来到这里，说明是滑动</span></span><br><span class="line">        timer = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    target.<span class="property">ontouchend</span> = <span class="function">() =&gt;</span> &#123; <span class="comment">// 到这里如果timer有值，说明此触摸时间不足380ms，是点击</span></span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addLongtabListener</span>(box, popupMenu)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全屏</span></span><br><span class="line">rmf.<span class="property">fullScreen</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">fullscreenElement</span>) <span class="variable language_">document</span>.<span class="title function_">exitFullscreen</span>();</span><br><span class="line">    <span class="keyword">else</span> <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">requestFullscreen</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 右键开关</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;mouse&quot;</span>) == <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;mouse&quot;</span>, <span class="string">&quot;on&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> mouseMode = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;mouse&quot;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeMouseMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;mouse&quot;</span>) == <span class="string">&quot;on&quot;</span>) &#123;</span><br><span class="line">        mouseMode = <span class="string">&quot;off&quot;</span>;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;mouse&quot;</span>, <span class="string">&quot;off&quot;</span>);</span><br><span class="line">        <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">                <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                        <span class="attr">title</span>: <span class="string">&quot;切换右键模式成功🍔&quot;</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&quot;当前鼠标右键已恢复为系统默认！&quot;</span>,</span><br><span class="line">                        <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                        <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                        <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;, <span class="number">300</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        mouseMode = <span class="string">&quot;on&quot;</span>;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;mouse&quot;</span>, <span class="string">&quot;on&quot;</span>);</span><br><span class="line">        <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">                <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                        <span class="attr">title</span>: <span class="string">&quot;切换右键模式成功🍔&quot;</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&quot;当前鼠标右键已更换为网站指定样式！&quot;</span>,</span><br><span class="line">                        <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                        <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                        <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;, <span class="number">300</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>引入jQuery依赖以及上述的css和js文件(<code>custom.css</code>默认已经引入了就不重复引用了)</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn1.tianli0.top/npm/jquery@latest/dist/jquery.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="addition">+    - &lt;script type=&quot;text/javascript&quot; src=&quot;/js/rightmenu.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>本来到这里重启项目就可以见效了，我这里还加了一个右键开关，取消了原来ctrl复合的右键开关策略。因此还需要加一个右键开关的按钮，在<code>[BlogRoot]\themes\butterfly\layout\includes\rightside.pug</code>中做如下的修改，目的就是把鼠标开关放到右边栏的设置隐藏项里面，这样我们就能随时随地开关右键功能了</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">      when &#x27;comment&#x27;</span><br><span class="line">        if commentsJsLoad</span><br><span class="line">          a#to_comment(href=&quot;#post-comment&quot; title=_p(&quot;rightside.scroll_to_comment&quot;))</span><br><span class="line">            i.fas.fa-comments</span><br><span class="line"></span><br><span class="line"><span class="addition">+      when &#x27;mouse&#x27;</span></span><br><span class="line"><span class="addition">+        button.share(type=&quot;button&quot; title=&#x27;右键模式&#x27; onclick=&quot;changeMouseMode()&quot;)</span></span><br><span class="line"><span class="addition">+          i.fas.fa-mouse</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line"><span class="deletion">-  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;]</span></span><br><span class="line"><span class="addition">+  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;, &#x27;mouse&#x27;]</span></span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;share&#x27;,&#x27;comment&#x27;]</span><br></pre></td></tr></table></figure></li><li><p>重启项目看看效果（可能会有问题，因为这个还是比较复杂的，有问题在评论区留言吧！）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol></div></details>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note blue icon-padding flat&quot;&gt;&lt;i class=&quot;note-icon fas fa-bullhorn&quot;&gt;&lt;/i&gt;&lt;ol&gt;
&lt;li&gt;鉴于每个人的根目录名称都不一样，本帖&lt;strong&gt;博客根目录&lt;/strong&gt;一律以&lt;code&gt;</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】文章置顶滚动栏</title>
    <link href="https://aizhiqian.github.io/posts/be246de6/"/>
    <id>https://aizhiqian.github.io/posts/be246de6/</id>
    <published>2023-07-22T17:34:11.000Z</published>
    <updated>2023-07-22T17:34:11.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info simple"><div class="hide-block"><button type="button" class="hide-button" style="background-color: #39C5BB;color: #FFFFFF">预览效果    </button><div class="hide-content"><p><img src="https://p0.meituan.net/csc/a9bd3611b2364d7ac2c20f16c5e23c6a62463.jpg" alt=""></p></div></div></div><ol><li><p>安装插件,在博客根目录<code>[BlogRoot]</code>下打开终端，运行以下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置信息，以下为写法示例<br>在站点配置文件<code>_config.yml</code>或者主题配置文件<code>_config.butterfly.yml</code>中添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-butterfly-swiper</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/8e1264d1/</span></span><br><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">timemode:</span> <span class="string">date</span> <span class="comment">#date/updated</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">default_descr:</span> <span class="string">再怎么看我也不知道怎么描述它的啦！</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span> <span class="comment">#swiper css依赖</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span> <span class="comment">#swiper js依赖</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css</span> <span class="comment"># 适配主题样式补丁</span></span><br><span class="line">  <span class="attr">custom_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js</span> <span class="comment"># swiper初始化方法</span></span><br></pre></td></tr></table></figure></li><li><p>参数释义</p></li></ol><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">备选值/类型</th><th style="text-align:left">释义</th></tr></thead><tbody><tr><td style="text-align:left">priority</td><td style="text-align:left">number</td><td style="text-align:left">【可选】过滤器优先级，数值越小，执行越早，默认为10，选填</td></tr><tr><td style="text-align:left">enable</td><td style="text-align:left">true/false</td><td style="text-align:left">【必选】控制开关</td></tr><tr><td style="text-align:left">enable_page</td><td style="text-align:left">path/all</td><td style="text-align:left">【可选】填写想要应用的页面的相对路径（即路由地址）,如根目录就填’/‘,分类页面就填’/categories/‘。若要应用于所有页面，就填’all’，默认为all</td></tr><tr><td style="text-align:left">timemode</td><td style="text-align:left">date/updated</td><td style="text-align:left">【可选】时间显示，date为显示创建日期，updated为显示更新日期,默认为date</td></tr><tr><td style="text-align:left">layout.type</td><td style="text-align:left">id/class</td><td style="text-align:left">【可选】挂载容器类型，填写id或class，不填则默认为id</td></tr><tr><td style="text-align:left"><a href="http://layout.name">layout.name</a></td><td style="text-align:left">text</td><td style="text-align:left">【必选】挂载容器名称</td></tr><tr><td style="text-align:left">layout.index</td><td style="text-align:left">0和正整数</td><td style="text-align:left">【可选】前提是layout.type为class，因为同一页面可能有多个class，此项用来确认究竟排在第几个顺位</td></tr><tr><td style="text-align:left">default_descr</td><td style="text-align:left">text</td><td style="text-align:left">默认文章描述</td></tr><tr><td style="text-align:left">swiper_css</td><td style="text-align:left">url</td><td style="text-align:left">【可选】自定义的swiper依赖项css链接</td></tr><tr><td style="text-align:left">swiper_js</td><td style="text-align:left">url</td><td style="text-align:left">【可选】自定义的swiper依赖项加js链接</td></tr><tr><td style="text-align:left">custom_css</td><td style="text-align:left">url</td><td style="text-align:left">【可选】适配主题样式补丁</td></tr><tr><td style="text-align:left">custom_js</td><td style="text-align:left">url</td><td style="text-align:left">【可选】swiper初始化方法</td></tr></tbody></table><p>使用方法:在文章的<code>front_matter</code>中添加<code>swiper_index</code>配置项即可。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章标题</span><br><span class="line">date: 创建日期</span><br><span class="line">updated: 更新日期</span><br><span class="line">cover: 文章封面</span><br><span class="line">description: 文章描述</span><br><span class="line"><span class="section">swiper<span class="emphasis">_index: 1 #置顶轮播图顺序，非负整数，数字越大越靠前</span></span></span><br><span class="line"><span class="emphasis"><span class="section">---</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note info simple&quot;&gt;&lt;div class=&quot;hide-block&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;hide-button&quot; style=&quot;background-color: #39C5BB;color: #FFF</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】博客一图流</title>
    <link href="https://aizhiqian.github.io/posts/75895afb/"/>
    <id>https://aizhiqian.github.io/posts/75895afb/</id>
    <published>2023-07-22T17:32:50.000Z</published>
    <updated>2023-07-22T17:32:50.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info simple"><p>以下 <code>[blogRoot]</code> 为你的博客根目录</p></div><ol><li><p>在<code>[BlogRoot]\source</code>文件夹下新建一个文件夹<code>css</code>，该文件夹用于存放自定义的<code>css样式</code>，再新建一个名为<code>custom.css</code>，在里面写入以下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 页脚与头图透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 白天模式遮罩透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>文件中的<code>inject</code>配置项的<code>head</code>子项加入以下代码，代表引入刚刚创建的<code>custom.css</code>文件（这是相对路径的写法）</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>文件中的<code>index_img</code>和<code>footer_bg</code>配置项取消头图与页脚图的加载项避免冗余加载</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The banner image of home page</span></span><br><span class="line"><span class="attr">index_img:</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Footer Background</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>如果一图流改完了背景图也没了，那大概率是你之前没设置背景图。在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>文件中的<code>background</code>配置项设置背景图</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">background:</span> <span class="string">url(https://source.fomal.cc/img/home_bg.webp)</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note info simple&quot;&gt;&lt;p&gt;以下 &lt;code&gt;[blogRoot]&lt;/code&gt; 为你的博客根目录&lt;/p&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;在&lt;code&gt;[BlogRoot]&#92;source&lt;/code&gt;文件夹下新建一个文件夹&lt;code</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】自定义字体</title>
    <link href="https://aizhiqian.github.io/posts/ca2ce3bc/"/>
    <id>https://aizhiqian.github.io/posts/ca2ce3bc/</id>
    <published>2023-07-22T17:31:05.000Z</published>
    <updated>2023-07-22T17:31:05.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning simple"><p>声明：<strong>非商免字体</strong>未经授权仅限个人使用，不得用于商业用途！</p></div><blockquote><p>以下 <code>[blogRoot]</code> 为你的博客根目录</p></blockquote><ol><li><p>准备好字体文件后，在<code>[BlogRoot]\source\css\custom.css</code>（没有就自己创建）中添加以下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="comment">/* 为载入的字体取名字(随意) */</span></span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;YSHST&#x27;</span>;</span><br><span class="line">  <span class="comment">/* 字体文件地址(相对或者绝对路径都可以) */</span></span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">/font/优设好身体.woff2</span>);</span><br><span class="line">  <span class="comment">/* 定义加粗样式(加粗多少) */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="comment">/* 定义字体样式(斜体/非斜体) */</span></span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="comment">/* 定义显示样式 */</span></span><br><span class="line">  <span class="attribute">font-display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>各个属性的定义：</p><ol><li>font-family属性值中使用webfont来声明使用的是服务器端字体，即设置文本的字体名称。</li><li>src属性值中首先指定了字体文件所在的路径。</li><li>format声明字体文件的格式，可以省略文件格式的声明，单独使用src属性值。</li><li>font-style：设置文本样式。取值：normal:不使用斜体；italic:使用斜体；oblique:使用倾斜体；inherit：从父元素继承。</li><li>支持格式：<em>.eot(老版本IE)，</em>.otf，<em>.ttf，</em>.woff，*.woff2(推荐)</li><li>font-display: 一般为 swap</li></ol></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>中的<code>font</code>配置项以及<code>blog_title_font</code>配置项写上你刚刚引入的字体名称，系统会根据先后次序从前到后依次加载这些字体：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global font settings</span></span><br><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改)</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span> <span class="string">&#x27;15px&#x27;</span></span><br><span class="line">  <span class="attr">code-font-size:</span> <span class="string">&#x27;14px&#x27;</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">YSHST,</span> <span class="string">-apple-system,</span> <span class="string">&#x27;Quicksand&#x27;</span><span class="string">,</span> <span class="string">&#x27;Nimbus Roman No9 L&#x27;</span><span class="string">,</span> <span class="string">&#x27;PingFang SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Hiragino Sans GB&#x27;</span><span class="string">,</span> <span class="string">&#x27;Noto Serif SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft Yahei&#x27;</span><span class="string">,</span> <span class="string">&#x27;WenQuanYi Micro Hei&#x27;</span><span class="string">,</span> <span class="string">&#x27;ST Heiti&#x27;</span><span class="string">,</span> <span class="string">sans-serif;</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">Consolas,</span> <span class="string">YSHST,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">Menlo,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 左上角網站名字 主頁居中網站名字</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span> </span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">YSHST,</span> <span class="string">-apple-system,</span> <span class="string">BlinkMacSystemFont,</span> <span class="string">&quot;Segoe UI&quot;</span> <span class="string">,</span> <span class="string">&quot;Helvetica Neue&quot;</span> <span class="string">,</span> <span class="string">Lato,</span> <span class="string">Roboto,</span> <span class="string">&quot;PingFang SC&quot;</span> <span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span> <span class="string">,</span> <span class="string">&quot;Microsoft YaHei&quot;</span> <span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure></li><li><p>重启项目即可看到</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note warning simple&quot;&gt;&lt;p&gt;声明：&lt;strong&gt;非商免字体&lt;/strong&gt;未经授权仅限个人使用，不得用于商业用途！&lt;/p&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;以下 &lt;code&gt;[blogRoot]&lt;/code&gt; 为你的博</summary>
      
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】添加自定义css和js文件</title>
    <link href="https://aizhiqian.github.io/posts/2e57d1d6/"/>
    <id>https://aizhiqian.github.io/posts/2e57d1d6/</id>
    <published>2023-07-22T17:29:37.000Z</published>
    <updated>2023-07-22T17:29:37.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>如果你还没阅读过官方文档强烈建议去过一遍官方文档，能解决很多别人看起来很弱智的问题。<br>为别人好也为自己好。<a href="https://butterfly.js.org/">Butterfly官方文档</a></p></blockquote><h2 id="1-创建文件">1  创建文件</h2><p>如果想魔改和美化，添加自定义文件是不可避免的。下面来详细说一下css和js文件的创建和引入，其他文件同理。</p><p>我们找到<code>博客根目录下</code>的<code>source</code>文件夹（主题的source虽然也可以，但是不推荐）<br>在里面创建js和css文件夹，也可以创建其他文件夹，例如存放图片的img文件夹，存放字体的font文件夹等等。</p><h2 id="2-引入文件">2  引入文件</h2><p>一般来说，我们都是在主题配置文件（<code>_config.butterfly.yml</code>）里面的<code>inject</code>引入。（不知道这个文件的去看文档）<br>css文件一般在<code>head</code>引入，js文件一般在<code>bottom</code>里引入，特殊情况除外。</p><p>例如引入css文件夹里面的<code>style.css</code>和js文件夹里面的<code>script.js</code>，可以这样写:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># 自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/style.css?1&quot;&gt;</span></span><br><span class="line">    <span class="comment"># 静态文件后面加个  ?任意内容  可以在每次更新之后用户自动重新请求.</span></span><br><span class="line">    <span class="comment"># 例如添加 ?1 ,在修改此文件后改成 ?2 ,用户访问你的网站时,不会使用本地的缓存,而是请求新的内容。没修改的话就不用动。</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="comment"># 自定义js</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/script.js?1&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="comment"># 引入多个文件就直接往下复制一行改一下文件名即可，如下：</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/script1.js?1&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/script2.js?1&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><div class="note danger simple"><p>注意：路径最前面是斜杠，而不是点斜杠，即<code>/xx/xxx.js</code>，而不是<code>./xx/xxx.js</code>。</p></div><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://b.leonus.cn/2022/custom.html">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://p0.meituan.net/csc/817ee634e69b29bc17cf8f6eff8bce447961.png)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">转载链接直达</div>            <div class="tag-link-sitename"> 博客自定义添加css和js文件</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div>]]></content>
    
    
    <summary type="html">Hexo博客添加自定义css和js文件</summary>
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="美化" scheme="https://aizhiqian.github.io/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】更换设备后部署博客</title>
    <link href="https://aizhiqian.github.io/posts/b2c9bae0/"/>
    <id>https://aizhiqian.github.io/posts/b2c9bae0/</id>
    <published>2023-07-22T17:28:04.000Z</published>
    <updated>2024-04-27T10:32:38.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note green icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>👋  本人自己换电脑时进行的操作。</p><p>🦋  适合本人自己，大家仅供参考！</p></div><h1>1  工具准备</h1><h2 id="1-1-安装-Git">1.1 安装 Git</h2><p>直接去官网下载Git并安装，如果国内网速太慢可以“科学上网”或者从其他平台下载。安装时一路next到底就行了，也可以在网上找教程。</p><blockquote><p><strong>可参考安装教程</strong><br><a href="https://blog.csdn.net/mukes/article/details/115693833">Git 详细安装教程（详解 Git 安装过程的每一个步骤）</a></p></blockquote><h2 id="1-2-安装-VS-Code-可选">1.2 安装 VS Code(可选)</h2><p>在安装Git之前，我建议先安装 VS Code。因为安装 Git Bash 时，可以设置 VS Code 作为默认编辑器。Visual Studio Code，简称 VS Code。目前最为强大易用的编辑器，轻量且快速。</p><p>可下载 <strong>.ZIP</strong> 压缩包便携版。</p><blockquote><p><a href="https://code.visualstudio.com/Download"><strong>链接直达</strong></a></p></blockquote><h2 id="1-3-安装-Node-js-可选">1.3 安装 Node.js(可选)</h2><p>建议下载长期支持版，而非当前发布版，因为如果是最新版，容易出现一些奇妙的 bug。</p><blockquote><p><strong>可参考安装教程</strong><br><a href="https://blog.csdn.net/qq_42006801/article/details/124830995?ops_request_misc=%7B%22request%5Fid%22%3A%22168489482216800182783090%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=168489482216800182783090&amp;biz_id=0&amp;spm=1018.2226.3001.4187">Node.js安装与配置（详细步骤）</a><br><a href="https://blog.csdn.net/weixin_44893902/article/details/121788104?ops_request_misc=%7B%22request%5Fid%22%3A%22168489482216800182783090%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=168489482216800182783090&amp;biz_id=0&amp;spm=1018.2226.3001.4187">node.js安装及环境配置超详细教程【Windows系统安装包方式】</a></p></blockquote><p>国内使用 npm 可能很慢，你可以“科学上网”，或者考虑切换为 taobao 镜像源，即手动输入以下内容后按回车（也可以<kbd>Ctrl</kbd>+<kbd>C</kbd>和<kbd>Ctrl</kbd>+<kbd>V</kbd>复制以下代码按回车）：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h1>2  生成SSH密钥</h1><blockquote><p>Windows 用户建议使用 <strong>Windows PowerShell</strong> 或者 <strong>Git Bash</strong>，最好是 <strong>Git Bash</strong> ，在 <strong>命令提示符(cmd)</strong> 下无 <code>cat</code> 和 <code>ls</code> 命令。</p></blockquote><h2 id="2-1-生成-SSH-Key">2.1 生成 SSH Key</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;3332664073@qq.com&quot;</span></span><br></pre></td></tr></table></figure><ul><li><code>-t</code> key 类型</li><li><code>-C</code> 注释</li></ul><p>输出，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private ed25519 key pair.</span><br><span class="line">Enter file in which to save the key (/home/git/.ssh/id_ed25519):</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved in /home/git/.ssh/id_ed25519</span><br><span class="line">Your public key has been saved in /home/git/.ssh/id_ed25519.pub</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:ohDd0OK5WG2dx4gST/j35HjvlJlGHvihyY+Msl6IC8I 3332664073@qq.com</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+--[ED25519 256]--+</span><br><span class="line">|    .o           |</span><br><span class="line">|   .+oo          |</span><br><span class="line">|  ...O.o +       |</span><br><span class="line">|   .= * = +.     |</span><br><span class="line">|  .o +..S*. +    |</span><br><span class="line">|. ...o o..+* *   |</span><br><span class="line">|.E. o . ..+.O    |</span><br><span class="line">| . . ... o =.    |</span><br><span class="line">|    ..oo. o.o    |</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure><ul><li>中间通过三次<strong>回车键</strong>确定</li></ul><h2 id="2-2-查看SSH-key">2.2 查看SSH key</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> ~/.ssh/</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id_ed25519  id_ed25519.pub</span><br></pre></td></tr></table></figure><ul><li>私钥文件 <code>id_ed25519</code></li><li>公钥文件 <code>id_ed25519.pub</code></li></ul><h2 id="2-3-读取公钥文件">2.3 读取公钥文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_ed25519.pub</span><br></pre></td></tr></table></figure><p>输出，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-ed25519 AAAA***5B 3332664073@qq.com</span><br></pre></td></tr></table></figure><h2 id="2-4-复制-SSH-公钥">2.4 复制 SSH 公钥</h2><p>如果您的 SSH 公钥文件与示例代码不同，请修改文件名以匹配您当前的设置。 在复制密钥时，请勿添加任何新行或空格。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clip &lt; ~/.ssh/id_ed25519.pub</span><br></pre></td></tr></table></figure><h1>3  覆盖SSH文件</h1><h2 id="3-1-下载备份文件">3.1 下载备份文件</h2><p>将 <strong>阿里云盘</strong> 的<code>backup -&gt; .ssh</code>文件夹下载下来，或 <strong>百度网盘</strong> 的<code>我的资源 -&gt; backup -&gt; .ssh</code>文件夹下载下来</p><h2 id="3-2-覆盖">3.2 覆盖</h2><p>将下载下来的 <code>.ssh</code> 文件夹里面的密钥覆盖到电脑 <code>C:\Users\用户名\.ssh</code> 路径下</p><h1>4  写作</h1><h2 id="4-1-克隆源码">4.1 克隆源码</h2><p>git clone我的GitHub账号下的hexo的源码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:aizhiqian/hexo.git</span><br></pre></td></tr></table></figure><blockquote><p>如果出错，这是上一步SSH覆盖后的权限错误，自行上网查找</p></blockquote><h2 id="4-2-新建文件">4.2 新建文件</h2><p>在没安装 <strong>Node.js</strong> ，也就没安装 <strong>hexo-cli</strong> 的情况下，可以仿照以前的 <strong>post</strong> 文章源码头部新建 <strong>.md</strong> 文件，然后将其放在 <code>source\_posts</code> 目录下。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> </span><br><span class="line"><span class="attr">date:</span> </span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line"><span class="attr">keywords:</span> </span><br><span class="line"><span class="attr">description:</span> </span><br><span class="line"><span class="attr">top_img:</span> </span><br><span class="line"><span class="attr">cover:</span> </span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h2 id="4-3-推送">4.3 推送</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;自定义信息&quot;</span></span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><blockquote><p>！！注：push之后，这时的源码文章文件不会自动添加 <code>abbrlink</code> ，但是真实文章链接却是含有 <code>abbrlink</code> 的链接，此时只需要 <code>git pull origin main</code> 源码到本地，并在本地运行 <code>hexo clean &amp;&amp; hexo g</code> 命令，再次 <code>push</code> 即可。</p></blockquote><hr><h1>5  最好使用以下步骤：</h1><ul><li><code>安装 Node.js、VSCode、Git、hexo-cli</code></li><li><code>git clone git@github.com:aizhiqian/hexo.git</code></li><li><code>npm install</code></li><li><code>hexo n &quot;文章标题&quot;</code></li><li><code>hexo clean &amp;&amp; hexo g</code></li><li><code>最后 push</code></li></ul>]]></content>
    
    
    <summary type="html">本人自己换电脑时进行的操作</summary>
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】记录部署步骤</title>
    <link href="https://aizhiqian.github.io/posts/null/"/>
    <id>https://aizhiqian.github.io/posts/null/</id>
    <published>2023-07-22T17:18:08.000Z</published>
    <updated>2024-04-27T10:37:42.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note green icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>👋  Hello，大家好！今天给大家分享在GitHub和Gitee双平台同时搭建 Hexo 的详细过程。</p><p>🦋  仅供参考！</p></div><h1>1  前期工具准备</h1><h2 id="1-1-安装-VS-Code">1.1 安装 VS Code</h2><p>在安装Git之前，我建议先安装 VS Code。因为安装 Git Bash 时，可以设置 VS Code 作为默认编辑器。Visual Studio Code，简称 VS Code。目前最为强大易用的编辑器，轻量且快速。</p><blockquote><p><a href="https://code.visualstudio.com/Download"><strong>链接直达</strong></a></p></blockquote><h2 id="1-2-安装-Git">1.2 安装 Git</h2><p>你可以直接去官网下载Git并安装，如果国内网速太慢可以“科学上网”或者从其他平台下载。安装时一路next到底就行了，也可以在网上找教程，我不再多说。</p><blockquote><p><strong>可参考安装教程</strong><br><a href="https://blog.csdn.net/mukes/article/details/115693833">Git 详细安装教程（详解 Git 安装过程的每一个步骤）</a></p></blockquote><h2 id="1-3-安装-Node-js">1.3 安装 Node.js</h2><p>建议下载长期支持版，而非当前发布版，因为如果是最新版，容易出现一些奇妙的 bug。</p><blockquote><p><strong>可参考安装教程</strong><br><a href="https://blog.csdn.net/qq_42006801/article/details/124830995?ops_request_misc=%7B%22request%5Fid%22%3A%22168489482216800182783090%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=168489482216800182783090&amp;biz_id=0&amp;spm=1018.2226.3001.4187">Node.js安装与配置（详细步骤）</a><br><a href="https://blog.csdn.net/weixin_44893902/article/details/121788104?ops_request_misc=%7B%22request%5Fid%22%3A%22168489482216800182783090%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=168489482216800182783090&amp;biz_id=0&amp;spm=1018.2226.3001.4187">node.js安装及环境配置超详细教程【Windows系统安装包方式】</a></p></blockquote><p>国内使用 npm 可能很慢，你可以“科学上网”，或者考虑切换为 taobao 镜像源，即手动输入以下内容后按回车（也可以<kbd>Ctrl</kbd>+<kbd>C</kbd>和<kbd>Ctrl</kbd>+<kbd>V</kbd>复制以下代码按回车）：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h1>2  建立仓库</h1><blockquote><p>双平台都要建立仓库</p></blockquote><div class="tabs" id="build"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="build-1"><i class="fa-brands fa-github"></i>GitHub</button><button type="button" class="tab " data-href="build-2">Gitee</button></ul><div class="tab-contents"><div class="tab-item-content active" id="build-1"><p>新建一个 <code>用户名.github.io</code> 仓库用来存放静态博客页面，仓库类型是 <code>public</code></p><p>再建一个 <code>hexo</code> 仓库用来存放 <code>Hexo</code> 博客的源码，这个仓库的类型是 <code>private</code></p></div><div class="tab-item-content" id="build-2"><p>新建一个 <code>用户名</code> 仓库用来存放静态博客页面，仓库类型是 <code>public</code></p><blockquote><p>注意：仓库名称和路径均填<code>用户名</code></p></blockquote><p>再建一个 <code>hexo</code> 仓库用来存放 <code>Hexo</code> 博客的源码，这个仓库的类型是 <code>private</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><h1>3  生成SSH密钥</h1><h2 id="3-1-生成新的-SSH-公钥">3.1 生成新的 SSH 公钥</h2><blockquote><p>Windows 用户建议使用 <strong>Windows PowerShell</strong> 或者 <strong>Git Bash</strong>，最好是 <strong>Git Bash</strong> ，在 <strong>命令提示符(cmd)</strong> 下无 <code>cat</code> 和 <code>ls</code> 命令。</p></blockquote><h3 id="3-1-1-生成-SSH-Key">3.1.1 生成 SSH Key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;your_email@example.com&quot;</span></span><br></pre></td></tr></table></figure><ul><li><code>-t</code> key 类型</li><li><code>-C</code> 注释</li></ul><p>输出，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private ed25519 key pair.</span><br><span class="line">Enter file in which to save the key (/home/git/.ssh/id_ed25519):</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved in /home/git/.ssh/id_ed25519</span><br><span class="line">Your public key has been saved in /home/git/.ssh/id_ed25519.pub</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:ohDd0OK5WG2dx4gST/j35HjvlJlGHvihyY+Msl6IC8I your_email@example.com</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+--[ED25519 256]--+</span><br><span class="line">|    .o           |</span><br><span class="line">|   .+oo          |</span><br><span class="line">|  ...O.o +       |</span><br><span class="line">|   .= * = +.     |</span><br><span class="line">|  .o +..S*. +    |</span><br><span class="line">|. ...o o..+* *   |</span><br><span class="line">|.E. o . ..+.O    |</span><br><span class="line">| . . ... o =.    |</span><br><span class="line">|    ..oo. o.o    |</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure><ul><li>中间通过三次<strong>回车键</strong>确定</li></ul><h3 id="3-1-2-查看-SSH-key">3.1.2 查看 SSH key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> ~/.ssh/</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id_ed25519  id_ed25519.pub</span><br></pre></td></tr></table></figure><ul><li>私钥文件 <code>id_ed25519</code></li><li>公钥文件 <code>id_ed25519.pub</code></li></ul><h3 id="3-1-3-读取公钥文件">3.1.3 读取公钥文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_ed25519.pub</span><br></pre></td></tr></table></figure><p>输出，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-ed25519 AAAA***5B your_email@example.com</span><br></pre></td></tr></table></figure><h2 id="3-2-向帐户添加-SSH-密钥">3.2 向帐户添加 SSH 密钥</h2><h3 id="3-2-1-复制-SSH-公钥">3.2.1 复制 SSH 公钥</h3><p>如果您的 SSH 公钥文件与示例代码不同，请修改文件名以匹配您当前的设置。 在复制密钥时，请勿添加任何新行或空格。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clip &lt; ~/.ssh/id_ed25519.pub</span><br></pre></td></tr></table></figure><h3 id="3-2-2-添加公钥">3.2.2 添加公钥</h3><blockquote><p>注：可以在GitHub和Gitee使用同一对密钥</p></blockquote><div class="tabs" id="add-public-key"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="add-public-key-1"><i class="fa-brands fa-github"></i>GitHub</button><button type="button" class="tab " data-href="add-public-key-2">Gitee</button></ul><div class="tab-contents"><div class="tab-item-content active" id="add-public-key-1"><ol><li>在任何页面的右上角，单击个人资料照片，然后单击“<strong>Settings</strong>”。</li><li>在边栏的“Access”部分中，单击 “ <strong>SSH and GPG keys</strong>”。</li><li>单击“<a href="https://github.com/settings/ssh/new"><strong>New SSH key</strong></a>”或“ <a href="https://github.com/settings/ssh/new"><strong>Add SSH key</strong></a>” 。</li><li>在 &quot;Title&quot;字段中，为新密钥添加描述性标签。 例如，如果使用的是个人笔记本电脑，则可以将此密钥称为”个人笔记本电脑”。</li><li>选择密钥类型（身份验证或签名）。 有关提交签名的详细信息，请参阅“<a href="https://docs.github.com/zh/authentication/managing-commit-signature-verification/about-commit-signature-verification">关于提交签名验证</a>”。</li><li>在“Key”字段中，粘贴公钥。</li><li>单击“ <strong>Add SSH key</strong> ”。</li></ol></div><div class="tab-item-content" id="add-public-key-2"><p>用户可以通过主页右上角 <strong>「个人设置」-&gt;「安全设置」-&gt;「SSH 公钥」-&gt;「<a href="https://gitee.com/profile/sshkeys">添加公钥</a>」</strong> ，添加生成的 public key 添加到当前账户中。</p><blockquote><p>需要注意： <strong>添加公钥需要验证用户密码</strong></p></blockquote></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><h2 id="3-3-测试-SSH-连接">3.3 测试 SSH 连接</h2><blockquote><p>设置 SSH 密钥并将其添加到你的帐户后，可以测试连接</p></blockquote><div class="tabs" id="ssh-test"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="ssh-test-1"><i class="fa-brands fa-github"></i>GitHub</button><button type="button" class="tab " data-href="ssh-test-2">Gitee</button></ul><div class="tab-contents"><div class="tab-item-content active" id="ssh-test-1"><ul><li><p>打开Git Bash</p></li><li><p>输入以下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>您可能会看到类似如下的警告：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">The authenticity of host <span class="string">&#x27;github.com (IP ADDRESS)&#x27;</span> can<span class="string">&#x27;t be established.</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="string">ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="string">Are you sure you want to continue connecting (yes/no)?</span></span></span><br></pre></td></tr></table></figure></li><li><p>验证所看到消息中的指纹是否与 <a href="https://docs.github.com/zh/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints">GitHub 的公钥指纹</a>匹配。 如果是，则键入 <code>yes</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi USERNAME! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure></li><li><p>验证生成的消息包含您的用户名。 如果收到“权限被拒绝”消息，请参阅“<a href="https://docs.github.com/zh/authentication/troubleshooting-ssh/error-permission-denied-publickey">错误：权限被拒绝（公钥）</a>”。</p></li></ul></div><div class="tab-item-content" id="ssh-test-2"><ul><li><p>打开Git Bash</p></li><li><p>输入以下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@gitee.com</span><br></pre></td></tr></table></figure></li><li><p>您将看到以下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi USERNAME! You&#x27;ve successfully authenticated, but GITEE.COM does not provide shell access.</span><br></pre></td></tr></table></figure></li></ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><h1>4  配置密钥</h1><div class="tabs" id="configure-key"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="configure-key-1"><i class="fa-brands fa-github"></i>GitHub</button><button type="button" class="tab " data-href="configure-key-2">Gitee</button></ul><div class="tab-contents"><div class="tab-item-content active" id="configure-key-1"><p>复制 <code>id_ed25519</code> 私钥文件内容，在 <code>hexo</code> 仓库 <code>Settings</code> -&gt; <code>Secrets and variables</code> -&gt;<code>Actions</code> -&gt;<code>New repository secret</code> 页面上添加。</p><ul><li><p>在 <code>Name</code> 输入框填写 <code>HEXO_DEPLOY_PRI</code></p></li><li><p>在 <code>Secret</code> 输入框填写 <code>id_ed25519</code> 私钥文件内容</p></li></ul></div><div class="tab-item-content" id="configure-key-2"><p><strong>不需要</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><h1>5  安装 Hexo</h1><blockquote><p><a href="https://hexo.io/zh-cn/index.html">官网：https://hexo.io/zh-cn/index.html</a></p></blockquote><p>打开 <strong>Windows Terminal</strong> ，输入以下命令后回车：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo<span class="literal">-cli</span> <span class="literal">-g</span></span><br></pre></td></tr></table></figure><p>然后等待一会进度条走完，没报错就代表安装成功。进度条卡住不动可能还是国内网络问题，“科学上网”哦</p><h2 id="5-1-初始化-Hexo">5.1 初始化 Hexo</h2><p>在E盘建立 <strong>Hexo</strong> 文件夹，自定义建立</p><p>然后 <em><strong>cd</strong></em> 到此文件夹，如</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> E:\Hexo</span><br></pre></td></tr></table></figure><p>成功进入后，接下来输入下方代码，再按回车：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure><blockquote><p><code>init</code> ：用来初始化博客的模版文件。后面跟的是你要新建的文件夹比如我的是：<em><strong>blog</strong></em></p></blockquote><p>然后进入我的博客文件夹，输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog</span><br></pre></td></tr></table></figure><p>安装所有 <code>package.json</code> 文件中提到的包,输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>这时候，我的 blog 文件夹里面会多出一堆文件，文件夹结构应该大致是这样：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|  ├── _drafts</span><br><span class="line">|  └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><p>现在我们输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>会看到：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;hexo server</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><blockquote><p><code>server</code> 代表开启本地的 Hexo 服务器，这时你就可以打开浏览器，在地址栏中输入 <code>localhost:4000</code> 就可以看到本地的网页了。</p></blockquote><p>按  <em><kbd>Ctrl</kbd>+<kbd>C</kbd></em>  中断服务器的运行。至此，基础的模版页面便已经搭建好了。</p><h2 id="5-2-与远程仓库建立关联">5.2 与远程仓库建立关联</h2><p>接下来我们将本地的仓库与此前在 GitHub 上建立的仓库建立关联。</p><p>输入 <strong>git init</strong> 初始化 Git 仓库，只需要执行一次即可，看到：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;git init</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> E:/Hexo/blog/.git/</span><br></pre></td></tr></table></figure><p>然后分别输入以下两个命令按回车：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;git config <span class="literal">--global</span> user.email <span class="string">&quot;你的GitHub邮箱&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;git config <span class="literal">--global</span> user.name <span class="string">&quot;用户名&quot;</span></span><br></pre></td></tr></table></figure><p>输入下方代码按回车，与远程 Git 仓库建立连接，只此一次即可</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github.com:用户名/hexo.git</span><br></pre></td></tr></table></figure><p>切换到分支</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="literal">-b</span> main</span><br></pre></td></tr></table></figure><h2 id="5-3-部署到GitHub-和Gitee">5.3 部署到GitHub 和Gitee</h2><p>首先安装 <code>hexo-deployer-git</code> 插件，输入：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo<span class="literal">-deployer-git</span> <span class="literal">--save</span></span><br></pre></td></tr></table></figure><p>下面对 <em><strong>blog</strong></em> 文件夹下的 <em><strong>_config.yml</strong></em> 文件进行配置。</p><p>滑到最下面，把关于</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="string">deploy:&#x27;</span> <span class="string">&#x27;</span></span><br></pre></td></tr></table></figure><p>的这段代码补充为</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="attr">github:</span> <span class="string">git@github.com:用户名/用户名.github.io.git</span></span><br><span class="line">  <span class="attr">gitee:</span> <span class="string">git@gitee.com:用户名/用户名.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>然后终端输入以下命令开始部署：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>等待完成后，进入 <strong><a href="http://xn--eqr924avxo.github.io">用户名.github.io</a></strong> 仓库，依次点击<code>Settings -&gt; Pages </code>，然后选择下拉 None 选择 <strong>master</strong> 分支，再点击 <strong>save</strong> 按钮。</p><p>等待一会，打开网址 <code>https://用户名.github.io</code> 就能看到你的线上网站了！</p><blockquote><p>对于Gitee的 <code>用户名</code> 仓库进行类似的操作</p></blockquote><h1>6  使用 GitHub Actions 实现自动化</h1><p>在 <code>blog</code> 根目录下创建 <code>.github/workflows/deploy.yml</code> 文件，<code>deploy.yml</code> 的内容如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">自动部署到GitHub</span> <span class="string">Pages、Gitee</span> <span class="string">Pages、Vercel</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="comment"># 触发条件1：main 分支收到 push 后执行任务。</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="comment"># 触发条件2：手动按钮</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">pages:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">permissions:</span></span><br><span class="line">      <span class="attr">contents:</span> <span class="string">write</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="number">18.</span><span class="string">x</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;18&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">NPM</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.OS</span> <span class="string">&#125;&#125;-npm-cache</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Configuration</span> <span class="string">environment</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">HEXO_DEPLOY_PRI:</span> <span class="string">$&#123;&#123;secrets.HEXO_DEPLOY_PRI&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_ed25519</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_ed25519</span></span><br><span class="line"><span class="string">          ssh-keyscan -t ed25519 github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          ssh-keyscan -t ed25519 gitee.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.name 用户名</span></span><br><span class="line"><span class="string">          git config --global user.email 你的GitHub邮箱</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo generate</span></span><br><span class="line"><span class="string">          hexo deploy</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">wearerequired/git-mirror-action@master</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 HEXO_DEPLOY_PRI</span></span><br><span class="line">          <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.HEXO_DEPLOY_PRI</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 GitHub 存放源码地址</span></span><br><span class="line">          <span class="attr">source-repo:</span> <span class="string">git@github.com:用户名/hexo.git</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 存放源码地址</span></span><br><span class="line">          <span class="attr">destination-repo:</span> <span class="string">git@gitee.com:用户名/hexo.git</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>从而实现使用 <strong>GitHub Actions</strong> 自动部署hexo博客到GitHub Pages和Gitee Pages，并将源码也自动同步一份到Gitee账户的 <code>hexo</code> 仓库中</p><h1>6  总结</h1><p>以后每次更新博客时都可以走以下几步</p><h2 id="6-1-写作部分">6.1 写作部分</h2><p>1、打开 <strong>Windows Terminal</strong> 进入存放博客代码文件夹</p><p>2、创建文章：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n <span class="string">&quot;文章标题&quot;</span></span><br></pre></td></tr></table></figure><p>3、使用vscode打开新建的.md文件编写内容</p><h2 id="6-2-部署">6.2 部署</h2><p>push源码到 GitHub 的 <code>hexo</code> 仓库后，即可利用 <strong>GitHub Actions</strong> 实现自动部署</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;自定义信息&quot;</span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><h1>7  注意事项</h1><h2 id="7-1-添加屏蔽项">7.1 添加屏蔽项</h2><ol><li>push源码之前，要先添加屏蔽项，打开 <code>blog/.gitignore</code>，输入以下内容：</li></ol><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">.deploy_git*/</span><br><span class="line">_multiconfig.yml</span><br><span class="line">themes/butterfly/.git</span><br></pre></td></tr></table></figure><p>如果不是 <code>butterfly</code> 主题，记得替换最后一行内容为你自己当前使用的主题。</p><ol start="2"><li>可能遇到的bug</li></ol><p>因为 <code>butterfly</code> 主题文件夹下的<code>.git</code>文件夹的存在，那么主题文件夹会被识别子项目。从而无法被上传到源码仓库。若是遇到添加屏蔽项，但是还是无法正常上传主题文件夹的情况。请删除或者先把 <code>blog/themes/butterfly/.git</code> 移动到非博客文件夹目录下，然后再进行 <strong>push</strong> 三部曲，之后你可以考虑把移走的<code>.git</code>放回来，用作以后主题升级。</p>]]></content>
    
    
    <summary type="html">记录自己在Windows上部署hexo博客的详细过程</summary>
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】部署到 GitHub Pages（三）：怎么写作以及更新</title>
    <link href="https://aizhiqian.github.io/posts/5606d387/"/>
    <id>https://aizhiqian.github.io/posts/5606d387/</id>
    <published>2023-07-22T17:07:18.000Z</published>
    <updated>2024-04-27T10:32:19.000Z</updated>
    
    <content type="html"><![CDATA[<h1>系列目录</h1><p><a href="https://blog.csdn.net/y3332664073/article/details/130844780">【Hexo博客搭建】将其部署到 GitHub Pages（一）：前期要做哪些准备？</a></p><p><a href="https://blog.csdn.net/y3332664073/article/details/130845075">【Hexo博客搭建】将其部署到 GitHub Pages（二）：如何初始化并部署？</a></p><p><a href="https://blog.csdn.net/y3332664073/article/details/130846008">【Hexo博客搭建】将其部署到 GitHub Pages（三）：怎么写作以及更新？</a></p><blockquote><p><strong>简介：</strong> 本系列文章属于半笔记半教程的零基础小白入门文，教你将 Hexo 部署到 GitHub Pages 应该怎么做，跟着此系列文章最终可以获得自己的静态博客网站。流程很长，分成不同的篇幅，此为本系列的第三篇。</p></blockquote><h2 id="11-开始写作">11  开始写作</h2><p>在上一篇文章中提到，初始化hexo博客后我们获得了它自动为我们生成的博客页面，同时还给我们生成了一个标题为“Hello World”的帖子。那么我们以后如何写新帖子发布到我们的博客网站呢？</p><p>打开“命令提示符窗口”进行操作，即之前用到的cmd窗口。</p><blockquote><p>Windows用户打开方式是按住Win+R，再输入cmd然后回车即可。</p></blockquote><p>打开后我的电脑是显示如下的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.19042.1165]</span><br><span class="line">(c) Microsoft Corporation。保留所有权利。</span><br><span class="line">C:\Users\86166&gt;</span><br></pre></td></tr></table></figure><p>和第二篇文章第六步的操作相同，</p><p>由于窗口默认是在C盘操作，我们需要进入到本地电脑之前存储网站代码的“文件夹目录”，对于我来说，由于我存储网站代码的<code>blog</code>文件夹是放在 E盘 的 <code>Hexo</code> 文件夹里的，所以我需要先进入 E盘 ，然后回车，显示如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.19042.1165]</span><br><span class="line">(c) Microsoft Corporation。保留所有权利。</span><br><span class="line">C:\Users\86166&gt;e:</span><br><span class="line">E:\&gt;</span><br></pre></td></tr></table></figure><p>再通过cd命令进入 Hexo\blog” 文件夹：</p><p>（这一步请根据你自己之前存放的地址，不要照抄我的哈）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.19042.1165]</span><br><span class="line">(c) Microsoft Corporation。保留所有权利。</span><br><span class="line">C:\Users\86166&gt;e:</span><br><span class="line">E:\&gt;cd Hexo\blog</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>（题外话：我通过上面这行命令亲自实践发现，虽然我的文件夹的命名同时包含大小写，但我全输入小写也是可以进入的）</p><p>好了，现在可以开始通过命令开始第一次写作了。</p><h3 id="11-1-创建新帖子">11.1 创建新帖子</h3><p>输入以下命令，并回车：</p><p>（注意双引号是英文输入法下的！双引号内文字即为你要新建的文章帖子的标题）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;我的第一篇博客文章&quot;</span><br></pre></td></tr></table></figure><p>（或缩写成：hexo n “我的第一篇博客文章”）</p><p>回车后不一会儿，它提示我 blog\source_posts\我的第一篇博客文章.md 文件已经建好了。你会发现该文件后缀名是“.md”，没错，hexo默认我们用Markdown 格式书写文章。</p><blockquote><p>Hexo 支持以任何格式书写文章，只要安装了相应的渲染插件。</p><p>例如，Hexo 默认安装了 hexo-renderer-marked 和 hexo-renderer-ejs，因此你不仅可以用 Markdown 写作，你还可以用 EJS 写作。如果你安装了 hexo-renderer-pug，你甚至可以用 Pug 模板语言书写文章。</p><p>只需要将文章的扩展名从 md 改成 ejs，Hexo 就会使用 hexo-renderer-ejs 渲染这个文件，其他格式同理。</p></blockquote><p>现在，我之前让大家下载的VSCode编辑器这时候就派上用场了，当然，如果你对Markdown非常熟悉也有自己用的顺手的编辑器的话，当然可以根据你自己的习惯使用别的编辑器进行写作，但本文章仅使用VSCode进行演示。</p><h3 id="11-2-编写文章内容">11.2 编写文章内容</h3><p>双击打开VSCode，</p><p>点击左上角“文件”，点击“选择文件”，</p><p>找到刚刚新建的“<a href="http://xn--4gq53kz8hf0gxsep65alzgirau7b.md">我的第一篇博客文章.md</a> ” 并打开，</p><p>现在可以开始你的创作之旅了。</p><blockquote><p>如果不会用Markdown语法书写文章的话可以在其他地方学习一下，</p><p>或进入官网进行学习：</p><p><a href="https://markdown.com.cn/">Markdown 官方中文文档</a></p></blockquote><p>这里插个话：理论上，vscode 在没有安装任何插件的情况下是可以直接编写markdown文档的，书写过程中点击vscode右上角的其中一个小按钮可以在右侧实时预览效果。</p><p>但是为了能够得到一些更加丰富的功能和有好多体验，可以通过增添新的插件对其功能进行完善。</p><blockquote><p>比如 Markdown Preview Enhanced 就是一个很好用的完善预览功能的插件，可以更加形象的展示所编写的pdf格式的文档样式。在插件库中搜索markdown即可找到该插件，然后点击安装后重新加载。</p></blockquote><p>写完后<kbd>Ctrl</kbd>+<kbd>S</kbd>保存你的文章（或点击vscode左上角“文件”，然后“保存”），关闭vscode。</p><h2 id="12-更新main分支">12  更新main分支</h2><h3 id="12-1-清除缓存（可跳过）">12.1 清除缓存（可跳过）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><p>此命令用于清除缓存文件 (db.json) 和已生成的静态文件 (public)。</p><p>在某些情况（尤其是更换主题后），如果发现你对站点的更改无论如何也不生效，可能需要运行该命令。如果进行了多次生成，为了避免受错误缓存影响，最好使用 hexo clean 先清除一遍。也就是说，网站显示异常时可以执行这条命令试试。</p><h3 id="12-2-生成静态文件">12.2 生成静态文件</h3><p>输入以下命令，并回车：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure><p>（或缩写成：<code>hexo g</code> ）</p><p>此命令使刚刚完成写作的文章生成网站静态文件到默认设置的 public 文件夹。</p><h3 id="12-3-启动本地服务器（可跳过）">12.3 启动本地服务器（可跳过）</h3><p>此步骤用于发布前的本地预览</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>（或缩写成：<code>hexo s</code> ）</p><p>默认情况下，访问网址为： <a href="http://localhost:4000/">http://localhost:4000/</a></p><p>浏览器输入该网址就能看本地生成的博客了，但也仅仅在本地，GitHub上没有。</p><p>在cmd窗口按  <kbd>Ctrl</kbd>+<kbd>C</kbd>  中断服务器的运行，</p><p>系统提示  终止批处理操作吗(Y/N)?  输入 Y 然后回车。</p><h3 id="12-4-一键部署">12.4 一键部署</h3><p>输入以下命令，并回车：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>（或缩写成：<code>hexo d</code> ）</p><p>此命令使刚刚完成写作的文章自动生成网站静态文件，并部署到设定的仓库。</p><p>Hexo 提供了快速方便的一键部署功能，只需一条命令就能将网站部署到服务器上。在开始之前，必须先在 _config.yml 中修改参数，一个正确的部署配置中至少要有 type 参数。在我这个系列文章的第二篇第九步，我已经带大家修改过了，跟我一路走下来的朋友们不用管了，还没设置过 _config.yml 参数的新来的朋友麻烦去看一下本系列我的上篇文章哈。</p><p>只需等待一会，就可以打开你的博客地址看到新文章发布成功啦，</p><p>比如我的博客地址为：<a href="https://aizhiqian.github.io">XiaoYang の Blog</a></p><blockquote><p>这一切是如何发生的？</p><p>当执行 hexo deploy 时，Hexo 会将 public 目录中的文件和目录推送至 _config.yml 中指定的远端仓库和分支中，并且完全覆盖该分支下的已有内容。</p></blockquote><h2 id="13-更新备份hexo分支">13  更新备份hexo分支</h2><p>根据我上一篇文章中对 _config.yml 文件参数的修改，上边这个部署的命令默认是对我GitHub上的主分支（也可以叫main或者master分支）进行部署更新，上篇文章说过了，我同时管理了两个分支，分别存放不同内容：</p><blockquote><p>main -负责展示静态网页</p><p>hexo -备份本地hexo文件</p></blockquote><p>分别运行下面三行命令，进行hexo分支更新（后面括号内为注释，无需输入）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add . （此命令用来添加所有文件到暂存区）</span><br><span class="line">git commit -m &quot;新增博客文章&quot;  （此命令用来提交，双引号内可自定义内容，双引号前有空格）</span><br><span class="line">git push origin hexo （此命令用来推送hexo分支到Github）</span><br></pre></td></tr></table></figure><p>第一行命令其实有三种写法：（注意第三种写法后面有个点）</p><blockquote><p>git add -A</p><p>提交所有变化（就是git add --all的缩写）</p><p>git add -u</p><p>提交被修改 (modified) 和被删除 (deleted) 的文件，不包括新文件 (new)</p><p>git add .</p><p>提交新文件 (new) 和被修改 (modified) 文件，不包括被删除 (deleted) 文件</p></blockquote><blockquote><p>git add . ：他会监控工作区的状态树，使用它会把工作时的所有变化提交到暂存区，包括文件内容修改(modified)以及新文件(new)，但不包括被删除的文件。</p><p>git add -u ：他仅监控已经被add的文件（即tracked file），他会将被修改的文件提交到暂存区。add -u 不会提交新文件（untracked file）。（git add --update的缩写）</p><p>git add -A ：是上面两个功能的合集（git add --all的缩写）</p></blockquote><p>第二行的“-m”应该是“message”的缩写，双引号内是自定义提交信息</p><blockquote><p>在上一篇文章中我们对 _config.yml  的message参数设置的就是这个，你可以自定义此次部署更新的说明，比如：“x年x月x日的备份”、“第x次备份”等等都可以</p></blockquote><p>从而推送到 GitHub 仓库进行了备份。</p><h2 id="14-总结">14  总结</h2><p>每次更新博客时都可以走以下三个大步</p><h3 id="14-1-写作部分">14.1 写作部分</h3><p>1、打开cmd进入存放博客代码文件夹</p><p>2、创建文章：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n &quot;文章标题&quot;</span><br></pre></td></tr></table></figure><p>3、使用vscode打开新建的.md文件编写内容</p><h3 id="14-2-对main分支进行部署更新：">14.2 对main分支进行部署更新：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean （清理缓存，可选用）</span><br><span class="line">hexo g （生成资源文件）</span><br><span class="line">hexo d （部署到服务器）</span><br></pre></td></tr></table></figure><h3 id="14-3-对hexo分支进行部署更新：">14.3 对hexo分支进行部署更新：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add . （添加所有文件到暂存区）</span><br><span class="line">git commit -m &quot;自定义信息&quot; （提交此次更新的信息）</span><br><span class="line">git push origin hexo （推送hexo分支到Github）</span><br></pre></td></tr></table></figure><h3 id="14-4-打开你的博客网址查看显示效果">14.4 打开你的博客网址查看显示效果</h3><hr><p>好了，这就是本篇文章：</p><blockquote><p><a href="https://blog.csdn.net/y3332664073/article/details/130846008">【Hexo博客搭建】将其部署到 GitHub Pages（三）：怎么写作以及更新？</a></p></blockquote><p>的全部内容了，更多内容会很快写出来，尽情期待。</p>]]></content>
    
    
    <summary type="html">教你如何使用Hexo写作和更新博客，包括创建新帖子、编写文章内容和更新博客网站</summary>
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】部署到 GitHub Pages（二）：如何初始化并部署？</title>
    <link href="https://aizhiqian.github.io/posts/f642b107/"/>
    <id>https://aizhiqian.github.io/posts/f642b107/</id>
    <published>2023-07-22T17:05:29.000Z</published>
    <updated>2024-04-27T10:30:10.000Z</updated>
    
    <content type="html"><![CDATA[<h1>系列目录</h1><p><a href="https://blog.csdn.net/y3332664073/article/details/130844780">【Hexo博客搭建】将其部署到 GitHub Pages（一）：前期要做哪些准备？</a></p><p><a href="https://blog.csdn.net/y3332664073/article/details/130845075">【Hexo博客搭建】将其部署到 GitHub Pages（二）：如何初始化并部署？</a></p><p><a href="https://blog.csdn.net/y3332664073/article/details/130846008">【Hexo博客搭建】将其部署到 GitHub Pages（三）：怎么写作以及更新？</a></p><blockquote><p><strong>简介：</strong> 本系列文章属于半笔记半教程的零基础小白入门文，教你将 Hexo 部署到 GitHub Pages 的前期需要做哪些准备，跟着此系列文章最终可以获得自己的静态博客网站。流程很长，分成不同的篇幅，此为本系列的第二篇。</p></blockquote><h2 id="6-初始化-Hexo-工程">6  初始化 Hexo 工程</h2><p>注意：接下来应该是你自己的自定义的目录，请不要完全复制粘贴我的！</p><p>比如说我是Windows用户，想把我的网站代码储存在</p><p>电脑 E 盘的 <em><strong>Hexo</strong></em> 文件夹下</p><p>那么我要先在E盘建立相应的文件夹，然后再继续操作。</p><p>由于cmd终端最开始默认在C盘操作，我得先切换到E盘，那么我要输入 <em><strong>E:</strong></em>  然后回车,即：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.19042.1165]</span><br><span class="line">(c) Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">C:\Users\10272&gt;E:</span><br><span class="line"></span><br><span class="line">E:\&gt;</span><br></pre></td></tr></table></figure><p>然后此时，我要通过 <em><strong>cd</strong></em>  进入我本地电脑打算存储网站代码的文件夹目录。（或者右键文件夹 Git Bash Here），即 <em><strong>Hexo</strong></em> 文件夹里</p><p>也就是说我需要输入 <em><strong>cd Hexo</strong></em> 然后回车，我会看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E:\&gt;cd Hexo</span><br><span class="line"></span><br><span class="line">E:\Hexo&gt;</span><br></pre></td></tr></table></figure><p>好了成功进入，接下来输入下方代码，再按回车：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure><blockquote><p><code>hexo</code> ：正是因为我们之前安装了 <code>hexo-cli</code> 这一个包，所以我们可以在终端中使用 <code>hexo</code> 这一命令。</p><p><code>init</code> ：用来初始化博客的模版文件。后面跟的是你要新建的文件夹比如我的是：<em><strong>blog</strong></em></p></blockquote><p>然后我会看到</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo&gt;hexo init blog</span><br><span class="line">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git</span><br><span class="line">[32mINFO [39m Install dependencies</span><br><span class="line">added 242 packages from 207 contributors in 105.871s</span><br><span class="line">15 packages are looking for funding</span><br><span class="line">  run `npm fund` for details</span><br><span class="line">INFO  Start blogging with Hexo!</span><br><span class="line">E:\Hexo&gt;</span><br></pre></td></tr></table></figure><p>下面通过 <em><strong>cd</strong></em>  进入我的博客文件夹，</p><p>即输入 <em>cd blog</em> 后按回车，我会看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo&gt;cd blog</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>现在我就是处于 E:\Hexo\blog 文件夹下操作了，</p><p>现在在这个文件夹内默认安装所有 <code>package.json</code> 文件中提到的包，</p><p>即输入  <em><strong>npm install</strong></em>  然后回车，我会看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;npm install</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;win32&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)</span><br><span class="line">audited 243 packages in 4.956s</span><br><span class="line">15 packages are looking for funding</span><br><span class="line">  run `npm fund` for details</span><br><span class="line">found 0 vulnerabilities</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>这时候，我的 blog 文件夹里面会多出一堆文件，</p><p>文件夹结构应该大致是这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|  ├── _drafts</span><br><span class="line">|  └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><p>现在我们输入  <em><strong>hexo server</strong></em>  然后回车，会看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;hexo server</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><blockquote><p><code>server</code> 代表开启本地的 Hexo 服务器，这时你就可以打开浏览器，在地址栏中输入 <code>localhost:4000</code> 就可以看到本地的网页了。</p></blockquote><p>按  <em><kbd>Ctrl</kbd>+<kbd>C</kbd></em>  中断服务器的运行，</p><p>系统提示  <em><strong>终止批处理操作吗(Y/N)?</strong></em>  输入 <em><strong>Y</strong></em> 然后回车。</p><p>至此，基础的模版页面便已经搭建好了。</p><h2 id="7-生成静态文件">7  生成静态文件</h2><p>到现在，我们的工作都是在本地进行，想必你也很想放到线上与小伙伴们分享。这便轮到了 GitHub Pages 的出场，不过 GitHub Pages 只支持纯静态文件。</p><p>所以我们需要使用下面一行命令先来生成站点的静态文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（如果进行多次生成，为了避免受错误缓存影响，最好使用 hexo clean 先清除一遍。）</span><br><span class="line">hexo generate</span><br><span class="line">（上方命令也可以缩写为 hexo g）</span><br></pre></td></tr></table></figure><p>输入后回车，我会看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;hexo g</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded in 209 ms</span><br><span class="line">INFO  Generated: archives/index.html</span><br><span class="line">INFO  Generated: archives/2021/index.html</span><br><span class="line">INFO  Generated: archives/2021/08/index.html</span><br><span class="line">(node:20772) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class="line">(Use `node --trace-warnings ...` to show where the warning was created)</span><br><span class="line">(node:20772) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class="line">(node:20772) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br><span class="line">(node:20772) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class="line">(node:20772) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class="line">(node:20772) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  Generated: fancybox/jquery.fancybox.min.css</span><br><span class="line">INFO  Generated: js/script.js</span><br><span class="line">INFO  Generated: 2021/08/25/hello-world/index.html</span><br><span class="line">INFO  Generated: css/style.css</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.woff2</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.woff</span><br><span class="line">INFO  Generated: fancybox/jquery.fancybox.min.js</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.ttf</span><br><span class="line">INFO  Generated: css/fonts/FontAwesome.otf</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.eot</span><br><span class="line">INFO  Generated: js/jquery-3.4.1.min.js</span><br><span class="line">INFO  Generated: css/images/banner.jpg</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.svg</span><br><span class="line">INFO  17 files generated in 1.98 s</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>此时我的文件夹目录下会出现 <em><strong>public</strong></em>  这个文件夹，里面存放的就是我的站点的静态文件。</p><h2 id="8-与远程仓库建立关联">8  与远程仓库建立关联</h2><p>接下来我们将本地的仓库与此前在 GitHub 上建立的仓库建立关联。</p><p>输入  <em><strong>git init</strong></em>  初始化 Git 仓库，只需要执行一次即可，看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;git init</span><br><span class="line">Initialized empty Git repository in E:/Hexo/blog/.git/</span><br></pre></td></tr></table></figure><p>在将其部署到 GitHub Pages 上之前，我们最好先建立一个分支。</p><blockquote><p>什么是分支？</p><p>Git 提供了版本管理功能，其中还有一个分支功能，你现在可以简单地将其理解为平行世界。</p></blockquote><p><em><strong><a href="http://xn--eqr924avxo.github.io">用户名.github.io</a></strong></em> 部署后，GitHub Pages 将默认使用你的 main分支（以前叫 master分支，一个意思，主要分支的意思）作为静态文件部署。所以我们最好新建一个 hexo 分支（命名无所谓）用来存储 Hexo 地源代码，main 分支则用来存储部署后的静态文件。为了方便，不想其他名字了，这个分支我就起名叫 hexo 吧。</p><p>新建该分支的命令语句是  <em><strong>git checkout -b hexo</strong></em>  ，然后回车，可以看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;git checkout -b hexo</span><br><span class="line">Switched to a new branch &#x27;hexo&#x27;</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>这时便成功建立了一个 hexo 分支。（此后的工作都将在 hexo 分支下进行）</p><p>你可以通过 <strong><code>git branch -v</code></strong> 来查看当前有哪些分支，使用 <strong><code>git checkout 分支名</code></strong> 来切换到对应的分支。</p><blockquote><p><a href="https://www.yunyoujun.cn/note/git-learn-note/">Git 学习笔记</a></p></blockquote><h2 id="9-部署到-GitHub-Pages">9  部署到 GitHub Pages</h2><p>为了更方便的部署到 GitHub Pages，Hexo 提供了 <code>hexo-deployer-git</code> 插件。</p><p>老规矩，安装该插件，要输入下面命令，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>回车后可以看到</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;npm install hexo-deployer-git --save</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;win32&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)</span><br><span class="line">+ hexo-deployer-git@3.0.0</span><br><span class="line">added 1 package from 1 contributor and audited 244 packages in 8.166s</span><br><span class="line">15 packages are looking for funding</span><br><span class="line">  run `npm fund` for details</span><br><span class="line">found 0 vulnerabilities</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>下面对  <em><strong>blog</strong></em> 文件夹下的  <em><strong>_config.yml</strong></em>  文件进行配置。</p><p>右键  <em><strong>_config.yml</strong></em>  ，打开方式选VS Code（或者直接用VS Code打开该文件），</p><p>滑到最下面，把关于</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="line">deploy:&#x27; &#x27;</span><br></pre></td></tr></table></figure><p>的这段代码补充为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/aizhiqian/aizhiqian.github.io.git   #仓库地址</span><br><span class="line">  branch: main  # 默认使用 master 分支(Github现在改名为main分支)</span><br><span class="line">  message: Update Hexo Static Content # 你可以自定义此次部署更新的说明说明</span><br></pre></td></tr></table></figure><p><kbd>Ctrl</kbd>+<kbd>S</kbd>保存，退出VS Code，部署！</p><p>终端里输入命令  <em><strong>hexo deploy</strong></em>  后（或者缩写为  <em><strong>hexo d</strong></em>  ）回车，我的电脑显示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;hexo deploy</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Setting up Git deployment...</span><br><span class="line">Initialized empty Git repository in E:/Hexo/blog/.deploy_git/.git/</span><br><span class="line">Author identity unknown</span><br><span class="line">*** Please tell me who you are.</span><br><span class="line">Run</span><br><span class="line">  git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">  git config --global user.name &quot;Your Name&quot;</span><br><span class="line">to set your account&#x27;s default identity.</span><br><span class="line">Omit --global to set the identity only in this repository.</span><br><span class="line">fatal: unable to auto-detect email address (got &#x27;10272@DESKTOP-N3PNS7C.(none)&#x27;)</span><br><span class="line">FATAL &#123;</span><br><span class="line">  err: Error: Spawn failed</span><br><span class="line">      at ChildProcess.&lt;anonymous&gt; (E:\Hexo\blog\node_modules\hexo-util\lib\spawn.js:51:21)      at ChildProcess.emit (events.js:400:28)</span><br><span class="line">      at ChildProcess.cp.emit (E:\Hexo\blog\node_modules\cross-spawn\lib\enoent.js:34:29)</span><br><span class="line">      at Process.ChildProcess._handle.onexit (internal/child_process.js:277:12) &#123;</span><br><span class="line">    code: 128</span><br><span class="line">  &#125;</span><br><span class="line">&#125; Something&#x27;s wrong. Maybe you can find the solution here: %s https://hexo.io/docs/troubleshooting.html</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>是的，部署出错（FATAL）了,“ Please tell me who you are.”</p><p>原来是创建git文件夹的时候信息不完善导致的，</p><p>它提示我需要运行（Run）下面两行程序，来设置我帐户的默认标识。</p><p>git config --global user.email “<a href="mailto:you@example.com">you@example.com</a>”</p><p>git config --global <a href="http://user.name">user.name</a> “Your Name”</p><blockquote><p>注意双引号前有空格，邮箱随便填也可以，比如QQ邮箱啥的，</p><p>我用的这个邮箱查找路径是：点击Github主页右上角头像，点击settings，点击Emails，然后就能找到Github的这个邮箱了</p></blockquote><p>那么我分别输入这两个命令按回车，可见下方代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;git config --global user.email &quot;你的邮箱&quot;</span><br><span class="line">E:\Hexo\blog&gt;git config --global user.name &quot;用户名&quot;</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>再用命令  *<strong>git config -l*</strong>  查看所有的配置信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;git config -l</span><br><span class="line">diff.astextplain.textconv=astextplain</span><br><span class="line">filter.lfs.clean=git-lfs clean -- %f</span><br><span class="line">filter.lfs.smudge=git-lfs smudge -- %f</span><br><span class="line">filter.lfs.process=git-lfs filter-process</span><br><span class="line">filter.lfs.required=true</span><br><span class="line">http.sslbackend=openssl</span><br><span class="line">http.sslcainfo=E:/Git/mingw64/ssl/certs/ca-bundle.crt</span><br><span class="line">core.autocrlf=true</span><br><span class="line">core.fscache=true</span><br><span class="line">core.symlinks=false</span><br><span class="line">pull.rebase=false</span><br><span class="line">credential.helper=manager-core</span><br><span class="line">credential.https://dev.azure.com.usehttppath=true</span><br><span class="line">init.defaultbranch=master</span><br><span class="line">user.email=你的邮箱</span><br><span class="line">user.name=用户名</span><br><span class="line">core.repositoryformatversion=0</span><br><span class="line">core.filemode=false</span><br><span class="line">core.bare=false</span><br><span class="line">core.logallrefupdates=true</span><br><span class="line">core.symlinks=false</span><br><span class="line">core.ignorecase=true</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>可以看见下面这两条信息，代表信息以及完善上去了</p><blockquote><p>user.email=你的邮箱</p><p>user.name=用户名</p></blockquote><p>那我们接着部署吧！</p><p>终端里输入命令  <em><strong>hexo deploy</strong></em>  后（或者缩写为  <em><strong>hexo d</strong></em>  ）回车，我的电脑再次报错：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;hexo deploy</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying files from public folder...</span><br><span class="line">INFO  Copying files from extend dirs...</span><br><span class="line">warning: LF will be replaced by CRLF in 2021/08/25/hello-world/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in archives/2021/08/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in archives/2021/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in archives/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in css/fonts/fontawesome-webfont.svg.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in css/style.css.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in fancybox/jquery.fancybox.min.js.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in js/jquery-3.4.1.min.js.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in js/script.js.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">[master (root-commit) a9fc5f8] Update Hexo Static Content</span><br><span class="line"> 17 files changed, 5174 insertions(+)</span><br><span class="line"> create mode 100644 2021/08/25/hello-world/index.html</span><br><span class="line"> create mode 100644 archives/2021/08/index.html</span><br><span class="line"> create mode 100644 archives/2021/index.html</span><br><span class="line"> create mode 100644 archives/index.html</span><br><span class="line"> create mode 100644 css/fonts/FontAwesome.otf</span><br><span class="line"> create mode 100644 css/fonts/fontawesome-webfont.eot</span><br><span class="line"> create mode 100644 css/fonts/fontawesome-webfont.svg</span><br><span class="line"> create mode 100644 css/fonts/fontawesome-webfont.ttf</span><br><span class="line"> create mode 100644 css/fonts/fontawesome-webfont.woff</span><br><span class="line"> create mode 100644 css/fonts/fontawesome-webfont.woff2</span><br><span class="line"> create mode 100644 css/images/banner.jpg</span><br><span class="line"> create mode 100644 css/style.css</span><br><span class="line"> create mode 100644 fancybox/jquery.fancybox.min.css</span><br><span class="line"> create mode 100644 fancybox/jquery.fancybox.min.js</span><br><span class="line"> create mode 100644 index.html</span><br><span class="line"> create mode 100644 js/jquery-3.4.1.min.js</span><br><span class="line"> create mode 100644 js/script.js</span><br><span class="line">fatal: unable to access &#x27;https://github.com/Barry-Flynn/blog/&#x27;: OpenSSL SSL_read: Connection was reset, errno 10054</span><br><span class="line">FATAL &#123;</span><br><span class="line">  err: Error: Spawn failed</span><br><span class="line">      at ChildProcess.&lt;anonymous&gt; (E:\Hexo\blog\node_modules\hexo-util\lib\spawn.js:51:21)      at ChildProcess.emit (events.js:400:28)</span><br><span class="line">      at ChildProcess.cp.emit (E:\Hexo\blog\node_modules\cross-spawn\lib\enoent.js:34:29)</span><br><span class="line">      at Process.ChildProcess._handle.onexit (internal/child_process.js:277:12) &#123;</span><br><span class="line">    code: 128</span><br><span class="line">  &#125;</span><br><span class="line">&#125; Something&#x27;s wrong. Maybe you can find the solution here: %s https://hexo.io/docs/troubleshooting.html</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>又报错了？我很晕。问了群里大佬，说可能是国内的墙导致的网络问题。好吧，免费的那个什么软件工具果然不太靠谱。解决该问题并重新连接后第三次输入命令  <em><strong>hexo deploy</strong></em>  ，回车</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">E:\Hexo\blog&gt;hexo deploy</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying files from public folder...</span><br><span class="line">INFO  Copying files from extend dirs...</span><br><span class="line">warning: LF will be replaced by CRLF in 2021/08/25/hello-world/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in archives/2021/08/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in archives/2021/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in archives/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in css/fonts/fontawesome-webfont.svg.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in css/style.css.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in fancybox/jquery.fancybox.min.js.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in js/jquery-3.4.1.min.js.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in js/script.js.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line">info: please complete authentication in your browser...</span><br><span class="line">Enumerating objects: 31, done.</span><br><span class="line">Counting objects: 100% (31/31), done.</span><br><span class="line">Delta compression using up to 4 threads</span><br><span class="line">Compressing objects: 100% (25/25), done.</span><br><span class="line">Writing objects: 100% (31/31), 882.21 KiB | 4.98 MiB/s, done.</span><br><span class="line">Total 31 (delta 3), reused 0 (delta 0), pack-reused 0</span><br><span class="line">remote: Resolving deltas: 100% (3/3), done.</span><br><span class="line">To https://github.com/Barry-Flynn/blog</span><br><span class="line"> + 4b62927...a9fc5f8 HEAD -&gt; main (forced update)</span><br><span class="line">Branch &#x27;master&#x27; set up to track remote branch &#x27;main&#x27; from &#x27;https://github.com/Barry-Flynn/blog&#x27;.</span><br><span class="line">[32mINFO [39m Deploy done: [35mgit[39m</span><br><span class="line">E:\Hexo\blog&gt;</span><br></pre></td></tr></table></figure><p>成功了！Ohhhhhhhhhhh~</p><p>等待完成后，打开网址 <code>https://用户名.github.io</code> 就能看到你的线上网站了！</p><blockquote><p>使用 https，http 可能无法正常打开。HTTPS 是多了安全加密的 HTTP，Chrome 浏览器已经默认会显示 <code>http</code> 链接为不安全。</p><p>为了安全，建议开启强制 https 跳转。<code>项目地址页面 -&gt; Settings -&gt; Options -&gt; GitHub Pages -&gt; Enforce HTTPS</code>。（翻到下面）</p><p>此时，http 网址会自动重定向到 https</p></blockquote><h2 id="10-备份与自动部署">10  备份与自动部署</h2><p>我们当前只是将生成的静态文件部署到了云端。</p><p>为了以防万一，我们应该将网站的源代码文件也推送到 GitHub 仓库备份。</p><p>输入下方代码按回车，与远程 Git 仓库建立连接，只此一次即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/用户名/用户名.github.io</span><br></pre></td></tr></table></figure><p>若输入错误，可以运行输入  <em><strong>git remote rm origin</strong></em>  删除远程地址，</p><p>然后再输入一遍正确的命令与远程 Git 仓库建立连接，之后就行了。</p><p>接下来准备提交，这三句命令将是你以后每次备份所需要输入。</p><p>（括号内为注释，不用输入哈！）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">（添加到缓存区）</span><br><span class="line">git add .</span><br><span class="line">（这次做了什么更改，简单描述下即可）</span><br><span class="line">git commit -m &#x27;backup&#x27;</span><br><span class="line">（第一次提交时，你可能需先运行下面命令设置一下默认提交分支）</span><br><span class="line">（git push --set-upstream origin hexo）</span><br><span class="line">（推送至远程仓库）</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><blockquote><p>之后写文章可以在该项目下写，与之前一样，只不过这里同时管理了两个分支。</p><p>main -负责展示静态网页</p><p>hexo -备份本地hexo文件</p></blockquote><blockquote><p>main分支更新</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><blockquote><p>hexo分支更新</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add . #添加所有文件到暂存区</span><br><span class="line">git commit -m &quot;新增博客文章&quot;  #提交</span><br><span class="line">git push origin hexo #推送hexo分支到Github</span><br></pre></td></tr></table></figure><hr><p>好了，这就是本篇文章：</p><blockquote><p><a href="https://blog.csdn.net/y3332664073/article/details/130845075">【Hexo博客搭建】将其部署到 GitHub Pages（二）：如何初始化并部署？</a></p></blockquote><p>的全部内容了，更多内容会很快写出来，尽情期待。</p>]]></content>
    
    
    <summary type="html">将 Hexo 部署到 GitHub Pages，初始化工程、生成静态文件并与远程仓库建立关联。</summary>
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>【Hexo】部署到 GitHub Pages（一）：前期要做哪些准备？</title>
    <link href="https://aizhiqian.github.io/posts/7e0916a3/"/>
    <id>https://aizhiqian.github.io/posts/7e0916a3/</id>
    <published>2023-07-22T17:03:53.000Z</published>
    <updated>2024-04-27T10:28:31.000Z</updated>
    
    <content type="html"><![CDATA[<h1>系列目录</h1><p><a href="https://blog.csdn.net/y3332664073/article/details/130844780">【Hexo博客搭建】将其部署到 GitHub Pages（一）：前期要做哪些准备？</a></p><p><a href="https://blog.csdn.net/y3332664073/article/details/130845075">【Hexo博客搭建】将其部署到 GitHub Pages（二）：如何初始化并部署？</a></p><p><a href="https://blog.csdn.net/y3332664073/article/details/130846008">【Hexo博客搭建】将其部署到 GitHub Pages（三）：怎么写作以及更新？</a></p><blockquote><p><strong>简介：</strong> 本系列文章属于半笔记半教程的零基础小白入门文，教你将 Hexo 部署到 GitHub Pages 的前期需要做哪些准备，跟着此系列文章最终可以获得自己的静态博客网站。流程很长，分成不同的篇幅，此为本系列的第一篇。</p></blockquote><blockquote><p><strong>【注意】</strong>：本文纯属才疏尚浅的我以笔记的形式进行的记录，很多知识其实我也不是太懂，可能存在理解偏差和错误，来学习的朋友们请自己甄别，路过的大神们也别喷我哈哈哈，有什么建议和问题可以评论提出或者其它方式联系我。我会尽可能保持更新该文章所使用到的技术和做法，并随时接受勘误。</p></blockquote><h2 id="1-创建GitHub账号和仓库">1  创建GitHub账号和仓库</h2><p>GitHub是一个面向开源及私有软件项目的托管平台，也是世界上最大的代码托管平台，因为只支持Git作为唯一的版本库格式进行托管，故名GitHub。GitHub中文社区,是国内领先的开源社区,是一个可以发现优质开源项目的地方。</p><h3 id="1-1-注册GitHub账号">1.1 注册GitHub账号</h3><p>虽然都是英文，但不必畏惧，也并不会造成使用障碍，只要记得最常用的选项含义即可，以及善用浏览器的网页翻译功能和手头的翻译软件。</p><blockquote><p>注意：注册时的英文用户名将成为你可以使用的免费域名前缀。</p></blockquote><p>注册流程非常简单，这里不再赘述。</p><h3 id="1-2-创建一个新项目">1.2 创建一个新项目</h3><p>单击 右上角【+】- New Repository 新建项目。（以下简称仓库）</p><p>然后填写项目信息。</p><p>仓库的名字格式应为：<code>用户名.github.io</code></p><blockquote><p>为什么必须这个作为仓库名？</p><p>因为这是GitHub Pages 服务的命名规范，同时它也将成为你的专属域名。</p><p>当然，你也可以购置自己的专属域名并用它来提供内容。</p></blockquote><p>比如我的用户名是aizhiqian，那么我的仓库就叫：<code>aizhiqian.github.io</code></p><p>(全部小写更好，有大写也没事，除了大小写切换有一丢丢麻烦外没有区别）</p><p>在description一栏填写简介，随便填填，比如我填的是：<code>个人博客</code></p><p>然后选择 Public。</p><p>最后勾选 Initialize the repository with a README。</p><blockquote><p>此步的作用是用一个 <a href="http://README.md">README.md</a> 对这个仓库进行初始化</p></blockquote><p>完成后点击下面的 Create Repository。</p><h2 id="2-安装-VS-Code">2  安装 VS Code</h2><p>在安装Git之前，我建议先安装 VS Code。因为安装 Git Bash 时，可以设置 VS Code 作为默认编辑器。Visual Studio Code，简称 VS Code。目前最为强大易用的编辑器，轻量且快速。（宇宙第一编辑器哈哈哈）</p><blockquote><p>注意：它并不是我们常常听到的 VS，VS 常常指的是 Visual Studio，是一个功能强大的 IDE（集成开发环境），体积要比 VS Code 都要大上一个量级。</p></blockquote><p>对于它的安装，直接搜官网下载就行了，免费的，不再赘述。</p><h2 id="3-安装-Git">3  安装 Git</h2><p>Git 是一个开源的分布式版本控制系统，由 Linus Torvalds（同时也是 Linux 的作者）为了管理 Linux 开发而开发。类似的工具还有：SVN。但始终更推荐 Git，因为它功能更为强大且它的背后还有更强大的生态：GitHub。</p><p>你可以直接去官网下载Git并安装，如果国内网速太慢可以“科学上网”或者从其他平台下载。MacOS 用户可以下载官网的安装包进行安装，也可以直接安装 App Store 的 Xcode（附带会安装 Git，但是比较大）。安装时一路next到底就行了，也可以在网上找教程，我不再多说。</p><blockquote><p><em>可参考安装教程</em><br><a href="https://blog.csdn.net/mukes/article/details/115693833">Git 详细安装教程（详解 Git 安装过程的每一个步骤）</a></p></blockquote><h2 id="4-安装-Node-js">4  安装 Node.js</h2><p>何为Node.js ？Node.js 是一个基于Chrome JavaScript 运行时建立的一个平台。简单的说 Node.js 就是运行在服务端的 JavaScript。Node.js是一个事件驱动I/O服务端JavaScript环境，基于Google的V8引擎，V8引擎执行Javascript的速度非常快，性能非常好。</p><blockquote><p>想进一步了解的朋友们可以去官网浏览官方文档。</p></blockquote><p>建议下载长期支持版，而非当前发布版，因为如果是最新版，容易出现一些奇妙的 bug。全部默认下一步进行安装。然后Windows 用户打开命令提示符，即按住键盘 Win+R，输入cmd然后回车，弹出黑色代码窗口。</p><blockquote><p><em>可参考安装教程</em><br><a href="https://blog.csdn.net/qq_42006801/article/details/124830995?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168489482216800182783090%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168489482216800182783090&amp;biz_id=0&amp;spm=1018.2226.3001.4187">Node.js安装与配置（详细步骤）</a><br><a href="https://blog.csdn.net/weixin_44893902/article/details/121788104?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168489482216800182783090%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168489482216800182783090&amp;biz_id=0&amp;spm=1018.2226.3001.4187">node.js安装及环境配置超详细教程【Windows系统安装包方式】</a></p></blockquote><p>后续如提到输入命令，均默认指打开终端进行输入。</p><p>输入<code>node --version</code>回车，如果得到的版本号与你方才安装的一致，那么 Node.js 就已经成功安装。</p><blockquote><p>Node.js 安装成功时也默认安装了 npm，在此后将会用到。npm 是随 Node.js 一起被安装的包管理工具，你可以理解成 Node.js 自带的应用商店。</p></blockquote><p>对了，国内使用 npm 可能很慢，你可以“科学上网”，或者考虑切换为 taobao 镜像源，即手动输入以下内容后按回车（也可以<kbd>Ctrl</kbd>+<kbd>C</kbd>和<kbd>Ctrl</kbd>+<kbd>V</kbd>复制以下代码按回车）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h2 id="5-安装Hexo">5  安装Hexo</h2><p>Hexo 是一个快速、简洁而强大的博客框架，基于 Node.js，同样托管于 GitHub 之上。生态中拥有众多插件主题。你可以基于它快速生成一些静态页面。你可以使用别人的各种主题与插件，也可以自己定制开发想要的功能。</p><blockquote><p>为什么不是…?</p><p>其他常用的博客框架还有 WordPress，Typecho，Ghost 等，但这些往往都需要购置自己的服务器，而无法静态化地部署到 GitHub Pages 上。（当然，相应的功能和灵活性也大大提升。）静态化站点还有一个优势就是访问速度往往更快。</p><p>静态网站生成器还有 Vuepress，Gatsby 等。但这些多是为了写文档而量身定制的，你也可以使用它们，但是相较 Hexo 的博客定位，它们关于博客的插件和主题以及解决办法会少得多。</p><p>Hexo 提供的功能与 Hugo 几乎都有，（生成大量文件时，甚至比 Hexo 更快）不过它是基于 GO 语言。日后你想对自己的网站进行自定义，即便是 Hugo，你编写前端的交互仍旧需要使用 JavaScript，所以选择基于 JavaScript 的 Hexo 可以降低学习成本。（你若对 GO 有兴趣，仍然可以尝试使用 Hugo，但本教程将不会针对 Hugo 进行展开。）</p><p>所以对于新手来说，使用 Hexo 作为起始点，不失为一个好选择。（当然如果你有钱租服务器，并希望快速上手的话，就可以考虑考虑 WordPress 或者 Typecho）</p></blockquote><p>如何安装Hexo呢?</p><p>在cmd终端窗口中输入以下命令后回车：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>然后等待一会进度条走完，没报错就代表安装成功。</p><p>进度条卡住不动可能还是国内网络问题，“科学上网”哦，咳咳…</p><blockquote><p>如果安装失败，可能是没有权限，可以尝试头部加上 sudo 重新执行，即输入：</p><p><code>sudo npm install hexo-cli -g</code>然后回车</p></blockquote><p>上面命令中，</p><p>install 自然是安装。</p><p>hexo-cli 则是 hexo 的终端工具，可以帮助你生成一些模版文件，之后再用到。</p><p>-g 代表的是全局安装。也就是在任何地方都可以使用，否则会只能在安装的目录下使用。</p><hr><p>好了，这就是本篇文章：</p><blockquote><p><a href="https://blog.csdn.net/y3332664073/article/details/130844780">【Hexo博客搭建】将其部署到 GitHub Pages（一）：前期要做哪些准备？</a></p></blockquote><p>的全部内容了，更多内容会很快写出来，尽情期待。</p>]]></content>
    
    
    <summary type="html">本文介绍了在 Hexo 搭建博客之前需要做哪些准备工作，包括注册 GitHub 账号、创建项目、安装 VS Code、Git 和 Node.js，以及安装 Hexo</summary>
    
    
    
    <category term="博客相关" scheme="https://aizhiqian.github.io/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="hexo" scheme="https://aizhiqian.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>【图床】npm图床使用</title>
    <link href="https://aizhiqian.github.io/posts/3bfe3c1d/"/>
    <id>https://aizhiqian.github.io/posts/3bfe3c1d/</id>
    <published>2023-07-22T12:18:03.000Z</published>
    <updated>2023-07-22T12:18:03.000Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>首先需要注册一个 npm 的账号。访问<a href="https://www.npmjs.com/signup/">npm 注册页面</a></p><!-- <img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307152001115.png width=60% /> --><img src=https://p0.meituan.net/csc/fd6ca72909e5c9ae22d69be5ae0b3f5957388.jpg width=60% /></li><li><p>完成邮箱验证，注册完成后进入账号管理界面:头像-&gt;Account，拉倒最上方，你会看到<code>You have not verified your email address</code>字样的提示，点击以后按提示步骤验证你的邮箱。</p><!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307152006188.png) --><p><img src="https://p0.meituan.net/csc/688af352d1aaae81664501f45aab19e719998.jpg" alt=""></p></li><li><p>找到我们之前创建的图床仓库，在本地合适的位置把它<code>clone</code>下来。找个空文件夹打开终端输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:[username]/[AssetsRepo].git</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/[username]/[AssetsRepo].git</span><br></pre></td></tr></table></figure></li><li><p>在 clone 下来的[AssetsRepo]文件夹内打开终端，输入以下指令切换回原生源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure></li><li><p>添加本地 npm 用户设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 仅第一次使用需要添加用户，之后会提示你输入你的npm账号密码以及注册邮箱</span></span><br><span class="line">npm adduser</span><br><span class="line"><span class="comment"># 非第一次使用直接登录即可，之后会提示你输入你的npm账号密码以及注册邮箱</span></span><br><span class="line">npm login</span><br></pre></td></tr></table></figure></li><li><p>运行 npm 初始化指令，把整个图床仓库打包，按照指示进行配置，注意需要事先确认你的包名没有和别人已发布的包重复，可以在 npm 官网搜索相应包名，搜不到就说明还没被占用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307152006748.png) --><p><img src="https://p0.meituan.net/csc/a2c0cfee49be26cdd01c2c3ea05596f8122181.jpg" alt=""></p><p>最后会输出一段 package.json，请求确认，输入 yes 即可。</p></li><li><p>然后输入发布指令，我们就可以把包发布到 npm 上了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure></li><li><p>jsdelivr+npm 的图片引用和 jsdelivr+github 很相似，例如我在<code>[AssetsRepo]</code>仓库里存放的<code>/img/index.png</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># jsDelivr+github链接</span></span><br><span class="line">https://cdn.jsdelivr.net/gh/[GithubUserName]/[AssetsRepo]/img/index.png</span><br><span class="line"><span class="comment"># jsDelivr+npm链接</span></span><br><span class="line">https://cdn.jsdelivr.net/npm/[NpmPackageName]/img/index.png</span><br></pre></td></tr></table></figure></li></ol><div class="note success flat"><p>可以看到 npm 只需要提供包名即可。这也是一开始要求包名不重复的原因之一</p></div><p>jsDelivr+npm 依然有 100MB 的包大小限制，但是 NPM 有丰富的国内节点。可以挑选一个使用。个人推荐知乎的。没有大小限制，而且也很稳定。</p>   <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">【jsDelivr】</span><br><span class="line">https://cdn.jsdelivr.net/npm/:package@:version/:file</span><br><span class="line">【fastly】</span><br><span class="line">https://fastly.jsdelivr.net/npm/:package@:version/:file</span><br><span class="line">【Tianli0】</span><br><span class="line">https://cdn1.tianli0.top/npm/:package@:version/:file</span><br><span class="line">【unpkg 自建】</span><br><span class="line">https://cdn.cbd.int/:package@:version/:file</span><br><span class="line">【饿了么1】</span><br><span class="line">https://npm.elemecdn.com/:package@:version/:file</span><br><span class="line">【饿了么2】</span><br><span class="line">https://github.elemecdn.com/:package@:version/:file</span><br><span class="line">【知乎】</span><br><span class="line">https://unpkg.zhimg.com/:package@:version/:file</span><br></pre></td></tr></table></figure><p>当然你也可以利用<a href="https://unpkg.com/">unpkg</a>自建。(UNPKG 是一个内容源自 npm 的全球快速 CDN。它部署在 cloudflare 上，在大陆地区访问到的是香港节点。所以速度也不错。)</p>   <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://unpkg.com/:package@:version/:file</span><br></pre></td></tr></table></figure><ol><li><p>如果每次都要在本地进行<code>npm publish</code>的话，npm 的提交是整个包一起上传的，不存在增量更新，耗时不说，而且还往往需要架梯子才能正常上传。所以我们可以把它交给 github action 来完成。</p><p>a. 在<a href="https://www.npmjs.com/">npm 官网</a>-&gt;头像-&gt;Access Tokens-&gt;Generate New Token,勾选 Automation 选项，<code>Token</code>只会显示这一次，之后如果忘记了就只能重新生成重新配置了。</p>  <!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307152007428.png) --><p><img src="https://p0.meituan.net/csc/45adca6777b29b2936d65294abcac73a113534.jpg" alt=""></p>  <!-- <img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307152008110.png width=80% /> -->  <img src=https://p0.meituan.net/csc/d9fefc4ed4ec82672377c68df41c1f4594599.jpg width=80% /><p>b. 在 github 的[AssetsRepo]仓库设置项里添加一个名为<code>NPM_TOKEN</code>的<code>secrets</code>，把获取的 Npm 的 Access token 输入进去。</p>  <!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307152008803.png) --><p><img src="https://p0.meituan.net/csc/90256a7f9c8e88c7b7dd9753a8571e3d167011.jpg" alt=""></p><p>c. 在 github 的[AssetsRepo]仓库设置项修改Workflow permissions权限</p>  <!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307160014998.png) --><p><img src="https://p0.meituan.net/csc/5b7072ee2a51888418baff0c2e31500a130544.jpg" alt=""><br>下滑到底部</p>  <!-- ![](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307160021302.png) --><p><img src="https://p0.meituan.net/csc/5581d0048f1a7e25ee7b81c3645a4648125623.jpg" alt=""></p><p>d. 在本地的<code>[AssetsRepo]</code>文件夹下新建<code>[AssetsRepo]/.github/workflows/autopublish.yml</code>,</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Publish</span> <span class="string">to</span> <span class="string">npm</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="comment"># 触发条件1：main 分支收到 push 后执行任务</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="comment"># 触发条件2：手动按钮</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-npm:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;18.x&#x27;</span></span><br><span class="line">          <span class="attr">registry-url:</span> <span class="string">&#x27;https://registry.npmjs.org&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">更新版本号</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;you@example.com&quot;</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;Your Name&quot;</span></span><br><span class="line"><span class="string">          npm version patch --no-git-tag-version</span></span><br><span class="line"><span class="string">          VERSION=$(node -p &quot;require(&#x27;./package.json&#x27;).version&quot;)</span></span><br><span class="line"><span class="string">          git add package.json</span></span><br><span class="line"><span class="string">          git commit -m &quot;Update version to $VERSION&quot;</span></span><br><span class="line"><span class="string">          git push</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;secrets.NPM_TOKEN&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>e. 在本地的<code>[AssetsRepo]</code>文件夹下打开终端，运行以下指令，上传新增内容至 github，即可触发部署。</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将更改提交</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;npm publish&quot;</span></span><br><span class="line"><span class="comment"># 推送至github触发action</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure></li></ol><div class="note default flat"><p>此处的指令顺序严格。<br>每次更新 npm 图床都需要先修改<code>[AssetsRepo]\package.json</code>里的<code>version</code>,也就是版本号。<br>而<code>npm version patch</code>即为更新 package.json 里的版本号的指令，效果是末尾版本号+1，例如<code>0.0.1=&gt;0.0.2</code>、<code>1.1.3=&gt;1.1.4</code>。免去了打开<code>package.json</code>再修改版本号的麻烦。（大版本更新还是需要手动改的）<br>更新 npm 图床务必要记得更新<code>package.json</code>里的版本号！</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>由于GitHub action文件中的<code>name: 更新版本号</code>这一步骤已经有了修改版本号的命令，故不再需要在本地修改<code>package.json</code>文件的版本号。只需使用上面三条命令上传到<code>[AssetsRepo]</code>仓库中即可实现自动发布npm包。</p></div><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.anheyu.com/posts/72ea.html">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://p0.meituan.net/csc/0d7ae911e1ffbd5a54b90d14e391a43a6108.jpg)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">转载链接直达</div>            <div class="tag-link-sitename"> npm图床使用</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;首先需要注册一个 npm 的账号。访问&lt;a href=&quot;https://www.npmjs.com/signup/&quot;&gt;npm 注册页面&lt;/a&gt;&lt;/p&gt;
&lt;!-- &lt;img src=https://jsd.012700.xyz/gh/nimalibi/im</summary>
      
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="图床" scheme="https://aizhiqian.github.io/tags/%E5%9B%BE%E5%BA%8A/"/>
    
  </entry>
  
  <entry>
    <title>【图床】PicGo配置图床</title>
    <link href="https://aizhiqian.github.io/posts/5cabcd01/"/>
    <id>https://aizhiqian.github.io/posts/5cabcd01/</id>
    <published>2023-07-22T12:17:15.000Z</published>
    <updated>2024-05-05T10:20:51.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-Github图床">1  Github图床</h2><ol><li><p>进入软件之后，一路到设置里面取消勾选其他图床，只留下Github图床一项，因为我们现在要弄Github图床。</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051816757.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/066e984c55992503188f2a5ccb00929026846.jpg) --></li><li><p>然后到Github新建一个仓库，创建仓库的教程前面有讲，这里就不赘述了，<code>仓库名字</code>和<code>描述</code>随意，最重要的是权限一定要选<code>public</code>，这样你的图片才可以随时随地访问到。在图床设置的Github配置处，按照下图填入对应的信息：</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051817640.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/9e3023f7cbaafc01a86fb524acb4949743852.jpg) --><p>自定义域名的格式为：<code>https://cdn.staticaly.com/gh/用户名/仓库名@main</code>，比如我的就是<br><code>https://cdn.staticaly.com/gh/fomalhaut1998/markdown_pic@main</code>，对应的<code>用户名</code>和<code>仓库名</code>记住要换成自己名字</p><p>Token的获取方式为：<code>右上角头像</code>-&gt;<code>Setting</code>-&gt;<code>左边栏Developer Settings</code>-&gt;<code>左栏Personal access tokens</code>-&gt;<code>左栏tokens(classic)</code></p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051817957.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/0b44f7a59df5c3711aaa5723d2c47a1352254.jpg) --><p>创建Token时，<code>Note</code>随意；<code>Exporation</code>选<code>No expiration</code>，<code>Select scopes</code>必须把<code>repo</code>这一项勾上，然后点击生成就行</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051817125.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/6fd2c83d761a47274ff02120b72eb6f883419.jpg) --><p>这个时候必须马上复制出现的token，不然后面就看不到了，复制了填进去刚刚的Token选项，随后点击确定保存</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051817198.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/62dd97ff2c908e1e00ca47f6ea226e4628997.jpg) --></li><li><p>随便拖拽一张图片进来上传区域这里，应该就可以上传成功，随后把生成的链接复制就可以，此时打开仓库可以发现图片上传到了指定的文件夹。注意：每个仓库大小限制是1G！！！</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051818186.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/efabbb519abf8ad8bf983f93db6e1bf035236.jpg) --></li></ol><h2 id="2-Vika图床">2  Vika图床</h2><p>Vika图床的服务器在国内，速度是比较快的</p><ol><li><p>首先在Picgo里面安装Vikadata的插件</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051818919.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/02e93e1d654fc94a9389c22be6a7454e24346.jpg) --></li><li><p>我们要填的信息有下面这几项：</p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051818599.webp" alt="img"></p><!-- ![img](https://p1.meituan.net/csc/7f9f108059f51364da89d1f44bb9d80033824.jpg) --></li><li><p>进入<a href="https://vika.cn/">维格表官网</a>，注册自己的账号并登录，新建一个空白的维格表</p><img src=https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051819750.webp width=80% /><!-- <img src=https://p0.meituan.net/csc/e56f7f8c5042756aa261e61ccc9343d740476.jpg width=80% /> --></li><li><p>随后点击左下角头像的个人设置，绑定自己的邮箱后，获取<code>API Token</code></p><img src=https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051819554.webp width=70% /><!-- <img src=https://p0.meituan.net/csc/63a0b2bbab142fb5784add3370dbf27222812.jpg width=70% /> --><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051819831.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/bf1e0b217b344fdab64796e78fac4f478468.jpg) --></li><li><p>进入刚刚创建的表格后，点击上边的<code>API</code>，进入API界面后，依次点击<code>显示API Token</code>-&gt;<code>Get 获取</code>，然后图中框起来的就是我们需要的<code>维格表ID</code>和<code>API Token</code></p><p><img src="https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051819049.webp" alt="img"></p><!-- ![img](https://p0.meituan.net/csc/126b3f11a63b8c0f2f8008bb714ae09212097.jpg) --><img src=https://jihulab.com/aini/img/-/raw/main/2024/05/5/202405051820602.webp width=80% /><!-- <img src=https://p0.meituan.net/csc/5be76f05df20fd803d3eed72557a374850109.jpg width=80% /> --></li><li><p>填进去对应位置后，到上传区域，把图床换成维格表，试试拖拽图片能不能上传！</p></li></ol><h2 id="3-bilibili图床">3  bilibili图床</h2><p>开源地址：<a href="https://github.com/xlzy520/picgo-plugin-bilibili">picgo-plugin-bilibili</a></p><ol><li><p>首先在Picgo里面安装 bilibili 的插件</p><!-- ![img](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307171323857.png) --><p><img src="https://p0.meituan.net/csc/12e09e5576522f90aefdfcc9c832fbd131425.jpg" alt="img"></p></li><li><p>我们要填的信息有下面这几项：</p><!-- ![img](https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307171326120.png) --><p><img src="https://p0.meituan.net/csc/469b5934cdc772e1a2a19088bf5dd65545600.jpg" alt="img"></p></li><li><p>获取B站SESSDATA和csrf</p><ul><li>登录<a href="https://www.bilibili.com/">B站</a></li><li>按<code>F12</code>打开控制台</li><li>找到<code>SESSDATA</code>还有<code>bli_jct</code>复制即可</li></ul> <!-- <img src=https://jsd.012700.xyz/gh/nimalibi/img1@main/2023/7/202307171334551.png width=80% /> --> <img src=https://p0.meituan.net/csc/b07cf2087591fe15e1ab606147158837157426.jpg width=80% /></li><li><p>填进去对应位置后，到上传区域，把图床换成bilibili，试试拖拽图片能不能上传！</p></li></ol><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>同时推荐使用Chrome浏览器插件<br>开源地址：<a href="https://github.com/xlzy520/bilibili-img-uploader">bilibili-img-uploader</a></p></div><div class="note danger flat"><p>可能存在防盗链，可按照官方教程自行解决</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-Github图床&quot;&gt;1  Github图床&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;进入软件之后，一路到设置里面取消勾选其他图床，只留下Github图床一项，因为我们现在要弄Github图床。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://jihulab.co</summary>
      
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="图床" scheme="https://aizhiqian.github.io/tags/%E5%9B%BE%E5%BA%8A/"/>
    
  </entry>
  
  <entry>
    <title>【Windows】终端配置代理</title>
    <link href="https://aizhiqian.github.io/posts/da84be3e/"/>
    <id>https://aizhiqian.github.io/posts/da84be3e/</id>
    <published>2023-07-22T12:15:31.000Z</published>
    <updated>2024-04-27T10:59:36.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-CMD-设置代理">1  CMD 设置代理</h2><h3 id="1-1-设置-HTTP-代理：">1.1 设置 HTTP 代理：</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=http://127.0.0.1:7890 &amp; set https_proxy=http://127.0.0.1:7890</span><br></pre></td></tr></table></figure><h3 id="1-2-socks5代理设置：">1.2 socks5代理设置：</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=socks5://127.0.0.1:7890</span><br><span class="line">set https_proxy=socks5://127.0.0.1:7890</span><br></pre></td></tr></table></figure><h3 id="1-3-取消代理：">1.3 取消代理：</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=</span><br><span class="line">set https_proxy=</span><br></pre></td></tr></table></figure><hr><h2 id="2-Git-Bash-设置代理">2  Git Bash 设置代理</h2><h3 id="2-1-设置-HTTP-代理：">2.1 设置 HTTP 代理：</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy http://127.0.0.1:7890</span><br><span class="line">git config --global https.proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure><h3 id="2-2-设置-socks5代理：">2.2 设置 socks5代理：</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy socks5://127.0.0.1:7890</span><br><span class="line">git config --global https.proxy socks5://127.0.0.1:7890</span><br></pre></td></tr></table></figure><h3 id="2-3-取消代理：">2.3 取消代理：</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure><hr><h2 id="3-PowerShell-设置代理">3  PowerShell 设置代理</h2><h3 id="3-1-设置-HTTP-代理：">3.1 设置 HTTP 代理：</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$Env:http_proxy=&quot;http://127.0.0.1:7890&quot;;$Env:https_proxy=&quot;http://127.0.0.1:7890&quot;</span><br></pre></td></tr></table></figure><h3 id="3-2-代理测试">3.2 代理测试:</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://www.google.com</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">本文介绍了如何在Windows系统的cmd, Git Bash和PowerShell终端中设置HTTP和socks5代理，以及取消代理，方便进行网络连接测试</summary>
    
    
    
    <category term="实用教程" scheme="https://aizhiqian.github.io/categories/%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="代理" scheme="https://aizhiqian.github.io/tags/%E4%BB%A3%E7%90%86/"/>
    
    <category term="命令" scheme="https://aizhiqian.github.io/tags/%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
</feed>
